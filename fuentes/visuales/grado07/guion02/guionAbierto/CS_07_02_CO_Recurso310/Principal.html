<!DOCTYPE html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Conoce las partes de un retablo</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

        <!-- Place favicon.ico and apple-touch-icon(s) in the root directory -->

        <script type='text/javascript' src='lib/ppppreloader/1_0/ppppreloader_min.js'></script> 
	    <script>
	    		// Manifiesto del preloader. En este caso, simplemente carga de un manifiesto
	    		// externo en formato JSON todo lo que necesita el motor.
	    		// No usamos el spinner autom�tico porque as� podemos controlar el spinner por
	    		// nuestra cuenta y ocultarlo cuando se haya ejecutado todo el c�digo de inicio
	    		// y el ejercicio est� realmente funcionando.
	    		// El manifiesto se carga del origen "module", que representa el c�digo del motor.
				var manifest = {
					// Bloques de elementos a descargar
				    blocks: [
				    		{ type: "manifest", files: [ { from: "module", file:"motor/manifest.json"} ] }
				    ],
				    // Sin spinner autom�tico
				    spinner: "no",
				    // Esperamos a que el documento est� "ready" para recibir el evento
				    waitForDocumentReady: true, 
				    // Evento de fin de carga (correcta o incorrecta). Si es incorrecta, el manifiesto
				    // contendr� un array "errors" con los errores (manifest.errors.length > 0)
				    onEndLoading: function (mf) {
				    	// Miramos si ha habido errores graves en la precarga
				    	if (mf.errors.length > 0) {
				    		logPreloaderErrors(mf);
					        pppSpinner.hide();
				    		return;
				    	}
				    	// Si llegamos hasta aqu�, es que todo ha ido bien
				    	// Inicializamos el motor
				        Main.init();
						$.calculator.setDefaults( {
							showOn: 'both', 
							buttonImageOnly: true, 
							onButton: function(value, inst) { 
								if( value == "Cerrar" ){
						        	Contenedor.closeHandler();
						       	}
						   },
							buttonImage: pppPreloader.from('CDN', 'extlib/calculadora/calculator.png')
						});
						
						// Ocultamos el spinner, ahora que ya est� todo inicializado
						pppSpinner.hide();

						window.onbeforeunload = function() {
							aulaPlaneta.SCORM.terminate();
						};
				    }
				};
				
				// Inicializamos pppPreloader:
				// - usamos "module" como alias de CDN, pero al que
				//   se s� le aplicar�n los prefijos de localPath y remotePath
				// - indicamos que "module", en remoto (el CDN), est� en la
				//   la carpeta 'motors/m4a/'.
				pppPreloader.init( {
        			aliases: { "module": "CDN" },
	        		remotePaths: { "module": "motors/m9b/" }
	      		});
				
				// Mostramos el spinner, ya que as� controlamos cu�ndo quitarlo (por ejemplo, cuando se
				// haya inicializado el propio ejercicio, y no simplemente cuando se haya bajado todo
				pppSpinner.show();
				
				// Cargamos el manifiesto del motor
				pppPreloader.loadManifest(manifest);

				// Volcado de errores del preloader por la consola
				function logPreloaderErrors(mf) {
			    	if (mf.errors.length > 0) {
				        var msg = "ERROR pppPreloader: \n";
				        for (var i=0;i<mf.errors.length;i++) {
				        	msg += "  - " + mf.errors[i].type + ": " + mf.errors[i].file + " [" + mf.errors[i].url + "]\n";
				        }
				        console.log(msg);
			    	}
				}
				
				function buttonSymbol(typeSymbol, numberSymbol){
        			Motor.InsertSymbol(typeSymbol,numberSymbol);
        		}

	    </script>
        <!--[if IE 9]>
        	<link rel="stylesheet" href="motor/css/ie.css">
		<![endif]-->
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
		<!--<video src="data/small.mp4" controls width="300" height="250" id="video" style="top:250px; position: absolute;"></video>-->
        <!-- Add your site or application content here -->
        <div id="aplicacion">
        	<div id="wrapper">
	 			<div id="mediaHolder" style="height:0px">
				</div>
				<canvas id="stage" width="950" height="608"></canvas>
				<span id="calculator"></span>
			</div>
		</div>
    </body>
</html>
