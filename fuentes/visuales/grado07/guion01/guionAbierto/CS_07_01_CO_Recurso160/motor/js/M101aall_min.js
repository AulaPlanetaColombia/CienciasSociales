/* VERSION 2015.9.29.1 */
function Boton(t,e,i,n,s){this.width=t,this.height=e;var o=new Image;o.src=pppPreloader.from("module",i);var a={images:[o],frames:{width:t,height:e},animations:{normal:[0],hover:[1]}},r=new createjs.SpriteSheet(a);this.bt=new createjs.Sprite(r),this.bt.on("mouseover",function(t){this.gotoAndStop("hover"),document.body.style.cursor="pointer"}),this.bt.on("mouseout",function(t){this.gotoAndStop("normal"),document.body.style.cursor="default"}),this.bt.gotoAndStop("normal"),this.label=new createjs.RichText,this.label.font="bold 12px Arial",this.label.color="#0D3158",this.label.text=n,this.label.mouseEnabled=!1,"left"==s?this.label.x=10:"center"==s&&(this.label.x=(t-this.label.getMeasuredWidth())/2),this.label.y=7,this.contenedor=new createjs.Container,this.contenedor.addChild(this.bt),this.contenedor.addChild(this.label)}function BotonDisable(t,e,i,n,s){this.width=t,this.height=e;var o=new Image;o.src=pppPreloader.from("module",i);var a={images:[o],frames:{width:t,height:e},animations:{normal:[0],hover:[1]}},r=new createjs.SpriteSheet(a);this.bt=new createjs.Sprite(r),this.bt.alpha=.65,this.bt.gotoAndStop("normal"),this.label=new createjs.RichText,this.label.font="bold 12px Arial",this.label.color="#0D3158",this.label.text=n,this.label.mouseEnabled=!1,"left"==s?this.label.x=10:"center"==s&&(this.label.x=(t-this.label.getMeasuredWidth())/2),this.label.y=7,this.contenedor=new createjs.Container,this.contenedor.addChild(this.bt),this.contenedor.addChild(this.label)}function moreInfoPanell(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#000").drawRect(0,0,950,567),this.fons.y=41,this.fons.alpha=.2,this.banda_superior=new createjs.Shape,this.banda_superior.graphics.beginFill("#0D3158").drawRect(0,0,650,32),this.banda_superior.x=150,this.banda_superior.y=100,this.banda_central=new createjs.Shape,this.banda_central.graphics.beginFill("#fff").drawRect(0,0,650,405),this.banda_central.x=150,this.banda_central.y=132,this.banda_inferior=new createjs.Shape,this.banda_inferior.graphics.beginFill("#0D3158").drawRect(0,0,650,13),this.banda_inferior.x=150,this.banda_inferior.y=537;var e=new Image;e.src=pppPreloader.from("module","motor/images/tancar.png"),e.name="tancar",this.tancar=new createjs.Bitmap(e),this.tancar.x=773,this.tancar.y=105,this.titol=new createjs.RichText,this.titol.font="18px Arial",this.titol.color="#fff",this.titol.text=LangRes.lang[LangRes.MASINFORMACION],this.titol.x=160,this.titol.y=105,this.titol.lineWidth=600,this.titol.mouseEnabled=!1,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=0,this.inputDOM0=new createjs.DOMElementCustom("input_moreInfo",this.contenedor),this.inputDOM0.element_x=160,this.inputDOM0.element_y=140,this.inputDOM0.fontsize=18,this.inputDOM0.element_width=615,this.inputDOM0.element_height=370,this.inputDOM0.x=this.inputDOM0.element_x,this.inputDOM0.y=this.inputDOM0.element_y,$(this.inputDOM0.htmlElement).css("width",this.inputDOM0.element_width),$(this.inputDOM0.htmlElement).css("height",this.inputDOM0.element_height),this.contenedor.addChild(this.inputDOM0),this.contenedor.addChild(this.fons),this.contenedor.addChild(this.banda_superior),this.contenedor.addChild(this.banda_central),this.contenedor.addChild(this.banda_inferior),this.contenedor.addChild(this.tancar),this.contenedor.addChild(this.titol),this.contenedor.addChild(this.contingut),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function missatgePanell(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51),this.text=new createjs.RichText,this.text.font="15px Arial",this.text.color="#333333",this.text.text=t,this.text.x=15,this.text.y=t.length<75?15:8,this.text.lineWidth=530,this.text.lineHeight=20,this.text.mouseEnabled=!1,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.aceptar=new Boton(144,28,pppPreloader.from("module","motor/images/btnAceptar.png"),LangRes.lang[LangRes.CONTINUAR],"center"),this.cancelar=new Boton(144,28,pppPreloader.from("module","motor/images/btnCancelar.png"),LangRes.lang[LangRes.CANCELAR],"center"),this.cancelar.contenedor.x=796,this.cancelar.contenedor.y=12,this.aceptar.contenedor.x=650,this.aceptar.contenedor.y=12,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.aceptar.contenedor),this.contenedor.addChild(this.cancelar.contenedor),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function confirmaPanell(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51),this.text=new createjs.RichText,this.text.font="15px Arial",this.text.color="#333333",this.text.text=t,this.text.x=15,this.text.y=8,this.text.lineWidth=530,this.text.lineHeight=20,this.text.mouseEnabled=!1,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.corregir=new Boton(144,28,pppPreloader.from("module","motor/images/btnCorregir.png"),LangRes.lang[LangRes.CORREGIR],"center"),this.reiniciar=new Boton(144,28,pppPreloader.from("module","motor/images/btnReiniciar.png"),LangRes.lang[LangRes.REINICIAR],"center"),this.reiniciar.contenedor.x=796,this.reiniciar.contenedor.y=12,this.corregir.contenedor.x=650,this.corregir.contenedor.y=12,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.reiniciar.contenedor),this.contenedor.addChild(this.corregir.contenedor),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function avisPanell(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51),this.text=new createjs.RichText,this.text.font="15px Arial",this.text.color="#333333",this.text.text=t,this.text.x=15,this.text.y=6,this.text.lineWidth=750,this.text.lineHeight=20,this.text.mouseEnabled=!1,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.aceptar=new Boton(144,28,pppPreloader.from("module","motor/images/btnCorregir.png"),LangRes.lang[LangRes.ACEPTAR],"center"),this.aceptar.contenedor.x=796,this.aceptar.contenedor.y=12,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.aceptar.contenedor),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).wait(500).to({alpha:1},1250,createjs.Ease.circOut)}function avisPanellGuardat(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51),this.text=new createjs.RichText,this.text.font="15px Arial",this.text.color="#333333",this.text.text=t,this.text.x=350,this.text.y=12,this.text.lineWidth=800,this.text.lineHeight=20,this.text.mouseEnabled=!1,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},500,createjs.Ease.circOut);var e=this;window.setTimeout(function(){createjs.Tween.get(e.contenedor).to({alpha:0},500,createjs.Ease.circOut).call(Contenedor.drawFooter)},3500)}function avisPanellEnviat(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51),this.text=new createjs.RichText,this.text.font="15px Arial",this.text.color="#333333",this.text.text=t,this.text.x=350,this.text.y=12,this.text.lineWidth=800,this.text.lineHeight=20,this.text.mouseEnabled=!1,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},500,createjs.Ease.circOut);var e=this;window.setTimeout(function(){createjs.Tween.get(e.contenedor).to({alpha:0},500,createjs.Ease.circOut).call(Contenedor.drawFooterEnviat)},3500)}function resultatsPanell(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#0D3158").drawRect(0,0,950,51),this.currentPag=Motor.currentNumPag%10,this.numPagines=t,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.textoEnviat=new createjs.RichText,this.textoEnviat.text=LangRes.lang[LangRes.MSG_VALIDADOCORRECTO],this.textoEnviat.font="14px arial",this.textoEnviat.fontSize=14,this.textoEnviat.color="#FFF",this.textoEnviat.x=10,this.textoEnviat.y=15,this.textoEnviat.lineWidth=350,this.pagines="",this.numPagines>1&&(this.pagines=new Paginador(Contenedor.inici,this.numPagines),this.pagines.contenedor.x=330,this.pagines.contenedor.y=11,this.seguent=new Boton(144,28,pppPreloader.from("module","motor/images/btnSeguent.png"),LangRes.lang[LangRes.SIGUIENTE],"left"),this.seguent.contenedor.x=300+31*Math.min(this.numPagines,10)+40,this.seguent.contenedor.y=12,this.numPagines<=10&&this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)),this.contenedor.addChild(this.fons),this.contenedor.addChild(this.textoEnviat),this.contenedor.addChild(this.text),this.numPagines>1&&(this.contenedor.addChild(this.pagines.contenedor),this.contenedor.addChild(this.seguent.contenedor),this.pagines.pags[this.currentPag].state("select")),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function solucioPanell(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#0D3158").drawRect(0,0,950,51),this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.currentPag=Motor.currentNumPag,this.numPagines=t,this.reintentar=new Boton(146,29,pppPreloader.from("module","motor/images/btnRestaurar.png"),LangRes.lang[LangRes.REINTENTAR],"left"),this.solucio=new Boton(148,29,pppPreloader.from("module","motor/images/btnSolucio.png"),LangRes.lang[LangRes.SOLUCION],"left"),this.solucio.contenedor.x=786,this.solucio.contenedor.y=12,this.reintentar.contenedor.x=15,this.reintentar.contenedor.y=12,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.solucio.contenedor),Scorm.modo!=Scorm.MODO_REVISAR&&this.contenedor.addChild(this.reintentar.contenedor),this.pagines="",this.numPagines>1&&(this.pagines=new Paginador(0,this.numPagines),this.pagines.contenedor.x=315,this.pagines.contenedor.y=11,this.seguent=new Boton(144,28,pppPreloader.from("module","motor/images/btnSeguent.png"),LangRes.lang[LangRes.SIGUIENTE],"left"),this.seguent.contenedor.x=285+31*this.numPagines+40,this.seguent.contenedor.y=12,this.contenedor.addChild(this.pagines.contenedor),this.contenedor.addChild(this.seguent.contenedor),this.pagines.pags[this.currentPag].state("select")),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut),this.numPagines>1&&(this.validaPags(),this.selectPag(this.currentPag+1))}function PagBase(t,e){this.bt=new createjs.Container,this.num=t+1,this.contestada=0,this.fons=new createjs.Shape,this.src=e,"inici"==e?this.fons.graphics.beginFill("#556f8a").drawRoundRectComplex(1,1,28,28,6,0,0,6):"fi"==e?this.fons.graphics.beginFill("#556f8a").drawRoundRectComplex(1,1,28,28,0,6,6,0):this.fons.graphics.beginFill("#556f8a").drawRoundRectComplex(1,1,28,28,0,0,0,0),this.numero=new createjs.RichText,this.numero.font="18px Arial",this.numero.color="#0D3158",this.numero.text=this.num.toString(),this.numero.x=1==this.num.toString().length?10:4,this.numero.y=6,this.numero.mouseEnabled=!1,this.bt.addChild(this.fons),this.bt.addChild(this.numero),this.bt.on("mouseover",function(t){document.body.style.cursor="pointer"}),this.bt.on("mouseout",function(t){document.body.style.cursor="default"})}function Paginador(t,e){this.contenedor=new createjs.Container,this.pags=new Array;var n=0;for(i=t;i<e&&i<t+10;i++){var s="";s=0==i?new PagBase(i,"inici"):i==e-1?new PagBase(i,"fi"):new PagBase(i,"mig"),s.bt.x=30*n,s.bt.y=0,this.contenedor.addChild(s.bt),this.pags.push(s),n++,s.index=n}}function inicialPanellDisable(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#0D3158").drawRect(0,0,950,51),this.currentPag=Motor.currentNumPag%10,this.numPagines=t,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.validar=new BotonDisable(146,29,pppPreloader.from("module","motor/images/btnGuardar.png"),LangRes.lang[LangRes.GUARDAR],"left"),this.corregir=new BotonDisable(146,28,pppPreloader.from("module","motor/images/btnValidar.png"),LangRes.lang[LangRes.ENVIAR],"left"),this.validar.contenedor.x=25,this.validar.contenedor.y=12,this.corregir.contenedor.x=169,this.corregir.contenedor.y=12,Contenedor.inici=Contenedor.inici>0?Contenedor.inici:0,this.pagines="",this.numPagines>1&&(this.pagines=new Paginador(Contenedor.inici,this.numPagines),this.pagines.contenedor.x=330,this.pagines.contenedor.y=11,this.seguent=new Boton(144,28,pppPreloader.from("module","motor/images/btnSeguent.png"),LangRes.lang[LangRes.SIGUIENTE],"left"),this.seguent.contenedor.x=300+31*Math.min(this.numPagines,10)+40,this.seguent.contenedor.y=12,this.numPagines<=10&&this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)),this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.validar.contenedor),this.contenedor.addChild(this.corregir.contenedor),this.numPagines>1&&(this.contenedor.addChild(this.pagines.contenedor),this.contenedor.addChild(this.seguent.contenedor),this.pagines.pags[this.currentPag].state("select")),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function inicialPanell(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#0D3158").drawRect(0,0,950,51),this.currentPag=Motor.currentNumPag%10,this.numPagines=t,this.contenedor=new createjs.Container,this.contenedor.x=0,this.contenedor.y=558,this.validar=new Boton(146,29,pppPreloader.from("module","motor/images/btnGuardar.png"),LangRes.lang[LangRes.GUARDAR],"left"),this.corregir=new Boton(146,28,pppPreloader.from("module","motor/images/btnValidar.png"),LangRes.lang[LangRes.ENVIAR],"left"),this.validar.contenedor.x=25,this.validar.contenedor.y=12,this.corregir.contenedor.x=169,this.corregir.contenedor.y=12,Contenedor.inici=Contenedor.inici>0?Contenedor.inici:0,this.pagines="",this.numPagines>1&&(this.pagines=new Paginador(Contenedor.inici,this.numPagines),this.pagines.contenedor.x=330,this.pagines.contenedor.y=11,this.seguent=new Boton(144,28,pppPreloader.from("module","motor/images/btnSeguent.png"),LangRes.lang[LangRes.SIGUIENTE],"left"),this.seguent.contenedor.x=300+31*Math.min(this.numPagines,10)+40,this.seguent.contenedor.y=12,this.numPagines<=10&&this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)),this.contenedor.addChild(this.fons),this.contenedor.addChild(this.text),this.contenedor.addChild(this.validar.contenedor),this.contenedor.addChild(this.corregir.contenedor),this.numPagines>1&&(this.contenedor.addChild(this.pagines.contenedor),this.contenedor.addChild(this.seguent.contenedor),this.pagines.pags[this.currentPag].state("select")),Main.stage.removeChild(Contenedor.missatge.contenedor),Main.stage.addChild(this.contenedor),this.contenedor.alpha=0,createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function Pagina(t,e){this.numpagina=e,this.nivel=t.nivel,this.imagen=t.imagen,this.ampliacion=t.ampliacion;var i=Utils.getEnunciats(t.enunciado);this.contenedor=new createjs.Container;var n=new Array,s=15,o=11;for(var a in i){if(this.enunciat=new createjs.RichText,this.enunciat.font="19px Arial",this.enunciat.fontSize=19,(0==i[a].tipo||2==i[a].tipo)&&(this.enunciat.color="#0D3158"),1==i[a].tipo&&(this.enunciat.color="#5555FF"),(0==i[a].tipo||2==i[a].tipo)&&(this.enunciat.text=i[a].text),1==i[a].tipo&&(this.enunciat.text="{{u}}"+i[a].text+"{{normal}}"),auxAcumW=null!=this.enunciat.getBounds()?s+this.enunciat.getBounds().width:s,auxAcumW>=900&&i.length>1&&(s=15,o+=22),this.enunciat.x=s,this.enunciat.y=o,s+=null!=this.enunciat.getBounds()?this.enunciat.getBounds().width+6:0,1==i[a].tipo){var r=new createjs.Shape;r.graphics.beginFill("#fff").drawRect(this.enunciat.x,this.enunciat.y,this.enunciat.getBounds().width,this.enunciat.getBounds().height),r.alpha=.01,this.contenedor.addChild(r),r.on("mouseover",function(t){document.body.style.cursor="pointer"}),r.on("mouseout",function(t){document.body.style.cursor="default"}),r.on("click",function(t,e){window.open(e.href)},null,!1,{href:i[a].href})}this.enunciat.lineWidth=900,this.enunciat.lineHeight=22,this.enunciat.mask=new createjs.Shape,this.enunciat.mask.graphics.beginFill("#fff").drawRect(0,0,900,98),this.enunciat.mask.y=8,this.enunciat.mask.x=15,this.enunciat.mouseEnabled=!1,this.contenedor.addChild(this.enunciat),n.push(this.enunciat)}this.texto=t.texto,this.inputText=new TextInputBox(this,t),""!=this.imagen?(this.inputText.contenedor.x=375,this.inputText.contenedor.y=85,this.posicionX=378,this.ancho=495,this.imagen=new Imagen(t,!0)):""!=this.texto?(this.inputText.contenedor.x=375,this.inputText.contenedor.y=85,this.posicionX=378,this.ancho=495,this.texto=new Texto(t,!0)):(this.inputText.contenedor.x=25,this.posicionX=28,this.ancho=845,this.inputText.contenedor.y=85),this.textIntroducido="",this.explicacion=new createjs.RichText,this.explicacion.text=t.explicacion,this.explicacion.font="18px Arial",this.explicacion.fontSize=18,this.explicacion.color="#0D3158",this.explicacion.x=380,this.explicacion.y=350,this.explicacion.lineWidth=475,this.explicacion.lineHeight=22,this.explicacion.visible=!1,this.respuesta=new createjs.RichText,this.respuesta.text="",this.respuesta.font="18px Arial",this.respuesta.fontSize=18,this.respuesta.color="#0D3158",this.respuesta.x=380,this.respuesta.y=155,this.respuesta.lineWidth=475,this.respuesta.lineHeight=22,this.respuesta.visible=!1,this.validacio=!0,this.respostes=new Array,this.contenedor.addChild(this.inputText.contenedor),this.contenedor.addChild(this.imagen.contenedor),this.contenedor.addChild(this.texto.contenedor),this.contenedor.addChild(this.explicacion),this.contenedor.addChild(this.respuesta)}function TextInputBox(t,e){this.correcte=!1,this.checked=!1,this.paginaPare=t,this.contenedor=new createjs.Container,this.pregunta=e,this.fonsInput=new createjs.Shape,""!=e.imagen||""!=e.texto?(this.fonsInput.graphics.beginFill("#fff").drawRoundRect(0,0,500,300,3),this.marcInput=new createjs.Shape,this.marcInput.graphics.beginStroke("#F8B334").setStrokeStyle(1).drawRoundRect(0,0,500,300,3)):(this.fonsInput.graphics.beginFill("#fff").drawRoundRect(0,0,850,300,3),this.marcInput=new createjs.Shape,this.marcInput.graphics.beginStroke("#F8B334").setStrokeStyle(1).drawRoundRect(0,0,850,300,3)),this.areaText=new createjs.Container,this.areaText.x=0,this.areaText.y=25,this.areaText.addChild(this.fonsInput),this.areaText.addChild(this.marcInput),this.contenedor.addChild(this.areaText)}function Texto(t,e){this.contenedor=new createjs.Container,this.contenedor.x=25,this.contenedor.y=110,this.fons=new createjs.Shape,this.fons.graphics.beginFill("#fff").drawRoundRect(0,0,325,300,10),this.contenedor.addChild(this.fons),this.texte=new createjs.RichText;var i=Utils.getEnunciats(t.texto),n=new Array,s=10,o=11;for(var a in i){if(this.texte=new createjs.RichText,this.texte.font=1==Contenedor.datosXML.plataforma.grado?"17px Arial":"15px Arial",this.texte.fontSize=1==Contenedor.datosXML.plataforma.grado?17:15,(0==i[a].tipo||2==i[a].tipo)&&(this.texte.color="#0D3158"),1==i[a].tipo&&(this.texte.color="#5555FF"),(0==i[a].tipo||2==i[a].tipo)&&(this.texte.text=i[a].text),1==i[a].tipo&&(this.texte.text="{{u}}"+i[a].text+"{{normal}}"),auxAcumW=null!=this.texte.getBounds()?s+this.texte.getBounds().width:s,(auxAcumW>=305||2==i[a].tipo)&&i.length>1&&(s=10,o+=20),this.texte.x=s,this.texte.y=o,s+=null!=this.texte.getBounds()?this.texte.getBounds().width+6:0,1==i[a].tipo){var r=new createjs.Shape;r.graphics.beginFill("#fff").drawRect(this.texte.x,this.texte.y,this.texte.getBounds().width,this.texte.getBounds().height),r.alpha=.01,this.contenedor.addChild(r),r.on("mouseover",function(t){document.body.style.cursor="pointer"}),r.on("mouseout",function(t){document.body.style.cursor="default"}),r.on("click",function(t,e){window.open(e.href)},null,!1,{href:i[a].href})}this.texte.lineWidth=300,this.texte.lineHeight=20,this.texte.mask=new createjs.Shape,this.texte.mask.graphics.beginFill("#fff").drawRoundRect(0,0,305,263,0),this.texte.mask.x=10,this.texte.mask.y=10,this.texte.mouseEnabled=!1,this.contenedor.addChild(this.texte),n.push(this.texte)}(o>450||t.texto.length>450)&&(this.ampliacion=new AmpliacionTexto(t),this.ampliacion.contenedor.x=0,this.ampliacion.contenedor.y=0,this.ampliacion.contenedor.alpha=0,Main.stage.addChild(this.ampliacion.contenedor),this.zoom=new createjs.Bitmap(pppPreloader.from("module","motor/images/ico_zoom.png")),this.zoom.x=285,this.zoom.y=260,this.contenedor.addChild(this.zoom),this.contenedor.on("click",this.zooming,this),this.puntets=new createjs.RichText,this.puntets.text="...",this.puntets.font="24px Arial",this.puntets.color="#0D3158",this.puntets.x=10,this.puntets.y=262,this.contenedor.addChild(this.puntets),this.contenedor.on("mouseover",function(t){document.body.style.cursor="pointer"}),this.contenedor.on("mouseout",function(t){document.body.style.cursor="default"}))}function Imagen(t,e){this.contenedor=new createjs.Container;var i=new Image,n=this;i.onload=function(){n.imagen=new createjs.Bitmap(this),e?(n.imagen.x=25,n.imagen.y=110,n.imagen.scaleX=300/this.width,n.imagen.scaleY=300/this.height,n.imagen.mask=new createjs.Shape,n.imagen.mask.graphics.beginFill("#fff").drawRoundRect(0,0,300,300,10),n.imagen.mask.x=25,n.imagen.mask.y=110,n.imagen.on("mouseover",function(t){document.body.style.cursor="pointer"}),n.imagen.on("mouseout",function(t){document.body.style.cursor="default"})):(n.imagen.x=55,n.imagen.y=-40,n.imagen.scaleX=110/this.width,n.imagen.scaleY=110/this.width,n.imagen.mask=new createjs.Shape,n.imagen.mask.graphics.beginFill("#fff").drawRoundRect(0,0,110,110,10),n.imagen.mask.x=55,n.imagen.mask.y=-40,n.imagen.on("mouseover",function(t){document.body.style.cursor="pointer"}),n.imagen.on("mouseout",function(t){document.body.style.cursor="default"})),n.contenedor.addChild(n.imagen),""!=t.ampliacion&&(n.contenedor.addChild(n.zoom),n.imagen.on("click",n.zooming,n))},""!=t.imagen&&(i.src=Motor.IMG+t.imagen),""!=t.ampliacion&&void 0!=t.ampliacion&&(this.ampliacion=new Ampliacion(t),this.ampliacion.contenedor.x=0,this.ampliacion.contenedor.y=0,this.ampliacion.contenedor.alpha=0,Main.stage.addChild(this.ampliacion.contenedor),this.zoom=new createjs.Bitmap(pppPreloader.from("module","motor/images/ico_zoom.png")),e?(this.zoom.x=285,this.zoom.y=370):(this.zoom.x=135,this.zoom.y=70,this.zoom.scaleX=.75,this.zoom.scaleY=.75),this.zoom.on("mouseover",function(t){document.body.style.cursor="pointer"}),this.zoom.on("mouseout",function(t){document.body.style.cursor="default"}),this.zoom.on("click",this.zooming,this))}function AmpliacionTexto(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#333").drawRoundRect(0,0,Main.stage_width,Main.stage_height,5),this.fons.alpha=.3,this.contenedor=new createjs.Container,this.contenedor.addChild(this.fons),this.fons=new createjs.Shape,this.fons.graphics.beginFill("#fff").drawRoundRect(0,0,750,450,4),this.fons.x=100,this.fons.y=100,this.fonsHead=new createjs.Shape,this.fonsHead.graphics.beginFill("#0D3158").drawRoundRectComplex(0,0,750,32,4,4,0,0),this.fonsHead.x=100,this.fonsHead.y=100,this.texteHead=new createjs.RichText,this.texteHead.text=LangRes.lang[LangRes.TEXTOCOMPLETO],this.texteHead.font=1==Contenedor.datosXML.plataforma.grado?"17px Arial":"15px Arial",this.texteHead.fontSize=1==Contenedor.datosXML.plataforma.grado?17:15,this.texteHead.color="#fff",this.texteHead.x=115,this.texteHead.y=108,this.contenedor.addChild(this.fons),this.contenedor.addChild(this.fonsHead),this.contenedor.addChild(this.texteHead),this.texte=new createjs.RichText;var e=Utils.getEnunciats(t.texto),i=new Array,n=115,s=140;for(var o in e){if(this.texte=new createjs.RichText,this.texte.font="17px Arial",this.texte.fontSize=17,(0==e[o].tipo||2==e[o].tipo)&&(this.texte.color="#0D3158"),1==e[o].tipo&&(this.texte.color="#5555FF"),(0==e[o].tipo||2==e[o].tipo)&&(this.texte.text=e[o].text),1==e[o].tipo&&(this.texte.text="{{u}}"+e[o].text+"{{normal}}"),auxAcumW=null!=this.texte.getBounds()?n+this.texte.getBounds().width:n,(auxAcumW>=805||2==e[o].tipo)&&e.length>1&&(n=115,s+=20),this.texte.x=n,this.texte.y=s,n+=null!=this.texte.getBounds()?this.texte.getBounds().width+6:0,1==e[o].tipo){var a=new createjs.Shape;a.graphics.beginFill("#fff").drawRect(this.texte.x,this.texte.y,this.texte.getBounds().width,this.texte.getBounds().height),a.alpha=.01,this.contenedor.addChild(a),a.on("mouseover",function(t){document.body.style.cursor="pointer"}),a.on("mouseout",function(t){document.body.style.cursor="default"}),a.on("click",function(t,e){window.open(e.href)},null,!1,{href:e[o].href})}this.texte.lineWidth=720,this.texte.lineHeight=22,this.texte.mask=new createjs.Shape,this.texte.mask.graphics.beginFill("#fff").drawRoundRect(0,0,800,493,0),this.texte.mask.x=10,this.texte.mask.y=10,this.texte.mouseEnabled=!1,this.contenedor.addChild(this.texte),i.push(this.texte)}this.fonsFoot=new createjs.Shape,this.fonsFoot.graphics.beginFill("#0D3158").drawRoundRectComplex(0,0,750,15,0,0,0,0),this.fonsFoot.x=100,this.fonsFoot.y=535,this.contenedor.addChild(this.fonsFoot),this.contenedor.on("click",this.tancar),this.contenedor.on("mouseover",function(t){document.body.style.cursor="pointer"}),this.contenedor.on("mouseout",function(t){document.body.style.cursor="default"})}function Ampliacion(t){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#fff").drawRoundRect(0,0,Main.stage_width,Main.stage_height,5),this.fons.alpha=.6,this.contenedor=new createjs.Container,this.contenedor.addChild(this.fons);var e=new Image,i=this;this.imagen="",e.onload=function(){i.imagen=new createjs.Bitmap(this),i.imagen.scaleX=500/this.height,i.imagen.scaleY=500/this.height,i.imagen.x=(Main.stage_width-500*this.width/this.height)/2,i.imagen.y=50,i.imagen.mask=new createjs.Shape,i.imagen.mask.graphics.beginFill("#fff").drawRoundRect(0,0,500,500*this.height/this.width,10),i.imagen.mask.x=(Main.stage_width-500*this.width/this.height)/2,i.imagen.mask.y=50,i.contenedor.addChild(i.imagen)},e.src=Motor.IMG+t.ampliacion,this.contenedor.on("click",this.tancar)}function Simbols(){this.simbols=new createjs.Bitmap(pppPreloader.from("module","motor/images/simbolos.png")),this.marcInput=new createjs.Shape,this.contenedor=new createjs.Container,this.contenedor.addChild(this.simbols),this.contenedor.addChild(this.marcInput),this.contenedor.on("mouseover",this.over,this),this.contenedor.on("mouseout",this.out,this),this.contenedor.on("click",this.press,this)}function datosContenedor(){this.tipo="",this.classe="",this.enunciado="",this.temps="",this.calc="",this.sinaleatoriedad="",this.respuestaunica="",this.masinfo=new masInfo,this.plataforma=new plataforma}function plataforma(){this.grado="",this.titulo="",this.lang=""}function masInfo(){this.inicio="",this.text=""}function datosMotor(){this.cantidad="",this.preguntas=new Array}function pregunta(){this.explicacion="",this.enunciado="",this.imagen="",this.ampliacion="",this.tipo="",this.nivel="",this.id=-1,this.texto=""}Utils=new function(){this.dashedLineTo=function(t,e,i,n,s,o){t.graphics.moveTo(e,i);for(var a=n-e,r=s-i,h=Math.floor(Math.sqrt(a*a+r*r)/o),c=a/h,l=r/h,d=0;d++<h;)e+=c,i+=l,d%2==0?t.graphics.moveTo(e,i):t.graphics.lineTo(e,i);return d%2==0?t.graphics.moveTo(e,i):t.graphics.lineTo(e,i),t},this.arrowRect=function(t,e,i,n,s){var o=.075*n,a=n-o;return t.graphics.moveTo(e,i),t.graphics.lineTo(e+a,i),t.graphics.lineTo(e+a+.8*o,i+.8*s/2),t.graphics.quadraticCurveTo(e+a+.95*o,i+s/2,e+a+.8*o,i+1.2*s/2,1),t.graphics.moveTo(e+a+.8*o,i+1.2*s/2),t.graphics.lineTo(e+a,i+s),t.graphics.lineTo(e,i+s),t.graphics.lineTo(e,i),t},this.lPad=function(t,e){return t=t.toString(),t.length<e?this.lPad("0"+t,e):t},this.cleanText=function(t){t=t.split("{{sub}}").join("<sub>"),t=t.split("{{sup}}").join("<sup>"),t=t.split("{{/subsup}}").join("<n>"),t=t.split("{{normal}}").join("<n>"),t=t.split("{{cur}}").join("<i>"),t=t.split("{{neg}}").join("<b>"),t=t.split("{{u}}").join("<u>"),t=t.split("\n").join("<br/>"),t=t.split("\r").join("<br/>");for(var e=!1,i=!1,n="",s=0;s<t.length;s++)if("<"!=t[s])if(">"!=t[s]){if(e){if(" "==t[s]||"n"==t[s]||"/"==t[s]){e=!1;continue}n+=t[s];continue}}else e&&(t=t.replace("<n>","</"+n+">"),e=!1,i=!1,n="");else e=!0,i=!1;return t},this.cleanTags=function(t){var e="";t=t.split("<![CDATA[").join(""),t=t.split("]]>").join("");for(var i=!1,n=!1,s="",o=0;o<t.length;o++)"<"!=t[o]?">"!=t[o]?i?s+=t[o]:e+=t[o]:i&&(i=!1,n=!1):(s="",i=!0,n=!1);return e},this.getEnunciats=function(t){var e=new Array;if(t.indexOf("||")>=0){var i=t.split("||");if(i.length>1)for(var n in i)if(i.length>parseInt(n)+1){var s="";s=0==n?i[n].substring(0,i[n].lastIndexOf("{{")):i[n].substring(i[n].indexOf("}}")+2,i[n].lastIndexOf("{{"));var o=s.split(" "),a="",r="";for(var h in o){var c=new Object;if(o[h].indexOf("{{")>=0&&o[h].indexOf("{{normal}}")<0?(a=o[h].substring(o[h].indexOf("{{"),o[h].indexOf("}}")+2),r=o[h].substring(o[h].indexOf("}}")+2,o[h].length)):r=o[h],r.indexOf("\n")>=0){var l=r.split("\n");for(var d in l)d==l.length-1?(c=new Object,c.text=l[d],c.tipo=0==d?0:2,e.push(c)):(c=new Object,c.text=a+l[d],c.tipo=0==d?0:2,e.push(c))}else c.text=a+r,c.tipo=0,e.push(c);o[h].indexOf("{{normal}}")>=0&&(a="")}var u=new Object;u.text=i[parseInt(n)+1].substring(0,i[parseInt(n)+1].indexOf("}}")),u.tipo=1,u.href=i[n].substring(i[n].lastIndexOf("{{")+2,i[n].length).split("link:").join(""),e.push(u)}else{var s=i[n].substring(i[n].indexOf("}}")+2,i[n].length),o=s.split(" "),a="",r="";for(var h in o){var c=new Object;if(o[h].indexOf("{{")>=0&&o[h].indexOf("{{normal}}")<0?(a=o[h].substring(o[h].indexOf("{{"),o[h].indexOf("}}")+2),r=o[h].substring(o[h].indexOf("}}")+2,o[h].length)):r=o[h],r.indexOf("\n")>=0){var l=r.split("\n");for(var d in l)d==l.length-1?(c=new Object,c.text=l[d],c.tipo=0==d?0:2,e.push(c)):(c=new Object,c.text=a+l[d],c.tipo=0==d?0:2,e.push(c))}else c.text=a+r,c.tipo=0,e.push(c);o[h].indexOf("{{normal}}")>=0&&(a="")}}else{var g=new Object;g.text=i[0],g.tipo=0,e.push(g)}}else{var g=new Object;g.text=t,g.tipo=0,e.push(g)}return e}},Scorm=new function(){this.modo="",this.suspend_data="",this.completed="",this.connected=!1,this.MODO_EXPONER="browse",this.MODO_REVISAR="review",this.MODO_REVISARALUMNO="areview",this.MODO_EXAMEN="exam",this.init=function(t){this.modo=t.mode,this.suspend_data=t.suspend_data,this.completed=t.completed,this.connected=t.connected}},this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype=new createjs.DisplayObject,i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._workingContext=i.getContext("2d"),i.width=i.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.text="",e.font=null,e.color=null,e.textAlign="left",e.textBaseline="top",
e.maxWidth=null,e.outline=0,e.lineHeight=0,e.lineWidth=null,e.current_Y=0,e.current_font="",e.base_font="",e.underline=!1,e.fontSize=0,e.cleanedText="",e.lines=0,e.yPatch=0,e.DisplayObject_initialize=e.initialize,e.initialize=function(t,e,i){this.DisplayObject_initialize(),this.text=t,this.font=e,this.color=i},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&(this.yPatch=.25*t.measureText("M").width);var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this.cleanText(),this._prepContext(t._workingContext).measureText(this.cleanedText).width},e.getMeasuredLineHeight=function(){return 1.2*this._prepContext(t._workingContext).measureText("M").width},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.DisplayObject_getBounds=e.getBounds,e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""==this.text)return null;var i=this._drawText(null,{}),n=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,s=n*t.H_OFFSETS[this.textAlign||"left"],o=this.lineHeight||this.getMeasuredLineHeight(),a=o*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.initialize(s,a,n,i.height)},e.clone=function(){var e=new t(this.text,this.font,this.color);return this.cloneProps(e),e},e.toString=function(){return"[RichText (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e.DisplayObject_cloneProps=e.cloneProps,e.cloneProps=function(t){this.DisplayObject_cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth},e._prepContext=function(t){return t.font=this.font,t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,i){var n=!!e;n||(e=this._prepContext(t._workingContext));var s=this.lineHeight||this.getMeasuredLineHeight(),o=0,a=0;this.cleanText();for(var r=String(this.text).split(/(?:\r\n|\r|\n)/),h=String(this.cleanedText).split(/(?:\r\n|\r|\n)/),c=0,l=r.length;l>c;c++){var d=r[c],u=h[c],g=null;if(null!=this.lineWidth&&(g=e.measureText(u).width)>this.lineWidth){var m=d.indexOf("neg")>=0?1.05:1,p=d.split(/(\s)/);d=p[0];var f=u.split(/(\s)/);u=f[0],g=e.measureText(u).width;for(var x=1,C=f.length;C>x;x+=2){var w=e.measureText(f[x]+f[x+1]).width*m;g+w>this.lineWidth?(n&&this._drawTextLine(e,d,a*s),g>o&&(o=g),d=p[x+1],u=f[x+1],g=e.measureText(u).width,a++):(d+=p[x]+p[x+1],u+=f[x]+f[x+1],g+=w)}}n&&this._drawTextLine(e,d,a*s),i&&null==g&&(g=e.measureText(u).width),g>o&&(o=g),a++}return i&&(i.count=a,i.width=o,i.height=a*s),this.current_Y=0,i},e.cleanText=function(){this.cleanedText=this.text.split("{{sub}}").join(""),this.cleanedText=this.cleanedText.split("{{sup}}").join(""),this.cleanedText=this.cleanedText.split("{{/subsup}}").join(""),this.cleanedText=this.cleanedText.split("{{normal}}").join(""),this.cleanedText=this.cleanedText.split("{{cur}}").join(""),this.cleanedText=this.cleanedText.split("{{neg}}").join(""),this.cleanedText=this.cleanedText.split("{{u}}").join(""),this.cleanedText=this.cleanedText.split("{{lt}}").join(""),this.cleanedText=this.cleanedText.split("{{lg}}").join("")},e._drawTextLine=function(t,e,i){var n=0,s=i,o="";(this.current_font="")&&(this.current_font=t.font),this.current_Y=i,""==this.base_font&&(this.base_font=t.font);var a=e.split("{{");o=a[0],this._drawTextPart(t,o,n),n+=t.measureText(o).width;for(var r in a)if(0!=r){var h=(a[r],a[r].split("}}"));switch(this.underline=!1,h[0]){case"sub":this.current_font=Math.ceil(this.fontSize/1.5)+"px Arial",this.current_Y=s+Math.ceil(this.fontSize/3)+3;break;case"sup":this.current_font=Math.ceil(this.fontSize/1.5)+"px Arial",this.current_Y=s-4;break;case"cur":this.current_font="italic "+this.base_font,this.current_Y=s;break;case"neg":this.current_font="bold "+this.base_font,this.current_Y=s;break;case"u":this.underline=!0;break;case"lt":h[1]="<"+h[1];break;case"lg":h[1]=">"+h[1];break;default:this.current_Y=s,this.current_font=this.base_font}o=h[1],this._drawTextPart(t,o,n),n+=t.measureText(o).width}},e._drawTextPart=function(t,e,i){t.font=this.current_font,this.outline?t.strokeText(e,i,this.current_Y+this.yPatch,this.maxWidth||65535):t.fillText(e,i,this.current_Y+this.yPatch,this.maxWidth||65535),this.underline&&this._drawUnderline(t,e,i)},e._drawUnderline=function(t,e,i){t.beginPath(),t.strokeStyle=this.color,t.lineWidth=1,t.moveTo(i,this.current_Y+this.fontSize),t.lineTo(i+t.measureText(e.trim()).width,this.current_Y+this.fontSize),t.stroke()},createjs.RichText=t}(),resultatsPanell.prototype.selectPag=function(t){this.pagines.pags[t-1].state("select"),this.currentPag=t-1,Contenedor.missatge.seguent.bt.removeAllEventListeners("mousedown"),this.numPagines<=10&&(this.currentPag<this.numPagines-1&&(this.seguent.contenedor.visible=!0),this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)),this.numPagines==Contenedor.inici+this.currentPag+1?(Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.PRIMERO],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.primeroPaginaHandler)):(Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.SIGUIENTE],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler))},resultatsPanell.prototype.primeroPag=function(){this.contenedor.removeChild(this.pagines.contenedor),Contenedor.inici=0,this.pagines=new Paginador(Contenedor.inici,this.numPagines),this.pagines.contenedor.x=330,this.pagines.contenedor.y=11,this.currentPag=0,this.pagines.pags[this.currentPag].state("select"),this.contenedor.addChild(this.pagines.contenedor);for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.removeAllEventListeners("mousedown"),Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.SIGUIENTE],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)},resultatsPanell.prototype.unselectCurrentPag=function(){0==this.pagines.pags[this.currentPag].contestada?this.pagines.pags[this.currentPag].state("normal"):this.pagines.pags[this.currentPag].state("buit")},resultatsPanell.prototype.checkedCurrentPag=function(){this.pagines.pags[this.currentPag].contestada=1},resultatsPanell.prototype.seguentPag=function(){var t=this.numPagines-Contenedor.inici;if(this.currentPag<Math.min(t,10)-1)return this.unselectCurrentPag(),this.currentPag++,this.pagines.pags[this.currentPag].state("select"),Contenedor.missatge.seguent.bt.removeAllEventListeners("mousedown"),this.numPagines<=10&&(this.currentPag<this.numPagines-1&&(this.seguent.contenedor.visible=!0),this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)),this.numPagines==Contenedor.inici+this.currentPag+1?(Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.PRIMERO],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.primeroPaginaHandler)):(Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.SIGUIENTE],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)),!0;if(t>=10){this.contenedor.removeChild(this.pagines.contenedor),this.currentPag++,Contenedor.inici+=this.currentPag,this.pagines=new Paginador(Contenedor.inici,this.numPagines),this.pagines.contenedor.x=330,this.pagines.contenedor.y=11,this.currentPag=0,this.pagines.pags[this.currentPag].state("select"),this.contenedor.addChild(this.pagines.contenedor);for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);return Contenedor.missatge.seguent.bt,!0}return!1},solucioPanell.prototype.selectPag=function(t){this.pagines.pags[t-1].state("select"),this.currentPag=t-1,Motor.pagines[this.currentPag].validacio?this.pagines.pags[this.currentPag].numero.color="#41A62A":this.pagines.pags[t-1].numero.color="#E1001A"},solucioPanell.prototype.unselectCurrentPag=function(){Motor.pagines[this.currentPag].validacio?this.pagines.pags[this.currentPag].state("correct"):this.pagines.pags[this.currentPag].state("error"),this.pagines.pags[this.currentPag].numero.color="#0D3158"},solucioPanell.prototype.seguentPag=function(){this.currentPag<this.numPagines-1&&(this.unselectCurrentPag(),this.currentPag++,this.pagines.pags[this.currentPag].state("select"),this.pagines.pags[this.currentPag].numero.color="#E1001A")},solucioPanell.prototype.validaPags=function(){for(key in Motor.pagines)Motor.pagines[key].validacio?this.pagines.pags[key].state("correct"):this.pagines.pags[key].state("error")},PagBase.prototype.state=function(t){this.fons.graphics.clear();var e="";"normal"==t?e="#556f8a":"select"==t?e="#f8b334":"correct"==t?e="#41a62a":"error"==t?e="#e1061a":"buit"==t&&(e="#fff"),"inici"==this.src?this.fons.graphics.beginFill(e).drawRoundRectComplex(1,1,28,28,6,0,0,6):"fi"==this.src?this.fons.graphics.beginFill(e).drawRoundRectComplex(1,1,28,28,0,6,6,0):this.fons.graphics.beginFill(e).drawRoundRectComplex(1,1,28,28,0,0,0,0)},inicialPanellDisable.prototype=Object.create(inicialPanell.prototype),inicialPanell.prototype.selectPag=function(t){this.pagines.pags[t-1].state("select"),this.currentPag=t-1,Contenedor.missatge.seguent.bt.removeAllEventListeners("mousedown"),this.numPagines<=10&&(this.currentPag<this.numPagines-1&&(this.seguent.contenedor.visible=!0),this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)),this.numPagines==Contenedor.inici+this.currentPag+1?(Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.PRIMERO],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.primeroPaginaHandler)):(Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.SIGUIENTE],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler))},inicialPanell.prototype.primeroPag=function(){this.contenedor.removeChild(this.pagines.contenedor),Contenedor.inici=0,this.pagines=new Paginador(Contenedor.inici,this.numPagines),this.pagines.contenedor.x=330,this.pagines.contenedor.y=11,this.currentPag=0,this.pagines.pags[this.currentPag].state("select"),this.contenedor.addChild(this.pagines.contenedor);for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.removeAllEventListeners("mousedown"),Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.SIGUIENTE],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)},inicialPanell.prototype.unselectCurrentPag=function(){0==this.pagines.pags[this.currentPag].contestada?this.pagines.pags[this.currentPag].state("normal"):this.pagines.pags[this.currentPag].state("buit")},inicialPanell.prototype.checkedCurrentPag=function(){this.pagines.pags[this.currentPag].contestada=1},inicialPanell.prototype.seguentPag=function(){var t=this.numPagines-Contenedor.inici;if(this.currentPag<Math.min(t,10)-1)return this.unselectCurrentPag(),this.currentPag++,this.pagines.pags[this.currentPag].state("select"),Contenedor.missatge.seguent.bt.removeAllEventListeners("mousedown"),this.numPagines<=10&&(this.currentPag<this.numPagines-1&&(this.seguent.contenedor.visible=!0),this.currentPag==this.numPagines-1&&(this.seguent.contenedor.visible=!1)),this.numPagines==Contenedor.inici+this.currentPag+1?(Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.PRIMERO],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.primeroPaginaHandler)):(Contenedor.missatge.seguent.label.text=LangRes.lang[LangRes.SIGUIENTE],Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)),!0;if(t>=10){this.contenedor.removeChild(this.pagines.contenedor),this.currentPag++,Contenedor.inici+=this.currentPag,this.pagines=new Paginador(Contenedor.inici,this.numPagines),this.pagines.contenedor.x=330,this.pagines.contenedor.y=11,this.currentPag=0,this.pagines.pags[this.currentPag].state("select"),this.contenedor.addChild(this.pagines.contenedor);for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);return!0}return!1},Pagina.prototype.setPosicion=function(){Motor.input1.element_x=this.posicionX,Motor.input1.element_width=this.ancho},Pagina.prototype.explicar=function(){this.explicacion.visible=!0},Pagina.prototype.saveText=function(){this.textIntroducido=$(Motor.input1.htmlElement).val()},Pagina.prototype.drawText=function(){var t=Main.navegador.split(" "),e=Main.mobil,i=t[0].indexOf("Safari");i>-1&&"Android"==e&&$(Motor.input1.htmlElement).focus().blur(),$(Motor.input1.htmlElement).val(this.textIntroducido)},TextInputBox.prototype.focus=function(){this.marcInput.graphics.clear(),""!=this.pregunta.imagen?this.marcInput.graphics.beginStroke("#F8B334").setStrokeStyle(3).drawRoundRect(0,0,500,300,3):this.marcInput.graphics.beginStroke("#F8B334").setStrokeStyle(3).drawRoundRect(0,0,850,300,3)},TextInputBox.prototype.blur=function(){this.marcInput.graphics.clear(),""!=this.pregunta.imagen?this.marcInput.graphics.beginStroke("#F8B334").setStrokeStyle(1).drawRoundRect(0,0,500,300,3):this.marcInput.graphics.beginStroke("#F8B334").setStrokeStyle(1).drawRoundRect(0,0,850,300,3)},TextInputBox.prototype.clear=function(){this.marcInput.graphics.clear(),""!=this.pregunta.imagen?this.marcInput.graphics.beginStroke("#F8B334").setStrokeStyle(1).drawRoundRect(0,0,400,32,5):this.marcInput.graphics.beginStroke("#F8B334").setStrokeStyle(1).drawRoundRect(0,0,750,32,5)},Texto.prototype.zooming=function(t){(null==t||t.primary)&&(Main.stage.setChildIndex(this.ampliacion.contenedor,Main.stage.getNumChildren()-1),this.ampliacion.contenedor.visible=!0,createjs.Tween.get(this.ampliacion.contenedor).to({alpha:1},500,createjs.Ease.circOut))},Imagen.prototype.zooming=function(t){(null==t||t.primary)&&(Main.stage.setChildIndex(this.ampliacion.contenedor,Main.stage.getNumChildren()-1),this.ampliacion.contenedor.visible=!0,Motor.hideDomObjects(),createjs.Tween.get(this.ampliacion.contenedor).to({alpha:1},500,createjs.Ease.circOut))},Ampliacion.prototype.tancar=function(t){(null==t||t.primary)&&(Motor.showDomObjects(),createjs.Tween.get(this).to({alpha:0},500,createjs.Ease.circOut))},AmpliacionTexto.prototype.tancar=function(t){(null==t||t.primary)&&createjs.Tween.get(this).to({alpha:0},500,createjs.Ease.circOut)},Simbols.prototype.over=function(){this.marcInput.graphics.beginStroke("#3FA6E0").setStrokeStyle(1).drawRoundRect(0,1,32,32,3)},Simbols.prototype.out=function(){this.marcInput.graphics.clear()},Simbols.prototype.press=function(){0==Motor.finestra.alpha&&($(Motor.inputDOM.htmlElement).css("display","block"),Motor.contenedor.addChild(Motor.finestra),Main.stage.setChildIndex(Motor.finestra,Main.stage.getNumChildren()-1),createjs.Tween.get(Motor.finestra).to({alpha:1},200,createjs.Ease.circOut).call(function(){$(Motor.inputDOM.htmlElement).css("width",Motor.inputDOM.element_width+1),$(Motor.inputDOM.htmlElement).css("height",Motor.inputDOM.element_height+1),Main.stage.setChildIndex(Motor.finestra,Main.stage.getNumChildren()-1)})),$(Motor.inputDOM.htmlElement).css("display","block"),$(Motor.inputDOM.htmlElement).css("overflow-y","auto")},Motor=new function(){this.fons="",this.pagines=new Array,this.contenedor="",this.INITIAL_Y=118,this.PREG_Y_PADDING=87,this.PREG_X_PADDING=25,this.PREG_INICI_X_PADDING=235,this.PREG_FINAL_X_PADDING=585,this.RESP_HEIGHT=82,this.RESP_WIDTH=322,this.RESP_INNER_HEIGHT=78,this.RESP_INNER_WIDTH=320,this.LINE_X=570,this.LINE_Y_MIN=20,this.LINE_Y_MAX=535,this.LINE_SIZE=3,this.itemX=0,this.itemY=0,this.separator="",this.datosXML="",this.solucion=!1,this.video="",this.currentPag="",this.currentNumPag=0,this.inputText="",this.simbol="",this.windowSimbol="",this.CursorPosition=0,this.IMG="data/imagenes/",this.familyNames=["Matemáticos básicos","Subíndices","Superíndices","Matemáticos (otros)","Alfabeto griego","Varios","Fonética (inglés)","Fonética (otros)"],this.symbols=["√ ∛ ∜ ∝ ∞ ½ ⅓ ⅔ ¼ ¾ ⅕ ⅖ ⅗ ⅘ ⅙ ⅚ ⅛ ⅜ ⅝ ⅞ ⅟","₀ ₁ ₂ ₃ ₄ ₅ ₆ ₇ ₈ ₉ ₊ ₋ ₌ ₍ ₎","⁰ ¹ ² ³ ⁴ ⁵ ⁶ ⁷ ⁸ ⁹ ⁺ ⁻ ⁼ ⁽ ⁾ ⁿ","± − ∓ ∔ ∀ ∁ ∂ ∃ ∄ ∅ ∆ ∇ ∈ ∉ ∊ ∋ ∌ ∍ ∎ ∏ ∐ ∑ ∕ ∖ ∗ ∘ ∙ ∟ ∠ ∡ ∢ ∣ ∤ ∥ ∦ ∧ ∨ ∩ ∪ ∫ ∬ ∭ ∮ ∯ ∰ ∱ ∲ ∳ ∴ ∵ ∶ ∷ ⊕ ⊖ ⊗ ⊘ ⊙ ⊚ ⊛ ⊜ ⊝ ⊞ ⊟ ⊠ ⊡ ⊢ ⊣ ⊤ ⊥ ⊦ ⊧ ⊨ ⊩ ⊪ ⊫ ⊬ ⊭ ⊮ ⊯ ⊰ ⊱ ⊲ ⊳ ⊴ ⊵ ⊶ ⊷ ⊸ ⊹ ⊺ ⊻ ⊼ ⊽ ⊾ ⊿ ⋀ ⋁ ⋂ ⋃ ⋄ ⋅ ⋆ ⋇ ⋈ ⋉ ⋊ ⋋ ⋌ ⋍ ⋎ ⋏ ⋐ ⋑ ⋒ ⋓ ⋔ ⋕ ⋖ ⋗ ⋘ ⋙ ⋚ ⋛ ⋜ ⋝ ⋞ ⋟ ⋠ ⋡ ⋢ ⋣ ⋤ ⋥ ⋦ ⋧ ⋨ ⋩ ⋪ ⋫ ⋬ ⋭ ⋮ ⋯ ⋰ ⋱","Α Β Γ Δ Ε Ζ Η Θ Ι Κ Λ Μ Ν Ξ Ο Π Ρ Σ Τ Υ Φ Χ Ψ Ω Ϊ Ϋ ά έ ή ί ΰ α β γ δ ε ζ η θ ι κ λ μ ν ξ ο π ρ ς σ τ υ φ χ ψ ω ϊ ϋ ό ύ ώ ϐ ϑ ϒ ϓ ϔ ϕ ϖ Ϛ Ϝ Ϟ Ϡ Ϣ ϣ Ϥ ϥ Ϧ ϧ Ϩ ϩ Ϫ ϫ Ϭ ϭ Ϯ ϯ ϰ ϱ ϲ ϳ ϶","€ £ ¥ © ® « » - – — ¬ Ê ê Ĉ ĉ ʷ ʸ ˉ µ","i: ɪ ʊ u: e ə ɜ: ɔ: æ ʌ ɑ: ɒ ɪə eɪ ʊə ɔɪ əʊ eə aɪ aʊ p f t θ ʧ s ʃ k b v d ð ʤ z ʒ g h m n ŋ r l w j","Æ Ð ø ɐ ɑ ɒ ɓ ɔ ɕ ɖ ɗ ɘ ə ɚ ɛ ɜ ɝ ɞ ɟ ɠ ɡ ɢ ɣ ɤ ɥ ɦ ɧ ɨ ɩ ɪ ɫ ɬ ɭ ɮ ɯ ɰ ɱ ɲ ɳ ɴ ɵ ɶ ɷ ɸ ɹ ɺ ɻ ɼ ɽ ɾ ɿ ʀ ʁ ʂ ʃ ʄ ʅ ʆ ʇ ʈ ʉ ʊ ʋ ʌ ʍ ʎ ʏ ʐ ʑ ʒ ʓ ʔ ʕ ʖ ʗ ʘ ʙ ʚ ʛ ʜ ʝ ʞ ʟ ʠ ʡ ʢ ʣ ʤ ʥ ʦ ʧ ʨ"],this.ponerContenedor=function(t){},this.cargarDatos=function(){$.get(pppPreloader.from("data","data/datos.xml?time="+(new Date).getTime()),function(t){Motor.datosXML=new datosMotor,Motor.datosXML.cantidad=$(t).find("preguntas").attr("cantidad"),$(t).find("pregunta").each(function(t){this.preg=new pregunta,this.preg.explicacion=$(this).children("explicacion").text(),this.preg.id=t,this.preg.enunciado=$(this).children("enunciado").text(),this.preg.imagen=$(this).children("imagen").text(),this.preg.ampliacion=$(this).children("ampliacion").text(),this.preg.nivel=$(this).children("nivel").text(),this.preg.tipo=$(this).children("tipo").text(),this.preg.texto=$(this).children("texto").text(),Motor.datosXML.preguntas.push(this.preg)}),Motor.inicializarEstructura(),Contenedor.crearPaginacio(),"MSIE 10"==Main.navegador&&$(".input").css("background-color","#fff!important")})},this.inicializarEstructura=function(t){this.init()},this.reinicializarEstructuraMotor=function(){Main.stage.removeChild(Motor.contenedor),Motor.deleteInputs(),Motor.cargarDatos()},this.estaCompletado=function(){this.currentPag.saveText();for(key1 in Motor.pagines){var t=!1;if(""!=Motor.pagines[key1].textIntroducido&&(t=!0),!t)return!1}return!0},this.getEstado=function(){var t=new Array;this.currentPag.saveText();for(var e=0;e<this.pagines.length;e++)for(key0 in this.pagines)e==this.pagines[key0].numpagina&&t.push(this.pagines[key0].textIntroducido.replace(/\|/gi,"##SEP##"));return t.join("{||}")},this.revisar=function(){if(""!=this.estado){if(this.estado.indexOf("[")>=0){var t=this.estado.substring(1,this.estado.length-1).split("][");Contenedor.timeRevision=t[0];var e=t[1].split("{||}")}else var e=this.estado.split("{||}");for(var i in this.pagines)for(var n in e)parseInt(n)==this.pagines[i].numpagina&&(this.pagines[i].textIntroducido=e[n].replace(/##SEP##/gi,"|"));this.currentPag.drawText()}},this.validar=function(){return this.currentPag.saveText(),this.simbol.contenedor.alpha=.35,this.simbol.contenedor.removeAllEventListeners(),!0},this.hideDomObjects=function(){Motor.CursorPosition=$(this.inputDOM.htmlElement)[0].selectionStart,this.input1.visible=!1},this.showDomObjects=function(){this.input1.visible=!0},this.obtenerEstado=function(){},this.reiniciar=function(){},this.activar=function(){},this.desactivar=function(){$(this.input1.htmlElement).attr("readonly","readonly")},this.numPaginas=function(){return Motor.datosXML.cantidad},this.ponerPagina=function(t){this.currentPag.saveText(),this.contenedor.removeChild(this.currentPag.contenedor),this.currentNumPag=t-1,this.currentPag=this.pagines[this.currentNumPag],this.contenedor.addChild(this.currentPag.contenedor),this.currentPag.setPosicion(),this.currentPag.drawText()},this.obtenerPaginaActual=function(t){},this.verSolucion=function(t){this.solucionar(),this.desactivar()},this.solucionar=function(){this.solucion=!1},this.obtenerTipoEjercicio=function(){},this.obtenerVersion=function(){},this.init=function(){this.contenedor=new createjs.Container,this.pagines=new Array;for(var t=0;t<Motor.datosXML.cantidad;t++){var e=0,i=Motor.datosXML.preguntas[e];Motor.datosXML.preguntas.splice(e,1),this.addPagina(i,i.id)}this.contenedor.addChild(this.pagines[0].contenedor),this.currentPag=this.pagines[0],this.currentNumPag=0,this.createInput(i),this.createSimbols(),this.currentPag.setPosicion(),Main.stage.addChild(this.contenedor)},this.addPagina=function(t,e){var i=new Pagina(t,e);i.contenedor.y=this.INITIAL_Y,this.pagines.push(i)},this.createSimbols=function(){this.simbol=new Simbols,this.simbol.contenedor.x=885,this.simbol.contenedor.y=230,this.contenedor.addChild(this.simbol.contenedor),this.SimbolsPopup()},this.createInput=function(t){var e=$('<textarea id="input0" class="input"></textarea>');$("#mediaHolder").append(e),this.input1=new createjs.DOMElementCustom(e.attr("id"),this.contenedor),""!=t.imagen?(this.input1.element_x=380,this.input1.element_y=this.INITIAL_Y+117,this.input1.element_width=490,this.input1.element_height=290,this.input1.fontsize=18):(this.input1.element_x=27,this.input1.element_y=this.INITIAL_Y+117,this.input1.element_width=845,this.input1.element_height=290,this.input1.fontsize=18),this.input1.x=this.input1.element_x,this.input1.y=this.input1.element_y,$(this.input1.htmlElement).css("width",this.input1.element_width),$(this.input1.htmlElement).css("height",this.input1.element_height),$(this.input1.htmlElement).focus(function(){Motor.currentPag.inputText.focus()}),$(this.input1.htmlElement).blur(function(){Motor.currentPag.inputText.blur()}),$(this.input1.htmlElement).keydown(function(){if("readonly"!=$(this).attr("readonly")){var t=$(this);Motor.CursorPosition=t[0].selectionStart+1,Contenedor.checkPagina()}}),$(this.input1.htmlElement).click(function(){if("readonly"!=$(this).attr("readonly")){var t=$(this);Motor.CursorPosition=t[0].selectionStart+1,Contenedor.checkPagina()}}),this.contenedor.addChild(this.input1);var i=Main.navegador.split(" ")[0].indexOf("IE"),n=Main.mobil;i>-1&&"Tablet"==n&&(e.focusout(function(t){$("body").focus()}),$(this.input1.htmlElement).click(Motor.select))},this.select=function(){$(this).blur().focus()},this.clickSimbol=function(t){var e=$(this.input1.htmlElement).val();e=e.substring(0,Motor.CursorPosition)+t+e.substring(Motor.CursorPosition+1,e.length),$(this.input1.htmlElement).val(e)},this.deleteInputs=function(){$("textarea").each(function(){$(this).remove()})},this.InsertSymbol=function(t,e){var i=Motor.symbols[t].split(" "),n=i[e];Motor.clickSimbol(n),Motor.CursorPosition++,$(Motor.inputDOM.htmlElement)[0].selectionStart=Motor.CursorPosition,Motor.tancaro()},this.SimbolsPopup=function(){this.familyNames=["Matemáticos básicos","Subíndices","Superíndices","Matemáticos (otros)","Alfabeto griego","Varios","Fonética (inglés)","Fonética (otros)"],this.symbols=["√ ∛ ∜ ∝ ∞ ½ ⅓ ⅔ ¼ ¾ ⅕ ⅖ ⅗ ⅘ ⅙ ⅚ ⅛ ⅜ ⅝ ⅞ ⅟","₀ ₁ ₂ ₃ ₄ ₅ ₆ ₇ ₈ ₉ ₊ ₋ ₌ ₍ ₎","⁰ ¹ ² ³ ⁴ ⁵ ⁶ ⁷ ⁸ ⁹ ⁺ ⁻ ⁼ ⁽ ⁾ ⁿ","± − ∓ ∔ ∀ ∁ ∂ ∃ ∄ ∅ ∆ ∇ ∈ ∉ ∊ ∋ ∌ ∍ ∎ ∏ ∐ ∑ ∕ ∖ ∗ ∘ ∙ ∟ ∠ ∡ ∢ ∣ ∤ ∥ ∦ ∧ ∨ ∩ ∪ ∫ ∬ ∭ ∮ ∯ ∰ ∱ ∲ ∳ ∴ ∵ ∶ ∷ ⊕ ⊖ ⊗ ⊘ ⊙ ⊚ ⊛ ⊜ ⊝ ⊞ ⊟ ⊠ ⊡ ⊢ ⊣ ⊤ ⊥ ⊦ ⊧ ⊨ ⊩ ⊪ ⊫ ⊬ ⊭ ⊮ ⊯ ⊰ ⊱ ⊲ ⊳ ⊴ ⊵ ⊶ ⊷ ⊸ ⊹ ⊺ ⊻ ⊼ ⊽ ⊾ ⊿ ⋀ ⋁ ⋂ ⋃ ⋄ ⋅ ⋆ ⋇ ⋈ ⋉ ⋊ ⋋ ⋌ ⋍ ⋎ ⋏ ⋐ ⋑ ⋒ ⋓ ⋔ ⋕ ⋖ ⋗ ⋘ ⋙ ⋚ ⋛ ⋜ ⋝ ⋞ ⋟ ⋠ ⋡ ⋢ ⋣ ⋤ ⋥ ⋦ ⋧ ⋨ ⋩ ⋪ ⋫ ⋬ ⋭ ⋮ ⋯ ⋰ ⋱","Α Β Γ Δ Ε Ζ Η Θ Ι Κ Λ Μ Ν Ξ Ο Π Ρ Σ Τ Υ Φ Χ Ψ Ω Ϊ Ϋ ά έ ή ί ΰ α β γ δ ε ζ η θ ι κ λ μ ν ξ ο π ρ ς σ τ υ φ χ ψ ω ϊ ϋ ό ύ ώ ϐ ϑ ϒ ϓ ϔ ϕ ϖ Ϛ Ϝ Ϟ Ϡ Ϣ ϣ Ϥ ϥ Ϧ ϧ Ϩ ϩ Ϫ ϫ Ϭ ϭ Ϯ ϯ ϰ ϱ ϲ ϳ ϶","€ £ ¥ © ® « » - – — ¬ Ê ê Ĉ ĉ ʷ ʸ ˉ µ","i: ɪ ʊ u: e ə ɜ: ɔ: æ ʌ ɑ: ɒ ɪə eɪ ʊə ɔɪ əʊ eə aɪ aʊ p f t θ ʧ s ʃ k b v d ð ʤ z ʒ g h m n ŋ r l w j","Æ Ð ø ɐ ɑ ɒ ɓ ɔ ɕ ɖ ɗ ɘ ə ɚ ɛ ɜ ɝ ɞ ɟ ɠ ɡ ɢ ɣ ɤ ɥ ɦ ɧ ɨ ɩ ɪ ɫ ɬ ɭ ɮ ɯ ɰ ɱ ɲ ɳ ɴ ɵ ɶ ɷ ɸ ɹ ɺ ɻ ɼ ɽ ɾ ɿ ʀ ʁ ʂ ʃ ʄ ʅ ʆ ʇ ʈ ʉ ʊ ʋ ʌ ʍ ʎ ʏ ʐ ʑ ʒ ʓ ʔ ʕ ʖ ʗ ʘ ʙ ʚ ʛ ʜ ʝ ʞ ʟ ʠ ʡ ʢ ʣ ʤ ʥ ʦ ʧ ʨ"],this.tancar=new createjs.Bitmap(pppPreloader.from("module","motor/images/wtancar.png")),this.tancar.x=670,this.tancar.y=5,this.fons=new createjs.Shape,this.fons.graphics.beginFill("#d2ccf3").drawRoundRect(0,0,700,450,2),this.titol=new createjs.RichText,this.titol.text="INSERTAR SÍMBOLO",this.titol.font="bold 12px arial",this.titol.fontSize=14,this.titol.color="#000",this.titol.x=15,this.titol.y=6,this.titol.lineWidth=575,this.finestra=new createjs.Container,this.finestra.addChild(this.fons),this.finestra.addChild(this.titol),this.finestra.addChild(this.tancar),this.inputDOM=new createjs.DOMElementCustom("symbolHtml",this.finestra),this.inputDOM.element_x=5,this.inputDOM.element_y=27,this.inputDOM.element_width=680,this.inputDOM.element_height=389,this.inputDOM.grandParent=this.contenedor,this.inputDOM.x=this.inputDOM.element_x,this.inputDOM.y=this.inputDOM.element_y,$(this.inputDOM.htmlElement).css("width",this.inputDOM.element_width),$(this.inputDOM.htmlElement).css("height",this.inputDOM.element_height),this.finestra.addChild(this.inputDOM),this.finestra.addChild(this.fons),this.finestra.addChild(this.titol),this.finestra.addChild(this.tancar),this.finestra.alpha=0,this.tancar.on("mousedown",this.tancaro,this),this.finestra.x=125,this.finestra.y=75,this.contenedor.addChild(this.finestra)},this.tancaro=function(){1==this.contenedor.alpha&&(Motor.showDomObjects(),createjs.Tween.get(this.finestra).to({alpha:0},200)),this.contenedor.removeChild(this.finestra),$(this.inputDOM.htmlElement).css("display","none"),$(this.inputDOM.htmlElement).css("overflow-y","hidden")}},Contenedor=new function(){this.MOTOR_Y=118,this.FONS_MOTOR_H=440,this.TITLE_MOTOR_X=180,this.TITLE_MOTOR_Y=12,this.LOGO_PLANETA_X=130,this.LOGO_PLANETA_Y=5,this.LOGO_PLANETA_SCALE=.13,this.PLANETA_X=14,this.PLANETA_Y=8,this.PLANETA_X2=55,this.FONS_TITLE_Y=41,this.FONS_TITLE_HEIGHT=76,this.TANCAR_X=915,this.TANCAR_Y=10,this.TITLE_ACT_X=25,this.TITLE_ACT_Y=52,this.TITLE_ACT_W=800,this.TITLE_ACT_H=25,this.MOREINFO_SIZE=22,this.MOREINFO_X1=815,this.MOREINFO_X2=915,this.MOREINFO_Y=48,this.CALC_X1=811,this.CALC_X2=911,this.CALC_Y=75,this.SEPARATOR_Y=41,this.SEPARATOR_X=850,this.SEPARATOR_HEIGHT=76,this.CLOCK_TITLE_X=855,this.CLOCK_TITLE_Y=63,this.CLOCK_X=860,this.CLOCK_Y=72,this.fons="",this.fonsGeneral="",this.fonsTitol="",this.title_planeta_1="",this.title_planeta_2="",this.logo_planeta="",this.title_motor="",this.tancar="",this.title_exercici="",this.mesInfo="",this.calc="",this.separador="",this.titleClock="",this.clock="",this.DEFAULT_TIME=0,this.time=0,this.timer="",this.timeRevision="",this.validar="",this.corregir="",this.missatge="",this.moreinfopanel="",this.num_pagines=0,this.reiniciar=!1,this.datosXML="",this.mutex=!1,this.currentElement=null,this.obtenerPrincipal_mc=function(t){},this.obtenerNoRandom=function(){},this.obtenerIdioma=function(){},this.motorCompletado=function(){},this.paginaCompletada=function(){},this.motorCambioPagina=function(t){},this.crearPaginacio=function(){Contenedor.num_pagines=Motor.numPaginas(),this.drawFooter(),Motor.estado=Scorm.suspend_data,Motor.revisar(),(this.reiniciar&&Scorm.modo==Scorm.MODO_REVISAR||!this.reiniciar&&(Scorm.modo==Scorm.MODO_REVISAR||Scorm.modo==Scorm.MODO_REVISARALUMNO))&&(Motor.desactivar(),Contenedor.deleteHeaderDown(),Contenedor.drawHeaderDown(),Contenedor.validacioResultatsHandler(null)),Scorm.modo==Scorm.MODO_EXPONER&&(this.drawWarning(),Motor.desactivar())},this.cargarDatos=function(){$.get(pppPreloader.from("data","data/datos.xml?time="+(new Date).getTime()),function(t){Contenedor.datosXML=new datosContenedor;var e=$(t).find("motor");Contenedor.datosXML.tipo=e.attr("tipo"),Contenedor.datosXML.classe=e.attr("classe");var i=e.children("enunciado"),n=i.text();n=n.replace(/</g,"{{lt}}"),n=n.replace(/>/g,"{{lg}}"),Contenedor.datosXML.enunciado=n;var i=e.children("enunciado");Contenedor.datosXML.enunciado=i.text();var s=$(t).find("temps");Contenedor.datosXML.temps=s.text();var o=$(t).find("calc");Contenedor.datosXML.calc=o.text();var a=$(t).find("sinaleatoriedad");Contenedor.datosXML.sinaleatoriedad=a.text();var r=$(t).find("respuestaunica");Contenedor.datosXML.respuestaunica=r.text();var h=$(t).find("masinfo");Contenedor.datosXML.masinfo.text=h.text(),Contenedor.datosXML.masinfo.inicio=h.attr("inicio");var c=$(t).find("plataforma");Contenedor.datosXML.plataforma.grado=c.find("grado").text(),Contenedor.datosXML.plataforma.titulo=c.find("titulo").text(),Contenedor.datosXML.plataforma.lang=c.find("lang").text(),Contenedor.inicializarEstructura(),Motor.cargarDatos(),Contenedor.settingsCalc()})},this.settingsCalc=function(){var t=Main.navegador.split(","),e=Main.mobil,i=t[0].indexOf("Chrome"),n=t[0].indexOf("Safari");t[1];1==Contenedor.datosXML.plataforma.grado?($("#calculator").calculator(),(i>-1||n>-1)&&"Android"==e||($("#calculator").draggable(),$("#calculator").css("-ms-touch-action","none"),$("#calculator").on("dragstart",function(t,e){Contenedor.calculadora.element_x=0,Contenedor.calculadora.element_y=0}))):($("#calculator").calculator({layout:$.calculator.scientificLayout}),(i>-1||n>-1)&&"Android"==e||($("#calculator").draggable(),$("#calculator").css("-ms-touch-action","none"),$("#calculator").on("dragstart",function(t,e){Contenedor.calculadora.element_x=0,Contenedor.calculadora.element_y=0})))},this.inicializarEstructura=function(){""==Contenedor.datosXML.plataforma.lang?LangRes.init():LangRes.setLang(Contenedor.datosXML.plataforma.lang),this.drawBackGround(),this.drawHeaderUp(),this.drawHeaderDown()},this.drawBackGround=function(){this.drawFonsGeneral(),this.drawFonsTitol(),this.drawFonsMotor()},this.drawHeaderUp=function(){this.drawPlaneta(),this.drawTitle()},this.drawHeaderDown=function(){this.drawTitleActivity(),this.drawMoreInfo(),this.drawCalculator(),this.drawSeparator(),this.drawClock()},this.drawFooter=function(){if(Contenedor.missatge=new inicialPanell(Contenedor.num_pagines),Contenedor.missatge.validar.bt.on("mousedown",Contenedor.validaHandler),Contenedor.missatge.corregir.bt.on("mousedown",Contenedor.corregirHandler),Contenedor.num_pagines>1){for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}},this.drawFooterExponer=function(){if(Contenedor.missatge=new inicialPanellDisable(Contenedor.num_pagines),Contenedor.num_pagines>1){for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}},this.drawFooterEnviat=function(){if(Contenedor.missatge=new resultatsPanell(Contenedor.num_pagines),Contenedor.num_pagines>1){for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}},this.seguentPaginaHandler=function(t){t.primary&&Contenedor.missatge.seguentPag()&&Motor.ponerPagina(Motor.currentNumPag+2)},this.primeroPaginaHandler=function(t){t.primary&&(Contenedor.missatge.primeroPag(),Motor.ponerPagina(1))},this.selectPagHandler=function(t){t.primary&&(Contenedor.missatge.unselectCurrentPag(),Contenedor.missatge.selectPag(this.index),Motor.ponerPagina(this.num))},this.validaHandler=function(t){if(t.primary&&Scorm.modo==Scorm.MODO_EXAMEN){var e=(Contenedor.getTemps(),Motor.getEstado());aulaPlaneta.SCORM.ejercicio_guardar(e),Contenedor.missatge=new avisPanellGuardat(LangRes.lang[LangRes.MSG_GUARDADOCORRECTO])}},this.cancelHandler=function(t){t.primary&&(Contenedor.drawFooter(),Contenedor.time>0?Motor.activar():""!=Contenedor.datosXML.temps&&"0"!=Contenedor.datosXML.temps&&Scorm.modo!=Scorm.MODO_EXAMEN?Motor.activar():(""==Contenedor.datosXML.temps||"0"==Contenedor.datosXML.temps)&&Motor.activar());
},this.reiniciarHandler=function(t){t.primary&&(clearInterval(Contenedor.timer),Contenedor.time=Contenedor.DEFAULT_TIME,Main.stage.removeChild(Contenedor.titleClock),Main.stage.removeChild(Contenedor.clock),Scorm.modo==Scorm.MODO_EXAMEN&&Contenedor.drawClock(),Contenedor.drawFooter(),Contenedor.reiniciar=!0,Motor.reinicializarEstructuraMotor())},this.corregirHandler=function(t){t.primary&&(clearInterval(Contenedor.timer),Scorm.modo==Scorm.MODO_EXAMEN?(Motor.estaCompletado()?Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_VALIDAR]):Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_VALIDARSINRESPONDER]),Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.validacioResultatsHandler),Contenedor.missatge.cancelar.bt.on("mousedown",Contenedor.cancelCorrectHandler)):Contenedor.validacioResultatsHandler(null),Motor.desactivar())},this.validacioResultatsHandler=function(t){if(null==t||t.primary){var e=(Motor.validar(),""),i="";if(null==t?(i=Contenedor.getTempsRevision(),e=Contenedor.timeRevision,Scorm.modo==Scorm.MODO_REVISAR&&(this.clock.text=e)):(e=Contenedor.getTemps(),i=Contenedor.getTempsUsat()),Scorm.modo==Scorm.MODO_EXAMEN){var n=Motor.getEstado();""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&(n="["+e+"]["+n+"]"),aulaPlaneta.SCORM.ejercicio_evaluar(n,e)}else(Scorm.modo==Scorm.MODO_REVISAR||Scorm.modo==Scorm.MODO_REVISARALUMNO)&&clearInterval(Contenedor.timer);if(Scorm.modo==Scorm.MODO_EXAMEN)Contenedor.missatge=new avisPanellEnviat(LangRes.lang[LangRes.MSG_VALIDADOCORRECTO]),Scorm.modo=Scorm.MODO_EXPONER;else if(this.num_pagines=Motor.numPaginas(),Contenedor.missatge=new resultatsPanell(this.num_pagines),Motor.desactivar(),Contenedor.num_pagines>1){for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}}},this.resultatAceptarHandler=function(t){if(t.primary&&(this.num_pagines=Motor.numPaginas(),Contenedor.missatge=new solucioPanell(this.num_pagines),Contenedor.missatge.solucio.bt.on("mousedown",Contenedor.solucioHandler),(Scorm.modo!=Scorm.MODO_REVISAR||Scorm.modo==Scorm.MODO_REVISARALUMNO)&&Contenedor.missatge.reintentar.bt.on("mousedown",Contenedor.preReiniciarHandler),Contenedor.num_pagines>1)){for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}},this.preReiniciarHandler=function(t){t.primary&&(Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_REINTENTAR_AREVIEW]),Contenedor.missatge.cancelar.bt.on("mousedown",Contenedor.returnSolucioHandler),Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.reiniciarHandler))},this.returnSolucioHandler=function(t){if(t.primary&&(this.num_pagines=Motor.numPaginas(),Contenedor.missatge=new solucioPanell(this.num_pagines),Contenedor.missatge.solucio.bt.on("mousedown",Contenedor.solucioHandler),Contenedor.missatge.reintentar.bt.on("mousedown",Contenedor.preReiniciarHandler),Contenedor.missatge.solucio.bt.visible=!1,Contenedor.num_pagines>1)){for(key in Contenedor.missatge.pagines.pags)Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key]);Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}},this.solucioHandler=function(t){t.primary&&(Contenedor.missatge.solucio.bt.visible=!1,Motor.verSolucion())},this.cancelCorrectHandler=function(t){t.primary&&(Main.stage.removeChild(Contenedor.missatge.contenedor),Contenedor.drawFooter(),Contenedor.time>0?(Contenedor.timer=setInterval(Contenedor.updateClock,1e3),Motor.activar()):""!=Contenedor.datosXML.temps&&"0"!=Contenedor.datosXML.temps&&Scorm.modo!=Scorm.MODO_EXAMEN?Motor.activar():(""==Contenedor.datosXML.temps||"0"==Contenedor.datosXML.temps)&&Motor.activar())},this.deleteHeaderDown=function(){Main.stage.removeChild(this.titleClock),Main.stage.removeChild(this.clock),Main.stage.removeChild(this.separador),Main.stage.removeChild(this.calc),Main.stage.removeChild(this.mesInfo)},this.drawClock=function(){if(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN||""!=Contenedor.timeRevision&&Scorm.modo==Scorm.MODO_REVISAR){if(Contenedor.time=60*Contenedor.datosXML.temps,this.titleClock=new createjs.RichText,this.titleClock.font="bold 10px Arial",this.titleClock.color="#E1001A",this.titleClock.text=LangRes.lang[LangRes.TIEMPORESTANTE],this.titleClock.y=this.CLOCK_TITLE_Y,this.titleClock.x=this.CLOCK_TITLE_X,Main.stage.addChild(this.titleClock),this.clock=new createjs.RichText,this.clock.font="34px Arial",this.clock.color="#E1001A",this.clock.text="00:00",this.clock.y=this.CLOCK_Y,this.clock.x=this.CLOCK_X,Scorm.modo==Scorm.MODO_EXAMEN){var t=Math.floor(Contenedor.time/60),e=Contenedor.time-60*t;t=Utils.lPad(t.toString(),2),e=Utils.lPad(e.toString(),2),this.clock.text=t+":"+e,Contenedor.timer=setInterval(this.updateClock,1e3)}Main.stage.addChild(this.clock)}},this.getTempsRevision=function(){var t=Contenedor.timeRevision.split(":"),e=60*parseInt(t[0])+parseInt(t[1]);if(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0){var i=60*Contenedor.datosXML.temps,n=i-e;if(0>n)return"00:00";var s=Math.floor(n/60),o=n-60*s;return s=Utils.lPad(s.toString(),2),o=Utils.lPad(o.toString(),2),s+":"+o}return"00:00"},this.getTemps=function(){if(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0){var t=Contenedor.time,e=Math.floor(t/60),i=t-60*e;return e=Utils.lPad(e.toString(),2),i=Utils.lPad(i.toString(),2),e+":"+i}return"00:00"},this.getTempsUsat=function(){if(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0){var t=60*Contenedor.datosXML.temps,e=t-Contenedor.time,i=Math.floor(e/60),n=e-60*i;return i=Utils.lPad(i.toString(),2),n=Utils.lPad(n.toString(),2),i+":"+n}return"00:00"},this.updateClock=function(){if(Contenedor.time>0){Contenedor.time--;var t=Math.floor(Contenedor.time/60),e=Contenedor.time-60*t;t=Utils.lPad(t.toString(),2),e=Utils.lPad(e.toString(),2),Contenedor.clock.text=t+":"+e}else clearInterval(Contenedor.timer),""!=Contenedor.missatge&&(Main.stage.removeChild(Contenedor.missatge.contenedor),Contenedor.missatge=""),Contenedor.missatge=new confirmaPanell(LangRes.lang[LangRes.MSG_AGOTADOTIEMPO]),Contenedor.missatge.reiniciar.bt.on("mousedown",Contenedor.reiniciarHandler),Contenedor.missatge.corregir.bt.on("mousedown",Contenedor.corregirHandler),Motor.desactivar()},this.drawWarning=function(){Contenedor.missatge=new avisPanell(LangRes.lang[LangRes.MSG_BROWSEMODE]),Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.exponerHandler)},this.exponerHandler=function(t){t.primary&&(Main.stage.removeChild(Contenedor.missatge.contenedor),Contenedor.drawFooterExponer())},this.drawSeparator=function(){(""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN||""!=Contenedor.timeRevision&&Scorm.modo==Scorm.MODO_REVISAR)&&(this.separador=new createjs.Shape,this.separador.graphics.beginStroke("#C5C6C8").setStrokeStyle(1),this.separador.graphics.moveTo(this.SEPARATOR_X,this.SEPARATOR_Y),this.separador.graphics.lineTo(this.SEPARATOR_X,this.SEPARATOR_Y+this.SEPARATOR_HEIGHT),this.separador.graphics.endStroke(),Main.stage.addChild(this.separador))},this.drawCalculator=function(){if("1"==this.datosXML.calc){var t=new Image;t.src=pppPreloader.from("module","motor/images/calculadora.png"),t.name="calc",this.calc=new createjs.Bitmap(t),""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN||""!=Contenedor.timeRevision&&Scorm.modo==Scorm.MODO_REVISAR?(this.calc.x=this.CALC_X1+4,this.calc.y=this.CALC_Y+2):(this.calc.x=this.CALC_X2+4,this.calc.y=this.CALC_Y+2),this.calc.scaleX=.7,this.calc.scaleY=.7,this.calc.on("mousedown",this.calcHandler),this.calc.on("mouseover",function(){document.body.style.cursor="pointer"},this),this.calc.on("mouseout",function(){document.body.style.cursor="default"},this),Main.stage.addChild(this.calc),this.calcContenedor=new createjs.Container,this.calculadora=new createjs.DOMElementCustom("calculator",this.calcContenedor),1==Contenedor.datosXML.plataforma.grado?(this.calculadora.element_x=1600,this.calculadora.element_y=150,this.calculadora.element_width=245,this.calculadora.element_height=250,this.calculadora.x=this.calculadora.element_x,this.calculadora.y=this.calculadora.element_y,$(this.calculadora.htmlElement).css("width",230),$(this.calculadora.htmlElement).css("height",225)):(this.calculadora.element_x=1600,this.calculadora.element_y=150,this.calculadora.element_width=425,this.calculadora.element_height=345,this.calculadora.x=this.calculadora.element_x,this.calculadora.y=this.calculadora.element_y,$(this.calculadora.htmlElement).css("width",425),$(this.calculadora.htmlElement).css("height",345)),$(Contenedor.calculadora.htmlElement).css("display","none"),this.calcContenedor.addChild(this.calculadora),Main.stage.addChild(this.calcContenedor)}else this.calculadora=new createjs.DOMElementCustom("calculator",this.calcContenedor),$(this.calculadora.htmlElement).css("display","none")},this.calcHandler=function(t){if(t.primary)if(1600==Contenedor.calculadora.element_x){$(Contenedor.calculadora.htmlElement).css("display","inline");var e=$("#wrapper").css("line-height").substring(0,$("#stage").css("line-height").lastIndexOf("px")),i=0;e>$("#stage").attr("height")&&(i=(e-$("#stage").attr("height"))/2/Main.scale),window.innerHeight>1e3?$(Contenedor.calculadora.htmlElement).css("top",(window.innerHeight-$("#stage").attr("height"))/2+i):$(Contenedor.calculadora.htmlElement).css("top",i),$(Contenedor.calculadora.htmlElement).css("left",0),createjs.Tween.get(Contenedor.calculadora).to({element_x:500,element_y:150},1250,createjs.Ease.circOut)}else $(Contenedor.calculadora.htmlElement).css("display","none"),Contenedor.calculadora.element_x=1600,Contenedor.calculadora.element_y=150,createjs.Tween.removeTweens(Contenedor.calculadora)},this.closeHandler=function(){$(Contenedor.calculadora.htmlElement).css("display","none"),Contenedor.calculadora.element_x=1600,Contenedor.calculadora.element_y=150,createjs.Tween.removeTweens(Contenedor.calculadora)},this.drawMoreInfo=function(){if(""!=this.datosXML.masinfo.text){var t=new Image;t.src=pppPreloader.from("module","motor/images/mesInfo.png"),t.name="tancar";var e={images:[t],frames:{width:this.MOREINFO_SIZE,height:this.MOREINFO_SIZE},animations:{normal:[0],hover:[1]}},i=new createjs.SpriteSheet(e);this.mesInfo=new createjs.Sprite(i),this.mesInfo.on("mouseover",function(t){this.gotoAndStop("hover")}),this.mesInfo.on("mouseout",function(t){this.gotoAndStop("normal")}),this.mesInfo.on("mousedown",this.masInfoHandler),""!=Contenedor.datosXML.temps&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN||""!=Contenedor.timeRevision&&Scorm.modo==Scorm.MODO_REVISAR?(this.mesInfo.x=this.MOREINFO_X1,this.mesInfo.y=this.MOREINFO_Y):(this.mesInfo.x=this.MOREINFO_X2,this.mesInfo.y=this.MOREINFO_Y),this.mesInfo.gotoAndStop("normal"),Main.stage.addChild(this.mesInfo),this.mesInfo.on("mouseover",function(){document.body.style.cursor="pointer"},this),this.mesInfo.on("mouseout",function(){document.body.style.cursor="default"},this),"1"==this.datosXML.masinfo.inicio&&setTimeout(function(){Contenedor.masInfoHandler(null)},500),$("#input_moreInfo").length||(texto=Utils.cleanText(Contenedor.datosXML.masinfo.text),this.$inputText=$('<div id="input_moreInfo" style="display:none;"><span class="spanMoreInfo">'+texto+"</span></div>"),this.$inputText.focusout(function(t){$("body").focus()}),$("#mediaHolder").append(this.$inputText))}},this.masInfoHandler=function(t){(null==t||t.primary)&&""==Contenedor.moreinfopanel&&(Contenedor.moreinfopanel=new moreInfoPanell(Contenedor.datosXML.masinfo.text),$(Contenedor.$inputText).css("display","inline"),Contenedor.moreinfopanel.contenedor.on("mousedown",Contenedor.tancarMasInfoHandler),Main.stage.setChildIndex(Contenedor.moreinfopanel.contenedor,Main.stage.getNumChildren()),Motor.hideDomObjects())},this.tancarMasInfoHandler=function(t){t.primary&&(Main.stage.removeChild(Contenedor.moreinfopanel.contenedor),$(Contenedor.$inputText).css("display","none"),Contenedor.moreinfopanel="",Motor.showDomObjects())},this.drawTitleActivity=function(){this.title_exercici=new createjs.RichText,this.title_exercici.font=1==Contenedor.datosXML.plataforma.grado?"20px Arial":"18px Arial",this.title_exercici.color="#0D3158",this.title_exercici.fontSize=20,this.title_exercici.text=Contenedor.datosXML.enunciado,this.title_exercici.y=this.TITLE_ACT_Y,this.title_exercici.x=this.TITLE_ACT_X,this.title_exercici.lineWidth=this.TITLE_ACT_W,this.title_exercici.lineHeight=this.TITLE_ACT_H,this.title_exercici.mask=new createjs.Shape,this.title_exercici.mask.graphics.beginFill("#fff").drawRect(0,0,this.TITLE_ACT_W,50),this.title_exercici.mask.y=this.TITLE_ACT_Y-1,this.title_exercici.mask.x=this.TITLE_ACT_X,Main.stage.addChild(this.title_exercici)},this.drawTancar=function(){var t=new Image;t.src=pppPreloader.from("module","motor/images/tancar.png"),t.name="tancar",this.tancar=new createjs.Bitmap(t),this.tancar.x=this.TANCAR_X,this.tancar.y=this.TANCAR_Y,this.tancar.on("mousedown",this.tancarGHandler),this.tancar.on("mouseover",function(){document.body.style.cursor="pointer"},this),this.tancar.on("mouseout",function(){document.body.style.cursor="default"},this),Main.stage.addChild(this.tancar)},this.tancarGHandler=function(t){aulaPlaneta.SCORM.ejercicio_cerrar()},this.drawTitle=function(){this.title_motor=new createjs.RichText,this.title_motor.font="15px Arial",this.title_motor.color="#fff",this.title_motor.text=Contenedor.datosXML.plataforma.titulo,this.title_motor.y=this.TITLE_MOTOR_Y,this.title_motor.x=this.TITLE_MOTOR_X,Main.stage.addChild(this.title_motor)},this.drawPlaneta=function(){this.title_planeta_1=new createjs.RichText,this.title_planeta_1.font="22px Arial",this.title_planeta_1.color="#fff",this.title_planeta_1.text="aula",this.title_planeta_1.y=this.PLANETA_Y,this.title_planeta_1.x=this.PLANETA_X,Main.stage.addChild(this.title_planeta_1),this.title_planeta_2=new createjs.RichText,this.title_planeta_2.font="22px Arial",this.title_planeta_2.color="#009ee0",this.title_planeta_2.text="Planeta",this.title_planeta_2.y=this.PLANETA_Y,this.title_planeta_2.x=this.PLANETA_X2,Main.stage.addChild(this.title_planeta_2);var t=new Image;t.src=pppPreloader.from("module","motor/images/planeta.png"),t.name="logo",this.logo_planeta=new createjs.Bitmap(t),this.logo_planeta.x=this.LOGO_PLANETA_X,this.logo_planeta.y=this.LOGO_PLANETA_Y,this.logo_planeta.scaleX=this.LOGO_PLANETA_SCALE,this.logo_planeta.scaleY=this.LOGO_PLANETA_SCALE,Main.stage.addChild(this.logo_planeta)},this.drawFonsTitol=function(){this.fonsTitol=new createjs.Shape,this.fonsTitol.graphics.beginFill("#fff").drawRect(0,0,Main.stage_width,this.FONS_TITLE_HEIGHT),this.fonsTitol.x=0,this.fonsTitol.y=this.FONS_TITLE_Y,Main.stage.addChild(this.fonsTitol)},this.drawFonsGeneral=function(){this.fonsGeneral=new createjs.Shape,this.fonsGeneral.graphics.beginFill("#0D3158").drawRoundRect(0,0,Main.stage_width,Main.stage_height,10),this.fonsGeneral.x=0,this.fonsGeneral.y=0,Main.stage.addChild(this.fonsGeneral)},this.checkPagina=function(){Contenedor.missatge.checkedCurrentPag()},this.drawFonsMotor=function(){this.fons=new createjs.Shape,this.fons.graphics.beginFill("#fde8c2").drawRect(0,0,Main.stage_width,this.FONS_MOTOR_H),this.fons.x=0,this.fons.y=this.MOTOR_Y,Main.stage.addChild(this.fons)}},CorrectorTexto=new function(){this.MODO_CI=1,this.MODO_NOENDPUNCT=2,this.MODO_NOPUNCT=4,this.MODO_OLDESTRICTO_ON=8,this.MODO_OLDESTRICTO_OFF=16,this.trimBeginEnd=function(t){for(var e=0;t.charCodeAt(e)<33;e++);for(var i=t.length-1;t.charCodeAt(i)<33;i--);return t.substring(e,i+1)},this.charIsPunct=function(t,e){return 46==t.charCodeAt(e)||44==t.charCodeAt(e)||45==t.charCodeAt(e)||58==t.charCodeAt(e)||59==t.charCodeAt(e)||33==t.charCodeAt(e)||161==t.charCodeAt(e)||191==t.charCodeAt(e)||63==t.charCodeAt(e)||34==t.charCodeAt(e)?!0:!1},this.charIsSpace=function(t,e){return t.charCodeAt(e)<33},this.trimAllSpaces=function(t){for(var e=256,i="",n=0;n<t.length;n++)t.charCodeAt(n)<33?e>=33&&(i+=" ",e=32):(i+=t.substring(n,n+1),e=t.charCodeAt(n));return this.trimBeginEnd(i)},this.trimAllPunct=function(t){for(var e="",i=0;i<t.length;i++)e+=this.charIsPunct(t,i)?" ":t.substring(i,i+1);return e},this.trimEndPunct=function(t){for(var e=t.length-1,i="";this.charIsPunct(t,e)||t.charCodeAt(e)<33;)e--,i+=" ";return t.substring(0,e+1)+i},this.addSpacesToPunct=function(t){for(var e="",i=0;i<t.length;i++)this.charIsPunct(t,i)&&(e+=" "),e+=t.substring(i,i+1),this.charIsPunct(t,i)&&(e+=" ");return e},this.replace=function(t){var e=Str.split(searchStr);return e.join(replaceStr)},this.replace=function(t){var e=Str.split(searchStr);return e.join(replaceStr)},this.esValido=function(t,e,i){return t=this.addSpacesToPunct(t),e=this.addSpacesToPunct(e),i&this.MODO_CI&&(t=t.toUpperCase(),e=e.toUpperCase()),i&this.MODO_NOPUNCT&&(t=this.trimAllPunct(t),e=this.trimAllPunct(e)),i&this.MODO_NOENDPUNCT&&(t=this.trimEndPunct(t),e=this.trimEndPunct(e)),t=this.trimAllSpaces(t),e=this.trimAllSpaces(e),t==e?!0:!1},this.TOKEN_NONE=0,this.TOKEN_WORD=1,this.TOKEN_PUNCT=2,this.TOKEN_WHITESPACE=3,this.createToken=function(t,e,i,n){var s=new Object;return s.value=t,s.type=e,s.iniPos=i,s.endPos=n,s.otherIndex=-1,s},this.stringToTokens=function(t){for(var e=new Array,i=0,n=0,s=this.TOKEN_NONE,o="";n<t.length;)this.charIsPunct(t,n)?(s!=this.TOKEN_NONE&s!=this.TOKEN_PUNCT&&(e.push(this.createToken(o,s,i,n)),i=n,o=""),s=this.TOKEN_PUNCT,o+=t.charAt(n)):this.charIsSpace(t,n)?(s!=this.TOKEN_NONE&s!=this.TOKEN_WHITESPACE&&(e.push(this.createToken(o,s,i,n)),i=n,o=""),s=this.TOKEN_WHITESPACE,o+=t.charAt(n)):(s!=this.TOKEN_NONE&s!=this.TOKEN_WORD&&(e.push(this.createToken(o,s,i,n)),i=n,o=""),s=this.TOKEN_WORD,o+=t.charAt(n)),n++;return s!=this.TOKEN_NONE&&e.push(this.createToken(o,s,i,n)),e},this.traceTokens=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];console.log(t+"["+i+"] = {'"+n.value+"', "+n.type+", "+n.iniPos+", "+n.endPos+"} -> "+n.otherIndex+" ["+n.ok+"]")}},this.searchForToken=function(t,e,i){if(i>=t.length||""==e)return-1;for(var n=i;n<t.length;n++){var s=t[n];if((s.type==this.TOKEN_WORD||s.type==this.TOKEN_PUNCT)&&s.value==e)return n}return-1},this.annotateTokens=function(t,e){for(var i=0,n=0;n<e.length;n++){var s=e[n];s.otherIndex=this.searchForToken(t,s.value,i),-1!=s.otherIndex&&(i=s.otherIndex)}},this.correctTokens=function(t,e){this.annotateTokens(t,e);for(var i=0;i<e.length;i++){var n=e[i];n.type==this.TOKEN_WHITESPACE?n.ok=!0:-1!=n.otherIndex?n.ok=!0:n.ok=!1}},this.setCharAt=function(t,e,i){return t.substr(0,i)+e+t.substr(i+1)},this.tokensToTaggedString=function(t,e,i,n){for(var s="",o=0;o<t.length;o++){var a=t[o],r=e.substring(a.iniPos,a.endPos);s+=1==a.ok?r:i+r+n}return s},this.taggedContestacion=function(t,e,i,n,s){var o=e;i&this.MODO_CI&&(t=t.toUpperCase(),e=e.toUpperCase()),i&this.MODO_NOPUNCT&&(t=this.trimAllPunct(t),e=this.trimAllPunct(e)),i&this.MODO_NOENDPUNCT&&(t=this.trimEndPunct(t),e=this.trimEndPunct(e));var a=CorrectorTexto.stringToTokens(t),r=CorrectorTexto.stringToTokens(e);return this.correctTokens(a,r),this.tokensToTaggedString(r,o,n,s)}},this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.parent=e,this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.parent=!1,e.grandParent=!1,e.element_x=0,e.element_x=0,e.element_width=0,e.element_height=0,e.fontsize=0,e.htmlElement=null,e._oldMtx=null,e._visible=!1,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){"string"==typeof t&&(t=document.getElementById(t)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=t;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%"},e.isVisible=function(){return null!=this.htmlElement},e.draw=function(t,e){return this.visible&&(this._visible=!0),!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElementCustom cannot be cloned."},e.toString=function(){return"[DOMElementCustom (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){var e=this.getStage();this._visible=!1,e&&e.on("drawstart",this._reSizePosition,this,!0),e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(t){var e=this.htmlElement;if(e){var i=e.style,n=this._visible?"visible":"hidden";if(n!=i.visibility&&(i.visibility=n),this._visible){var s=this.getConcatenatedMatrix(this._matrix),o=this._oldMtx,a=1e4;if(o&&o.alpha==s.alpha||(i.opacity=""+(s.alpha*a|0)/a,o&&(o.alpha=s.alpha)),!o||o.tx!=s.tx||o.ty!=s.ty||o.a!=s.a||o.b!=s.b||o.c!=s.c||o.d!=s.d){var r="matrix("+(s.a*a|0)/a+","+(s.b*a|0)/a+","+(s.c*a|0)/a+","+(s.d*a|0)/a+","+(s.tx+.5|0);i.transform=i.WebkitTransform=i.OTransform=i.msTransform=r+","+(s.ty+.5|0)+")",i.MozTransform=r+"px,"+(s.ty+.5|0)+"px)",this._oldMtx=o?o.copy(s):s.clone()}}}},e._reSizePosition=function(){var t=$("#stage"),e=t.attr("height"),i=t.attr("width"),n=$("#wrapper").css("line-height").substring(0,t.css("line-height").lastIndexOf("px")),s=0;n>e&&"calculator"!=this.htmlElement.id&&(s=(n-e)/2/Main.scale),this.grandParent?(this.x=(this.grandParent.x+this.parent.x+this.element_x/Main.scale)*Main.scale-this.parent.x*Main.scale-this.grandParent.x*Main.scale,this.y=(this.grandParent.y+this.parent.y+this.element_y/Main.scale)*Main.scale+s-this.parent.y*Main.scale-this.grandParent.y*Main.scale):(this.x=(this.parent.x+this.element_x/Main.scale)*Main.scale-this.parent.x*Main.scale,this.y=(this.parent.y+this.element_y/Main.scale)*Main.scale+s-this.parent.y*Main.scale),$(this.htmlElement).css("height",this.element_height/Main.scale*e/Main.stage_height),$(this.htmlElement).css("width",this.element_width/Main.scale*i/Main.stage_width),"calculator"!=this.htmlElement.id&&(window.innerHeight>1e3?$(this.htmlElement).css("top",(window.innerHeight-e)/2):$(this.htmlElement).css("top",0)),$(this.htmlElement).css("font-size",Math.round(this.fontsize/Main.scale*i/Main.stage_width))},createjs.DOMElementCustom=t}(),LangRes=new function(){this.lang=new Array,this.curLang="",this.REINTENTAR=0,this.SOLUCION=1,this.CORREGIR=2,this.SIGUIENTE=3,this.PRIMERO=4,this.GUARDAR=5,this.ENVIAR=6,this.TIEMPORESTANTE=7,this.MASINFORMACION=8,this.RESULTADO=9,this.RESPCORRECTAS=10,this.RESPCORRECTAS_DE=11,this.PUNTUACION=12,this.TIEMPOEMPLEADO=13,this.CONTINUAR=14,this.REINICIAR=15,this.ACEPTAR=16,this.CANCELAR=17,this.ABOUT=18,this.MSG_AGOTADOTIEMPO=19,this.MSG_REINTENTAR=20,this.MSG_VALIDAR=21,this.MSG_VALIDARSINRESPONDER=22,this.MSG_VALIDAR_NE=23,this.MSG_VALIDARSINRESPONDER_NE=24,this.MSG_DOWNMESSAGE=25,this.MSG_GUARDADOCORRECTO=26,this.MSG_VALIDADOCORRECTO=27,this.MSG_BROWSEMODE=28,this.init=function(){this.curLang="es",this.lang=this.lang_es},this.setLang=function(t){this.curLang=t,"en"==t?this.lang=this.lang_en:"val"==t?this.lang=this.lang_val:"gal"==t?this.lang=this.lang_gal:"cat"==t?this.lang=this.lang_cat:"eus"==t?this.lang=this.lang_eus:(this.curLang="es",this.lang=this.lang_es)},this.lang_es=["Reintentar","Solución","Corregir","Siguiente","Primero","Guardar","Enviar","TIEMPO RESTANTE","Más información","Resultado","Respuestas correctas:","de","Puntuación:","Tiempo empleado:","Continuar","Reiniciar","Aceptar","Cancelar","Ejercicio xxxx versión xxxx","Has agotado el tiempo. Si continúas, se almacenará la nota del ejercicio. Si reinicias, empezarás el ejercicio de nuevo.","¡Atención! Si reintentas, empezarás el ejercicio de nuevo.","Si continúas, se almacenará la nota del ejercicio. Si quieres hacer alguna modificación, haz clic en Cancelar.","Hay preguntas sin responder. Si continúas, se almacenará la nota del ejercicio. Si quieres hacer alguna modificación, haz clic en Cancelar.","Si continúas, se enviará al profesor el ejercicio para evaluar. Si quieres hacer alguna modificación, haz clic en Cancelar.","Hay preguntas sin responder. Si continúas, se enviará al profesor el ejercicio para evaluar. Si quieres hacer alguna modificación, haz clic en Cancelar.","Entrega las respuestas en mano o por email.","Ejercicio guardado correctamente","Ejercicio enviado para validación","Esta actividad debe asignarse como tarea para poderse realizar, o bien entregarse en mano o por email."],this.lang_val=["Reintenta","Solució","Corregeix","Següent","Primer","Guarda","Envia","TEMPS RESTANT","Més informació","Resultat","Respostes correctes:","de","Puntuació:","Temps emprat:","Continua","Reinicia","D'acord","Cancel·la","Exercici xxxx versió xxxx","Has esgotat el temps. Si continues, s'emmagatzemarà la nota de l'exercici. Si reinicies, tornaràs a començar l'exercici.","Atenció! Si reintentes, tornaràs a començar l'exercici.","Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic en Cancel·la.","Hi ha preguntes sense contestar. Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic en Cancel·la.","Si continues, s'enviarà al professor l'exercici per avaluar. Si vols fer alguna modificació, fes clic en Cancel·la.","Hi ha preguntes sense contestar. Si continues, s'enviarà al professor l'exercici per avaluar. Si vols fer alguna modificació, fes clic en Cancel·la.","Lliura les respostes en mà o per correu electrònic.","L'exercici s'ha guardat correctament","L'exercici s'ha enviat per a validar-lo","Aquesta activitat ha d'assignar-se com a tasca per a poder fer-la, o bé lliurar-la en mà o per correu electrònic."],this.lang_cat=["Reintenta","Solució","Corregeix","Següent","Primer","Guarda","Envia","TEMPS RESTANT","Més informació","Resultat","Respostes correctes:","de","Puntuació:","Temps emprat:","Continua","Reinicia","D'acord","Cancel·la","Exercici xxxx versió xxxx","Has esgotat el temps. Si continues, s'emmagatzemarà la nota de l'exercici. Si reinicies, tornaràs a començar l'exercici.","Atenció! Si reintentes, tornaràs a començar l'exercici.","Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic a Cancel·la.","Hi ha preguntes sense contestar. Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic a Cancel·la.","Si continues, s'enviarà al professor l'exercici per avaluar. Si vols fer alguna modificació, fes clic a Cancel·la.","Hi ha preguntes sense contestar. Si continues, s'enviarà al professor l'exercici per avaluar. Si vols fer alguna modificació, fes clic a Cancel·la.","Entrega les respostes en mà o per correu electrònic.","L'exercici s'ha guardat correctament","L'exercici s'ha enviat a validar","Aquesta activitat s'ha d'assignar com a tasca per poder fer-la, o bé entregar-la en mà o per correu electrònic."],this.lang_gal=["Tentar de novo","Solución","Corrixir","Seguinte","Primeiro","Gardar","Enviar","TEMPO RESTANTE","Máis información","Resultado","Respostas correctas:","de","Puntuación:","Tempo empregado:","Continuar","Reiniciar","Aceptar","Cancelar","Exercicio xxxx versión xxxx","Esgotaches o tempo. Se continúas, almacenarase a nota do exercicio. Se reinicias, empezarás o exercicio de novo.","Atención! Se o volves tentar, empezarás o exercicio de novo.","Se continúas, almacenarase a nota do exercicio. Se queres facer algunha modificación, fai clic en Cancelar.","Hai preguntas sen responder. Se continúas, almacenarase a nota do exercicio. Se queres facer algunha modificación, fai clic en Cancelar.","Se continúas, enviarase ao profesor o exercicio para avaliar. Se queres facer algunha modificación, fai clic en Cancelar.","Hai preguntas sen responder. Se continúas, enviarase ao profesor o exercicio para avaliar. Se queres facer algunha modificación, fai clic en Cancelar.","Entrega as respostas en man ou por correo electrónico.","Exercicio gardado correctamente","Exercicio enviado para validar","Esta actividade debe asignarse como tarefa para que se poida realizar, ou ben entregarse en man ou por correo electrónico."],this.lang_en=["Retry","Answer","Correct exercise","Next","First","Save","Send","TIME REMAINING","More information","Score","Correct answers:","of","Score:","Time taken:","Continue","Restart","OK","Cancel","Exercise xxxx version xxxx","You have run out of time. If you continue, your score will be saved. If you restart, you'll begin the exercise again.","Watch out! If you restart, you'll begin the exercise again.","If you continue, your exercise score will be saved. If you want to make any changes, click Cancel.","Some questions have not been answered. If you continue, your exercise score will be saved. In case you want to make any changes, click Cancel.","If you continue, your exercise will be sent to the teacher for evaluation. If you want to make any changes, click Cancel.","Some questions have not been answered. If you continue, your exercise will be sent to the teacher for evaluation. To make any changes, click Cancel.","Hand in to your teacher directly or by email.","Exercise successfully saved.","Exercise successfully sent for evaluation.","To answer here, the activity should be assigned as a task before (Asignar Tarea). If necessary, hand in to your teacher directly or by email."],this.lang_eus=["Saiatu berriro","Erantzuna","Zuzendu ariketa","Hurrengoa","Aurrena","Gorde","Bidali","GELDITZEN DEN DENBORA","Informazio gehiago","Emaitza","Erantzun zuzenak:","/","Puntuazioa:","Erabilitako denbora:","Jarraitu","Berrabiarazi","Ados","Utzi","xxxx ariketa, xxxx bertsioa","Denbora agortu zaizu. Jarraituz gero, puntuazioa gordeko da. Berrabiaraziz gero, berriro hasiko duzu ariketa.","Kontuz! Berrabiaraziz gero, berriro hasiko duzu ariketa.","Jarraituz gero, ariketaren puntuazioa gordeko da. Aldaketarik egin nahi izanez gero, sakatu Utzi.","Ez zaie galdera batzuei erantzun. Jarraituz gero, ariketaren puntuazioa gordeko da. Aldaketarik egin nahi izanez gero, sakatu Utzi.","Jarraituz gero, irakasleari bidaliko zaio ariketa, berrikus dezan. Aldaketarik egin nahi izanez gero, sakatu Utzi.","Ez zaie galdera batzuei erantzun. Jarraituz gero, irakasleari bidaliko zaio ariketa, berrikus dezan. Aldaketarik egin nahi izanez gero, sakatu Utzi.","Entregatu zuzenean irakasleari edo bidali posta elektronikoz.","Ariketa behar bezala gorde da.","Ariketa behar bezala bidali da irakasleak berrikus dezan.","Erantzun ahal izateko, jarduerari zeregin bat esleitu behar zaio. Behar izanez gero, entregatu zuzenean irakasleari edo bidali posta elektronikoz."]},Main=new function(){this.stage="",this.navegador="",this.mobil="",this.stage_width=950,this.stage_height=608,this.scale=1,this.text_Y=0,this.text_X=0,this.refresh=function(t){Main.stage.update()},this.setFocus=function(t){Main.input=t},this.init=function(){this.stage=new createjs.Stage("stage"),this.navegador=Main.detectBrowser(),this.mobil=Main.detectDevice();var t=this.stage.canvas,e=t.getContext("2d"),i=this,n=!1,s=setInterval(function(){n&&(clearInterval(s),i.continueInit());try{e.measureText("MEASURE ME"),n=!0}catch(t){}},100)},this.continueInit=function(){createjs.Touch.enable(this.stage),this.stage.enableMouseOver(),Scorm.init(aulaPlaneta.SCORM.initialize()),Contenedor.cargarDatos(),createjs.Ticker.addEventListener("tick",this.refresh),Main.windowResize(),setTimeout(Main.windowResize,100),this.stage.update()},this.switchBrowser=function(){var t=this.navegador.split(" ")[0];switch(t){case"Firefox":break;case"IE":break;case"Chrome":break;case"Safari":}},this.detectBrowser=function(){var t,e=navigator.userAgent,i=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],
"IE "+(t[1]||"")):"Chrome"===i[1]&&(t=e.match(/\bOPR\/(\d+)/),null!=t)?"Opera "+t[1]:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),i.join(" "))},this.detectDevice=function(){return navigator.userAgent.match(/Android/i)?"Android":navigator.userAgent.match(/webOS/i)?"webOS":navigator.userAgent.match(/iPhone/i)?"iPhone":navigator.userAgent.match(/iPad/i)?"iPad":navigator.userAgent.match(/iPod/i)?"iPod":navigator.userAgent.match(/BlackBerry/i)?"BlackBerry":navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/iemobile/i)||navigator.userAgent.match(/windows mobile/i)?"Windows":navigator.userAgent.match(/Tablet/i)?"Tablet":"PC"},this.windowResize=function(){var t=Main.navegador.split(" ").indexOf("IE"),e=Main.mobil;if(t>-1&&"Tablet"==e)var i=window.outerHeight,n=window.outerWidth;else var i=window.innerHeight,n=window.innerWidth;var s=window.innerHeight,o=Main.stage_width,a=Main.stage_height;Main.scale=Math.min(n/o,i/a),Main.stage.scaleX=Main.scale,Main.stage.scaleY=Main.scale,Main.stage.canvas.width=o*Main.scale,Main.stage.canvas.height=a*Main.scale,$("#wrapper").css("line-height",s+"px")}},window.addEventListener("resize",Main.windowResize,!1);