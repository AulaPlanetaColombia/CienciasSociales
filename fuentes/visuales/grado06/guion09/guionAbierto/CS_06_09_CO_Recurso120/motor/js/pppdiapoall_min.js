/* VERSION : 15.11.26.1 */ 
this.createjs=this.createjs||{};(function(){var a=function(){};var b=a.prototype;a.initialize=function(c){c.addEventListener=b.addEventListener;c.on=b.on;c.removeEventListener=c.off=b.removeEventListener;c.removeAllEventListeners=b.removeAllEventListeners;c.hasEventListener=b.hasEventListener;c.dispatchEvent=b.dispatchEvent;c._dispatchEvent=b._dispatchEvent;c.willTrigger=b.willTrigger};b._listeners=null;b._captureListeners=null;b.initialize=function(){};b.addEventListener=function(f,g,d){var e;if(d){e=this._captureListeners=this._captureListeners||{}}else{e=this._listeners=this._listeners||{}}var c=e[f];if(c){this.removeEventListener(f,g,d)}c=e[f];if(!c){e[f]=[g]}else{c.push(g)}return g};b.on=function(f,h,e,d,g,c){if(h.handleEvent){e=e||h;h=h.handleEvent}e=e||this;return this.addEventListener(f,function(i){h.call(e,i,g);d&&i.remove()},c)};b.removeEventListener=function(h,j,d){var g=d?this._captureListeners:this._listeners;if(!g){return}var c=g[h];if(!c){return}for(var f=0,e=c.length;f<e;f++){if(c[f]==j){if(e==1){delete (g[h])}else{c.splice(f,1)}break}}};b.off=b.removeEventListener;b.removeAllEventListeners=function(c){if(!c){this._listeners=this._captureListeners=null}else{if(this._listeners){delete (this._listeners[c])}if(this._captureListeners){delete (this._captureListeners[c])}}};b.dispatchEvent=function(h,m){if(typeof h=="string"){var f=this._listeners;if(!f||!f[h]){return false}h=new createjs.Event(h)}try{h.target=m||this}catch(k){}if(!h.bubbles||!this.parent){this._dispatchEvent(h,2)}else{var j=this,g=[j];while(j.parent){g.push(j=j.parent)}var d,c=g.length;for(d=c-1;d>=0&&!h.propagationStopped;d--){g[d]._dispatchEvent(h,1+(d==0))}for(d=1;d<c&&!h.propagationStopped;d++){g[d]._dispatchEvent(h,3)}}return h.defaultPrevented};b.hasEventListener=function(e){var d=this._listeners,c=this._captureListeners;return !!((d&&d[e])||(c&&c[e]))};b.willTrigger=function(c){var d=this;while(d){if(d.hasEventListener(c)){return true}d=d.parent}return false};b.toString=function(){return"[EventDispatcher]"};b._dispatchEvent=function(j,f){var d,h=(f==1)?this._captureListeners:this._listeners;if(j&&h){var c=h[j.type];if(!c||!(d=c.length)){return}try{j.currentTarget=this}catch(k){}try{j.eventPhase=f}catch(k){}j.removed=false;c=c.slice();for(var g=0;g<d&&!j.immediatePropagationStopped;g++){var m=c[g];if(m.handleEvent){m.handleEvent(j)}else{m(j)}if(j.removed){this.off(j.type,m,f==1);j.removed=false}}}};createjs.EventDispatcher=a}());this.createjs=this.createjs||{};(function(){var b=function(e,d,c){this.initialize(e,d,c)};var a=b.prototype=new createjs.EventDispatcher();b.NONE=0;b.LOOP=1;b.REVERSE=2;b.IGNORE={};b._tweens=[];b._plugins={};b.get=function(f,e,c,d){if(d){b.removeTweens(f)}return new b(f,e,c)};b.tick=function(g,e){var f=b._tweens.slice();for(var d=f.length-1;d>=0;d--){var c=f[d];if((e&&!c.ignoreGlobalPause)||c._paused){continue}c.tick(c._useTicks?1:g)}};b.handleEvent=function(c){if(c.type=="tick"){this.tick(c.delta,c.paused)}};b.removeTweens=function(f){if(!f.tweenjs_count){return}var e=b._tweens;for(var d=e.length-1;d>=0;d--){var c=e[d];if(c._target==f){c._paused=true;e.splice(d,1)}}f.tweenjs_count=0};b.removeAllTweens=function(){var f=b._tweens;for(var e=0,c=f.length;e<c;e++){var d=f[e];d._paused=true;d.target.tweenjs_count=0}f.length=0};b.hasActiveTweens=function(c){if(c){return c.tweenjs_count}return b._tweens&&!!b._tweens.length};b.installPlugin=function(m,o){var q=m.priority;if(q==null){m.priority=q=0}for(var h=0,e=o.length,c=b._plugins;h<e;h++){var d=o[h];if(!c[d]){c[d]=[m]}else{var k=c[d];for(var f=0,g=k.length;f<g;f++){if(q<k[f].priority){break}}c[d].splice(f,0,m)}}};b._register=function(d,e){var g=d._target;var f=b._tweens;if(e){if(g){g.tweenjs_count=g.tweenjs_count?g.tweenjs_count+1:1}f.push(d);if(!b._inited&&createjs.Ticker){createjs.Ticker.addEventListener("tick",b);b._inited=true}}else{if(g){g.tweenjs_count--}var c=f.length;while(c--){if(f[c]==d){f.splice(c,1);return}}}};a.ignoreGlobalPause=false;a.loop=false;a.duration=0;a.pluginData=null;a.target=null;a.position=null;a.passive=false;a._paused=false;a._curQueueProps=null;a._initQueueProps=null;a._steps=null;a._actions=null;a._prevPosition=0;a._stepPosition=0;a._prevPos=-1;a._target=null;a._useTicks=false;a._inited=false;a.initialize=function(e,d,c){this.target=this._target=e;if(d){this._useTicks=d.useTicks;this.ignoreGlobalPause=d.ignoreGlobalPause;this.loop=d.loop;d.onChange&&this.addEventListener("change",d.onChange);if(d.override){b.removeTweens(e)}}this.pluginData=c||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];if(d&&d.paused){this._paused=true}else{b._register(this,true)}if(d&&d.position!=null){this.setPosition(d.position,b.NONE)}};a.wait=function(d,c){if(d==null||d<=0){return this}var e=this._cloneProps(this._curQueueProps);return this._addStep({d:d,p0:e,e:this._linearEase,p1:e,v:c})};a.to=function(c,d,e){if(isNaN(d)||d<0){d=0}return this._addStep({d:d||0,p0:this._cloneProps(this._curQueueProps),e:e,p1:this._cloneProps(this._appendQueueProps(c))})};a.call=function(e,d,c){return this._addAction({f:e,p:d?d:[this],o:c?c:this._target})};a.set=function(c,d){return this._addAction({f:this._set,o:this,p:[c,d?d:this._target]})};a.play=function(c){if(!c){c=this}return this.call(c.setPaused,[false],c)};a.pause=function(c){if(!c){c=this}return this.call(c.setPaused,[true],c)};a.setPosition=function(j,k){if(j<0){j=0}if(k==null){k=1}var g=j;var e=false;if(g>=this.duration){if(this.loop){g=g%this.duration}else{g=this.duration;e=true}}if(g==this._prevPos){return e}var c=this._prevPos;this.position=this._prevPos=g;this._prevPosition=j;if(this._target){if(e){this._updateTargetProps(null,1)}else{if(this._steps.length>0){for(var f=0,d=this._steps.length;f<d;f++){if(this._steps[f].t>g){break}}var h=this._steps[f-1];this._updateTargetProps(h,(this._stepPosition=g-h.t)/h.d)}}}if(k!=0&&this._actions.length>0){if(this._useTicks){this._runActions(g,g)}else{if(k==1&&g<c){if(c!=this.duration){this._runActions(c,this.duration)}this._runActions(0,g,true)}else{this._runActions(c,g)}}}if(e){this.setPaused(true)}this.dispatchEvent("change");return e};a.tick=function(c){if(this._paused){return}this.setPosition(this._prevPosition+c)};a.setPaused=function(c){if(this._paused===!!c){return this}this._paused=!!c;b._register(this,!c);return this};a.w=a.wait;a.t=a.to;a.c=a.call;a.s=a.set;a.toString=function(){return"[Tween]"};a.clone=function(){throw ("Tween can not be cloned.")};a._updateTargetProps=function(d,j){var r,q,o,p,m,g;if(!d&&j==1){this.passive=false;r=q=this._curQueueProps}else{this.passive=!!d.v;if(this.passive){return}if(d.e){j=d.e(j,0,1,1)}r=d.p0;q=d.p1}for(var c in this._initQueueProps){if((p=r[c])==null){r[c]=p=this._initQueueProps[c]}if((m=q[c])==null){q[c]=m=p}if(p==m||j==0||j==1||(typeof(p)!="number")){o=j==1?m:p}else{o=p+(m-p)*j}var h=false;if(g=b._plugins[c]){for(var f=0,e=g.length;f<e;f++){var k=g[f].tween(this,c,o,r,q,j,!!d&&r==q,!d);if(k==b.IGNORE){h=true}else{o=k}}}if(!h){this._target[c]=o}}};a._runActions=function(m,c,l){var o=m;var h=c;var g=-1;var f=this._actions.length;var e=1;if(m>c){o=c;h=m;g=f;f=e=-1}while((g+=e)!=f){var d=this._actions[g];var n=d.t;if(n==h||(n>o&&n<h)||(l&&n==m)){d.f.apply(d.o,d.p)}}};a._appendQueueProps=function(h){var d,f,g,e,c;for(var j in h){if(this._initQueueProps[j]===undefined){f=this._target[j];if(d=b._plugins[j]){for(g=0,e=d.length;g<e;g++){f=d[g].init(this,j,f)}}this._initQueueProps[j]=this._curQueueProps[j]=(f===undefined)?null:f}else{f=this._curQueueProps[j]}}for(var j in h){f=this._curQueueProps[j];if(d=b._plugins[j]){c=c||{};for(g=0,e=d.length;g<e;g++){if(d[g].step){d[g].step(this,j,f,h[j],c)}}}this._curQueueProps[j]=h[j]}if(c){this._appendQueueProps(c)}return this._curQueueProps};a._cloneProps=function(c){var d={};for(var e in c){d[e]=c[e]}return d};a._addStep=function(c){if(c.d>0){this._steps.push(c);c.t=this.duration;this.duration+=c.d}return this};a._addAction=function(c){c.t=this.duration;this._actions.push(c);return this};a._set=function(c,d){for(var e in c){d[e]=c[e]}};createjs.Tween=b}());this.createjs=this.createjs||{};(function(){var a=function(){throw"Ease cannot be instantiated."};a.linear=function(b){return b};a.none=a.linear;a.get=function(b){if(b<-1){b=-1}if(b>1){b=1}return function(c){if(b==0){return c}if(b<0){return c*(c*-b+1+b)}return c*((2-c)*b+(1-b))}};a.getPowIn=function(b){return function(c){return Math.pow(c,b)}};a.getPowOut=function(b){return function(c){return 1-Math.pow(1-c,b)}};a.getPowInOut=function(b){return function(c){if((c*=2)<1){return 0.5*Math.pow(c,b)}return 1-0.5*Math.abs(Math.pow(2-c,b))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(b){return 1-Math.cos(b*Math.PI/2)};a.sineOut=function(b){return Math.sin(b*Math.PI/2)};a.sineInOut=function(b){return -0.5*(Math.cos(Math.PI*b)-1)};a.getBackIn=function(b){return function(c){return c*c*((b+1)*c-b)}};a.backIn=a.getBackIn(1.7);a.getBackOut=function(b){return function(c){return(--c*c*((b+1)*c+b)+1)}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(b){b*=1.525;return function(c){if((c*=2)<1){return 0.5*(c*c*((b+1)*c-b))}return 0.5*((c-=2)*c*((b+1)*c+b)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(b){return -(Math.sqrt(1-b*b)-1)};a.circOut=function(b){return Math.sqrt(1-(--b)*b)};a.circInOut=function(b){if((b*=2)<1){return -0.5*(Math.sqrt(1-b*b)-1)}return 0.5*(Math.sqrt(1-(b-=2)*b)+1)};a.bounceIn=function(b){return 1-a.bounceOut(1-b)};a.bounceOut=function(b){if(b<1/2.75){return(7.5625*b*b)}else{if(b<2/2.75){return(7.5625*(b-=1.5/2.75)*b+0.75)}else{if(b<2.5/2.75){return(7.5625*(b-=2.25/2.75)*b+0.9375)}else{return(7.5625*(b-=2.625/2.75)*b+0.984375)}}}};a.bounceInOut=function(b){if(b<0.5){return a.bounceIn(b*2)*0.5}return a.bounceOut(b*2-1)*0.5+0.5};a.getElasticIn=function(b,d){var c=Math.PI*2;return function(e){if(e==0||e==1){return e}var f=d/c*Math.asin(1/b);return -(b*Math.pow(2,10*(e-=1))*Math.sin((e-f)*c/d))}};a.elasticIn=a.getElasticIn(1,0.3);a.getElasticOut=function(b,d){var c=Math.PI*2;return function(e){if(e==0||e==1){return e}var f=d/c*Math.asin(1/b);return(b*Math.pow(2,-10*e)*Math.sin((e-f)*c/d)+1)}};a.elasticOut=a.getElasticOut(1,0.3);a.getElasticInOut=function(b,d){var c=Math.PI*2;return function(e){var f=d/c*Math.asin(1/b);if((e*=2)<1){return -0.5*(b*Math.pow(2,10*(e-=1))*Math.sin((e-f)*c/d))}return b*Math.pow(2,-10*(e-=1))*Math.sin((e-f)*c/d)*0.5+1}};a.elasticInOut=a.getElasticInOut(1,0.3*1.5);createjs.Ease=a}());this.createjs=this.createjs||{};(function(){var a=function(){throw ("CSSPlugin cannot be instantiated.")};a.cssSuffixMap={top:"px",left:"px",bottom:"px",right:"px",width:"px",height:"px",opacity:""};a.priority=-100;a.install=function(){var b=[],c=a.cssSuffixMap;for(var d in c){b.push(d)}createjs.Tween.installPlugin(a,b)};a.init=function(k,b,j){var f,e,d,c=a.cssSuffixMap;if((f=c[b])==null||!(d=k.target.style)){return j}var h=d[b];if(!h){return 0}var g=h.length-f.length;if((e=h.substr(g))!=f){throw ("CSSPlugin Error: Suffixes do not match. ("+f+":"+e+")")}else{return parseInt(h.substr(0,g))}};a.step=function(e,f,d,c,b){};a.tween=function(k,d,j,e,f,i,h,g){var c,b=a.cssSuffixMap;if(b[d]==null||!(c=k.target.style)){return j}c[d]=j+b[d];return createjs.Tween.IGNORE};createjs.CSSPlugin=a}());this.createjs=this.createjs||{};(function(){var b=function(){throw"Ticker cannot be instantiated."};b.RAF_SYNCHED="synched";b.RAF="raf";b.TIMEOUT="timeout";b.useRAF=false;b.timingMode=null;b.maxDelta=0;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;b._listeners=null;createjs.EventDispatcher.initialize(b);b._addEventListener=b.addEventListener;b.addEventListener=function(){!b._inited&&b.init();return b._addEventListener.apply(b,arguments)};b._paused=false;b._inited=false;b._startTime=0;b._pausedTime=0;b._ticks=0;b._pausedTicks=0;b._interval=50;b._lastTime=0;b._times=null;b._tickTimes=null;b._timerId=null;b._raf=true;b.init=function(){if(b._inited){return}b._inited=true;b._times=[];b._tickTimes=[];b._startTime=b._getTime();b._times.push(b._lastTime=0);b.setInterval(b._interval)};b.reset=function(){if(b._raf){var c=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;c&&c(b._timerId)}else{clearTimeout(b._timerId)}b.removeAllEventListeners("tick");b._timerId=null;b._inited=false};b.setInterval=function(c){b._interval=c;if(!b._inited){return}b._setupTick()};b.getInterval=function(){return b._interval};b.setFPS=function(c){b.setInterval(1000/c)};b.getFPS=function(){return 1000/b._interval};b.getMeasuredTickTime=function(e){var c=0,f=b._tickTimes;if(f.length<1){return -1}e=Math.min(f.length,e||(b.getFPS()|0));for(var d=0;d<e;d++){c+=f[d]}return c/e};b.getMeasuredFPS=function(c){var d=b._times;if(d.length<2){return -1}c=Math.min(d.length-1,c||(b.getFPS()|0));return 1000/((d[0]-d[c])/c)};b.setPaused=function(c){b._paused=c};b.getPaused=function(){return b._paused};b.getTime=function(c){return b._getTime()-b._startTime-(c?b._pausedTime:0)};b.getEventTime=function(c){return(b._lastTime||b._startTime)-(c?b._pausedTime:0)};b.getTicks=function(c){return b._ticks-(c?b._pausedTicks:0)};b._handleSynch=function(){var c=b._getTime()-b._startTime;b._timerId=null;b._setupTick();if(c-b._lastTime>=(b._interval-1)*0.97){b._tick()}};b._handleRAF=function(){b._timerId=null;b._setupTick();b._tick()};b._handleTimeout=function(){b._timerId=null;b._setupTick();b._tick()};b._setupTick=function(){if(b._timerId!=null){return}var d=b.timingMode||(b.useRAF&&b.RAF_SYNCHED);if(d==b.RAF_SYNCHED||d==b.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c){b._timerId=c(d==b.RAF?b._handleRAF:b._handleSynch);b._raf=true;return}}b._raf=false;b._timerId=setTimeout(b._handleTimeout,b._interval)};b._tick=function(){var g=b._getTime()-b._startTime;var d=g-b._lastTime;var e=b._paused;b._ticks++;if(e){b._pausedTicks++;b._pausedTime+=d}b._lastTime=g;if(b.hasEventListener("tick")){var f=new createjs.Event("tick");var c=b.maxDelta;f.delta=(c&&d>c)?c:d;f.paused=e;f.time=g;f.runTime=g-b._pausedTime;b.dispatchEvent(f)}b._tickTimes.unshift(b._getTime()-g);while(b._tickTimes.length>100){b._tickTimes.pop()}b._times.unshift(g);while(b._times.length>100){b._times.pop()}};var a=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);b._getTime=function(){return(a&&a.call(performance))||(new Date().getTime())};createjs.Ticker=b}());var TouchComp={eventPointerDown:"",eventPointerUp:"",eventPointerMove:"",isTouchOperation:false,isTouchDevice:function(){try{document.createEvent("TouchEvent");return"ontouchstart" in window||"onmsgesturechange" in window}catch(a){return false}},init:function(){if(this.isTouchDevice()){this.eventPointerDown="touchstart";this.eventPointerUp="touchend";this.eventPointerMove="touchmove"}else{this.eventPointerDown="mousedown";this.eventPointerUp="mouseup";this.eventPointerMove="mousemove"}},fixTouch:function(e){var c=window.pageXOffset,b=window.pageYOffset,a=e.clientX,d=e.clientY;if(e.pageY===0&&Math.floor(d)>Math.floor(e.pageY)||e.pageX===0&&Math.floor(a)>Math.floor(e.pageX)){a=a-c;d=d-b}else{if(d<(e.pageY-b)||a<(e.pageX-c)){a=e.pageX-c;d=e.pageY-b}}return{x:a,y:d}},getEventScreenCoords:function(b){if(this.isTouchDevice()){var c=b.changedTouches[0];var a=new Object();a.x=c.pageX;a.y=c.pageY;return a}else{var a=new Object();a.x=b.screenX;a.y=b.screenY;return a}}};var XDOM={newXML:function(a){if(jQuery.browser.msie){var c=new ActiveXObject("Microsoft.XMLDOM");if(a!=""&&a!=null&&a!=undefined){var b="<"+a+"></"+a+">";c.loadXML(b)}return c}else{if(document.implementation.createDocument){return document.implementation.createDocument("",a,null)}}return null},newXMLFromString:function(b){var c;var a;if(jQuery.browser.msie){a=new ActiveXObject("Microsoft.XMLDOM");a.async=false;a.loadXML(b)}else{c=new DOMParser();a=c.parseFromString(b,"text/xml")}return a},newXMLFromURL:function(a,c,b){$.ajax({type:"GET",url:a,async:false,dataType:($.browser.msie)?"text":"xml",success:function(e){var d;if(typeof e==="string"){d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;d.loadXML(e)}else{d=e}if(c!=null||c!=undefined||c!=""){c(d)}},error:function(d,f,e){if(b!=null||b!=undefined||b!=""){b(f,e)}}})},cloneXML:function(e){var d;if(typeof(ActiveXObject)!="undefined"){d=new ActiveXObject("Microsoft.XMLDOM");var a=e.documentElement;var c=a.cloneNode(true);d.appendChild(c)}else{d=e.implementation.createDocument(e.namespaceURI,null,null);var b=d.importNode(e.documentElement,true);d.appendChild(b)}return(d)},mergeXML:function(g,f,d,e){var b=XDOM.cloneXML(g);var a=$(b);var c=$(f);c.children(d).children().each(function(){var k=this.nodeName;var i=a.children(d).children(k)[0];var h;if(i){h=i.nodeName}else{h=""}if(e==null||e==undefined){e=2}var j=false;switch(e){case 1:if(k==h){j=true}break;case 3:if(k!=h){j=true}break;case 4:break;case 2:default:j=true}if(j){XDOM.removeNode(i);XDOM.appendNode(a.children(d)[0],this)}});return b},XMLToString:function(c){var b;if(window.ActiveXObject){b=c.xml}else{var a=new XMLSerializer();b=a.serializeToString(c)}return b},nodeByPath:function(g,l){var d=l.split(".");var f=$(g).children("motor");var e;var c=f[0];for(e=0;e<d.length;e++){var b=d[e];if(e==(d.length-1)){var j;if(b.indexOf("@")!==-1){if(c==null){return null}return c}else{if(b.indexOf("[")>0){var h=b.substring(b.indexOf("[")+1,b.indexOf["]"]);h=parseInt(h);var k=b.substring(0,b.indexOf("["));j=$(c).children(k);if(j==null||j.length==0||h>(j.length-1)){return null}return j[h]}else{j=$(c).children(b);if(j==null||j.length==0){return null}return j[0]}}}else{var a;if(b.indexOf("[")>0){var h=b.substring(b.indexOf("[")+1,b.indexOf["]"]);h=parseInt(h);var k=b.substring(0,b.indexOf("["));a=$(c).children(k);if(a==null||a.length==0||h>(a.length-1)){return null}c=a[h]}else{a=$(c).children(b);if(a==null||a.length==0){return null}c=a[0]}}}return null},valueOfNode:function(g,m){var d=m.split(".");var f=$(g).children();var e;var c=f[0];for(e=0;e<d.length;e++){var b=d[e];if(e==(d.length-1)){var k;if(b.indexOf("@")!==-1){if(c==null){return""}var j=b.substring(1);return $(c).attr(j)}else{if(b.indexOf("[")>0){var h=b.substring(b.indexOf("[")+1,b.indexOf["]"]);h=parseInt(h);var l=b.substring(0,b.indexOf("["));k=$(c).children(l);if(k==null||k.length==0||h>(k.length-1)){return""}return $(k[h]).text()}else{k=$(c).children(b);if(k==null||k.length==0){return""}return $(k[0]).text()}}}else{var a;if(b.indexOf("[")>0){var h=b.substring(b.indexOf("[")+1,b.indexOf["]"]);h=parseInt(h);var l=b.substring(0,b.indexOf("["));a=$(c).children(l);if(a==null||a.length==0||h>(a.length-1)){return""}c=a[h]}else{a=$(c).children(b);if(a==null||a.length==0){return""}c=a[0]}}}return""},valueOfXMLNode:function(a){return $(a).text()},newNode:function(c){var b=XDOM.newXML(c);var a=$(b).children(c)[0];return a},removeNode:function(a){if(a==null||a==undefined){return}if(jQuery.browser.msie==true){a.parentNode.removeChild(a)}else{$(a).remove()}},appendNode:function(c,a){var b=a.cloneNode(true);c.appendChild(b)},getTextNodes:function(a){return $(a).contents().filter(function(){return(((this.nodeName=="#text"&&this.nodeType=="3")||this.nodeType=="4")&&($.trim(this.nodeValue.replace("\n",""))!==""))})},setNodeValue:function(b,c){var a=XDOM.getTextNodes(b);if(a.get(0)){a.get(0).nodeValue=c}else{b.textContent=c}},setNewNodeCDATAValue:function(b,c,d){var a=b.createCDATASection(d);c.appendChild(a);return a}};function PauseableTimeout(c,a){this.func=c;var b=new Date().getTime();this.triggerTime=b+a;this.t=window.setTimeout(this.func,a);this.paused_timeLeft=0;this.getTimeLeft=function(){var d=new Date();return this.triggerTime-d};this.pause=function(){this.paused_timeLeft=this.getTimeLeft();window.clearTimeout(this.t);this.t=null};this.resume=function(){if(this.t==null){this.t=window.setTimeout(this.func,this.paused_timeLeft)}};this.clearTimeout=function(){window.clearTimeout(this.t)}}function pppDiapoData(){this.foto="";this.audio="";this.diapoTimeOut=0;this.textos=new Array()}function pppTextoData(){this.type="Arial";this.size=12;this.style="Normal";this.color="Black";this.align="TopLeft";this.effect="";this.effectTimeOut=0;this.textTimeOut=0;this.txt=""}function pppDiapoManager(a){this._diaporama=a;this._image;this._tmpImage;this._soundPosition;this._textFieldList;this._images;this._hashImages;this._preload;this._manifest;this._imageToShow;this._diapoList;this._curDiapo;this._nextDiapo;this._curText;this._mute;this._pause;this._pauseWhenStarting;this._veryFirstTime;this._curDiapoEnded;this._diapoTimer;this._textTimer;this._textTween;this._typewriterTimer;this._diapoDefaultTimeOut;this._effectDefaultTimeOut;this._textDefaultTimeOut;this._fotoMargin;this._textMargin;this.init=function(b,c){var d=this;d._image=null;d._tmpImage=null;d._soundPosition=0;d._textFieldList=new Array();d._images=new Array();d._hashImages=new Object();d._manifest=new Array();d._imageToShow="";d._diapoList=new Array();d._curDiapo=0;d._nextDiapo=0;d._curText=0;d._mute=false;if(c){d._pause=false}else{d._pause=true}d._pauseWhenStarting=false;d._veryFirstTime=false;d._curDiapoEnded=false;d._diapoTimer=null;d._textTimer=null;d._textTween=null;d._textTypewriter=null;d._diapoDefaultTimeOut=3000;d._effectDefaultTimeOut=500;d._textDefaultTimeOut=1000;d._fotoMargin=null;d._textMargin=null;d.parseXML(b);d.startPreload()};this.startPreload=function(){var b=this;b._preload=new createjs.LoadQueue();b._preload.on("fileload",function(c){b.handleAssetLoad(b,c)});b._preload.setMaxConnections(3);b._preload.loadManifest(b._manifest)};this.handleAssetLoad=function(d,c){var b=d._preload.getResult(c.item.id);if(c.item.type=="image"){d._images.push(b);if(c.item.src==d._imageToShow&&d._imageToShow!=""){d._diaporama.setPreloadedImage(b);d.launchDiapo(d._nextDiapo);d._imageToShow=""}}};this.start=function(){var b=this;if(b._pause){b._veryFirstTime=true}b.startDiapo(0)};this.end=function(){var b=this;b.endCurDiapo()};this.isPaused=function(){var b=this;return b._pause};this.playPause=function(){var b=this;var c=b._diapoList[b._curDiapo];b._pause=!b._pause;if(b._pause==true){if(b._textTween!=undefined&&b._textTween!=null){b._textTween.setPaused(true)}if(!(b._diapoTimer==undefined||b._diapoTimer==null)){b._diapoTimer.pause()}if(!(b._textTimer==undefined||b._textTimer==null)){b._textTimer.pause()}if(!(b._typewriterTimer==undefined||b._typewriterTimer==null)){b._typewriterTimer.pause()}if(c.audio!=""){b.audioPause(b._curDiapo)}}else{if(b._curDiapoEnded){b._diaporama.$btnHome.css("visibility","visible");b._diaporama.$btnPrev.css("visibility","visible");b._diaporama.btnHomeEnabled=true;b._diaporama.btnPrevEnabled=true;b.startDiapo(b._curDiapo+1)}else{if(b._veryFirstTime){b._veryFirstTime=false;if(c.audio!=""){b.audioStart(b._curDiapo)}b._diapoTimer=new PauseableTimeout(function(d){b.onDiapoTimerComplete(b,d)},c.diapoTimeOut)}else{if(b._textTween!=null){}if(b._textTypewriter!=null){b._textTypewriter.resume()}if(b._diapoTimer!=null&&b._diapoTimer.getTimeLeft()>0){b._diapoTimer.resume()}else{b._diapoTimer=new PauseableTimeout(function(d){b.onDiapoTimerComplete(b,d)},c.diapoTimeOut)}if(c.audio!=""){b.audioPlay(b._curDiapo)}}}}};this.toggleAudio=function(){var b=this;b._mute=!b._mute;b.audioUpdateMute(b._curDiapo)};this.nextDiapo=function(){var b=this;b._veryFirstTime=false;b.startDiapo(b._curDiapo+1)};this.prevDiapo=function(){var b=this;b.startDiapo(b._curDiapo-1)};this.firstDiapo=function(){var b=this;b.startDiapo(0)};this.parseXML=function(d){var f=this;var c,b;var g;var e;if(XDOM.valueOfNode(d,"@diapoDefaultTimeOut")!=""){f._diapoDefaultTimeOut=parseInt(XDOM.valueOfNode(d,"@diapoDefaultTimeOut"),10)}if(XDOM.valueOfNode(d,"@effectDefaultTimeOut")!=""){f._effectDefaultTimeOut=parseInt(XDOM.valueOfNode(d,"@effectDefaultTimeOut"),10)}if(XDOM.valueOfNode(d,"@textDefaultTimeOut")!=""){f._textDefaultTimeOut=parseInt(XDOM.valueOfNode(d,"@textDefaultTimeOut"),10)}if(XDOM.valueOfNode(d,"@fotoMargin")!=""){f._fotoMargin=XDOM.valueOfNode(d,"@fotoMargin").split(",",4)}else{f._fotoMargin=new Array(0,0,0,0)}if(XDOM.valueOfNode(d,"@textMargin")!=""){f._textMargin=XDOM.valueOfNode(d,"@textMargin").split(",",4)}else{_textMargin=new Array(0,0,0,0)}var c=0;$(d).children("diaporama").children("diapo").each(function(){g=new pppDiapoData();g.foto=$(this).attr("foto");var l=f._diaporama.getSrcImagen(g.foto);var k=g.foto;if(g.foto==""){k="nobk.png"}if(f._hashImages.hasOwnProperty(k)==false){f._hashImages[k]=true;f._manifest.push({id:l,type:"image",src:l,diapo:f._diaporama._diapContainerName})}g.audio=$(this).attr("audio")||"";if(g.audio!=""){var h=f._diaporama.getSrcSonido(g.audio);f.audioCreateTag(c,h)}if($(this).attr("diapoTimeOut")!=""&&$(this).attr("diapoTimeOut")!=undefined){g.diapoTimeOut=parseInt($(this).attr("diapoTimeOut"),10)}else{g.diapoTimeOut=f._diapoDefaultTimeOut}var i=0;$(this).children("texto").each(function(){if($(this).text()!=""){e=new pppTextoData();if($(this).attr("type")!=""&&$(this).attr("type")!=undefined){e.type=$.trim($(this).attr("type"))}if($(this).attr("size")!=""&&$(this).attr("size")!=undefined){e.size=parseInt($(this).attr("size"))}if($(this).attr("style")!=""&&$(this).attr("style")!=undefined){e.style=$(this).attr("style")}if($(this).attr("color")!=""&&$(this).attr("color")!=undefined){e.color=$(this).attr("color")}if($(this).attr("align")!=""&&$(this).attr("align")!=undefined){e.align=$(this).attr("align")}if($(this).attr("effect")!=""&&$(this).attr("effect")!=undefined){e.effect=$(this).attr("effect")}if($(this).attr("effectTimeOut")!=""&&$(this).attr("effectTimeOut")!=undefined){e.effectTimeOut=parseInt($(this).attr("effectTimeOut"))}else{e.effectTimeOut=f._effectDefaultTimeOut}if($(this).attr("textTimeOut")!=""&&$(this).attr("textTimeOut")!=undefined){e.textTimeOut=parseInt($(this).attr("textTimeOut"))}else{e.textTimeOut=f._textDefaultTimeOut}e.txt=$(this).text().replace(/#/g,"</BR>");g.textos.push(e)}i++});f._diapoList.push(g);c++})};this.endCurDiapo=function(){var c=this;if(c._textTween!=null){var b=$($(c._diaporama._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];$(b).find(".dp_text ").each(function(){createjs.Tween.removeTweens(this)})}if(!(c._diapoTimer==undefined||c._diapoTimer==null)){c._diapoTimer.clearTimeout()}if(!(c._textTimer==undefined||c._textTimer==null)){c._textTimer.clearTimeout()}if(!(c._typewriterTimer==undefined||c._typewriterTimer==null)){c._typewriterTimer.clearTimeout()}c.audioStop(c._curDiapo);c._diaporama.clearText()};this.startDiapo=function(b){var c=this;var d;c._curDiapoEnded=false;if(b>=0&&b<c._diapoList.length){c._pauseWhenStarting=c._pause;c._nextDiapo=b;d=c._diapoList[c._nextDiapo];c.showLoadedImage(d.foto)}};this.getImageNameFromPath=function(c){var b=c.replace(/^.*[\\\/]/,"");return b};this.searchImage=function(e){var d=this;if(e==""){e="nobk.png"}if(d._hashImages.hasOwnProperty(e)==true){for(var c in d._images){var b=this.getImageNameFromPath(d._images[c].src);if(b==e){return d._images[c]}}}return false};this.showLoadedImage=function(d){var b=this;var c=b._diaporama.getSrcImagen(d);var e=b.searchImage(d);if(e==false){b._imageToShow=c}else{b._diaporama.setPreloadedImage(e);b.launchDiapo(b._nextDiapo)}};this.addText=function(b){this._diaporama.setText(b)};this.showText=function(b,c){var f=this;f._diaporama.setText(b);var d=$($(f._diaporama._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];var e=$(d).find(".t"+c)[0];if($.browser.msie==true&&$.browser.engine=="msie"&&$.browser.version==9){createjs.Tween.get(e).to({opacity:1},0)}else{$(e).css("opacity","1");$(e).css("filter","alpha(opacity=100)")}};this.launchDiapo=function(b){var e=this;var h;if(b>=0&&b<e._diapoList.length){e.endCurDiapo();e._curDiapo=b;h=e._diapoList[e._curDiapo];e.fillTextList();if(e._veryFirstTime){var g;if(e._textFieldList.length>0){g=e._textFieldList[0];e.showText(g,0)}var d=$($(e._diaporama._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];var c=$($($(d).children(".dptoolbar")[0]).find("td")[0]);$(c.children(".toolbar_panel")[0]).css("visibility","visible");$(e._diaporama._waterMark).css("visibility","visible")}else{if(h.audio!=""){if(e._diaporama._isIOS==false&&e._diaporama._isAndroidNativeBrowser==false){e._diaporama.$btnMuteOnOff.css("visibility","visible");e._diaporama.btnMuteOnOffEnabled=true}e.audioStart(e._curDiapo)}else{e._diaporama.$btnMuteOnOff.css("visibility","hidden");e._diaporama.btnMuteOnOffEnabled=false}if(e._pause==false){e._diapoTimer=new PauseableTimeout(function(i){e.onDiapoTimerComplete(e,i)},h.diapoTimeOut)}var f=e._diapoList[e._curDiapo].textos.length;if(f==0){if(e._curDiapo==e._diapoList.length-1){if(e._diaporama.$btnPlayPause.hasClass("cepda-pause-button")){e._diaporama.$btnPlayPause.removeClass("cepda-pause-button")}e._diaporama.$btnPlayPause.addClass("cepda-play-button")}}else{e.startTextEffect(0)}}}};this.fillTextList=function(){var c=this;var o,q,m,e;var g;var j;var p;var n=false;var h=false;var f;var b;var k;o=c._textMargin[0];q=c._textMargin[1];m=c._textMargin[2];e=c._textMargin[3];j=c._diapoList[c._curDiapo].textos.length;for(g=0;g<j;g++){p=c._diapoList[c._curDiapo].textos[g];switch(p.style){case"Bold":n=true;break;case"Italic":h=true;break;case"BoldItalic":n=true;h=true;break}switch(p.align){case"LeftTop":f="topleft";b="left";k="top";break;case"LeftCenter":f="centerleft";b="left";k="center";break;case"LeftBottom":f="bottomleft";b="left";k="bottom";break;case"CenterTop":f="topcenter";b="center";k="top";break;case"CenterCenter":f="centercenter";b="center";k="center";break;case"CenterBottom":f="bottomcenter";b="center";k="bottom";break;case"RightTop":f="topright";b="right";k="top";break;case"RightCenter":f="centerright";b="right";k="center";break;case"RightBottom":f="bottomright";b="right";k="bottom";break;default:f="centercenter";b="center";k="center";break}var l=p.type.split(" ").length>1;var d='<table class="gridposition dptext" width="100%" height="100%"><tr><td valign=\''+k+"'><div class=\"dp_text t"+g+" "+f+'" style="padding: '+q+"px "+m+"px "+e+"px "+o+"px; font-family: "+(l?"'":"")+p.type+(l?"'":"")+"; font-size: "+p.size+"px; text-align: "+b+"; "+((p.color=="Black")?"color: #000000;":"color: #FFFFFF; ")+((h)?"font-style: italic; ":"")+((n)?"font-weight: bold;":"")+'">'+p.txt+"</div></td></tr></table>";c._textFieldList[g]=d}};this.startTextEffect=function(b){var f=this;var j;var d;var h;f._curText=b;j=f._diapoList[f._curDiapo].textos.length;if(b>=0&&b<j){d=f._diapoList[f._curDiapo].textos[b];h=f._textFieldList[b];f.addText(h);var c=$($(f._diaporama._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];var e=$(c).find(".t"+b)[0];if(d.effect=="typewriter"){$(e).html("");$(e).css("opacity","1");$(e).css("filter","alpha(opacity=100)");f._typewriterTimer=new PauseableTimeout(function(){f.onNextChar(f,e,d.txt,d.effectTimeOut/d.txt.length,d.textTimeOut,0,d.txt.length,b)},0)}else{if(e!=undefined){switch(d.effect){case"fadein":f._textTween=createjs.Tween.get(e).to({opacity:1},d.effectTimeOut,createjs.Ease.quadOut).call(function(){f.onTextEffectComplete(f,b,d.textTimeOut)});break;case"slide":var g=$(e).width();f._textTween=createjs.Tween.get(e).to({opacity:1},0).to({left:-g},0).to({left:0},d.effectTimeOut,createjs.Ease.quadOut).call(function(){f.onTextEffectComplete(f,b,d.textTimeOut)});break;default:$(e).css("opacity","1");setTimeout(function(){f.onTextEffectComplete(f,b,d.textTimeOut)},d.effectTimeOut);if(b==j-1&&f._curDiapo==f._diapoList.length-1){if(f._diaporama.$btnPlayPause.hasClass("cepda-pause-button")){f._diaporama.$btnPlayPause.removeClass("cepda-pause-button")}f._diaporama.$btnPlayPause.addClass("cepda-play-button")}break}}}}};this.onNextChar=function(b,d,g,k,h,f,e,c){if(f>=e){b.onTextEffectComplete(b,c,h);return}var j;if(g[f]=="<"){j=f+"</br>".length;$(d).html($(d).html()+"</br>")}else{$(d).html($(d).html()+g[f]);j=f+1}b._typewriterTimer=new PauseableTimeout(function(){b.onNextChar(b,d,g,k,h,j,e,c)},k)};this.onTextEffectComplete=function(d,c,b){c++;var e=d._diapoList[d._curDiapo].textos.length;if(c>=e){if(d._curDiapo==d._diapoList.length-1){if(d._diaporama.$btnPlayPause.hasClass("cepda-pause-button")){d._diaporama.$btnPlayPause.removeClass("cepda-pause-button")}d._diaporama.$btnPlayPause.addClass("cepda-play-button")}return}if(b>0){d._textTimer=new PauseableTimeout(function(f){d.onTextTimerComplete(d,c,f)},b)}else{d.startTextEffect(c)}};this.onTextTimerComplete=function(d,b,c){d.startTextEffect(b)};this.onDiapoTimerComplete=function(c,b){if((c._curDiapo+1)<c._diapoList.length){if(c._pause==false){c._diaporama.$btnHome.css("visibility","visible");c._diaporama.$btnPrev.css("visibility","visible");c._diaporama.btnHomeEnabled=true;c._diaporama.btnPrevEnabled=true;if(c._curDiapo==c._diapoList.length-2){c._diaporama.$btnNext.css("visibility","hidden");c._diaporama.$btnPlayPause.css("visibility","hidden");c._diaporama.btnNextEnabled=false;c._diaporama.btnPlayPauseEnabled=false;if(c._diaporama.$btnPlayPause.hasClass("cepda-pause-button")){c._diaporama.$btnPlayPause.removeClass("cepda-pause-button").addClass("cepda-play-button")}}c.startDiapo(c._curDiapo+1)}else{c._curDiapoEnded=true}}};this.audioGetId=function(b){return this._diaporama._diapContainerName+"_audio_"+b};this.audioCreateTag=function(b,c){var e=this.audioGetId(b);var d="<audio id='"+e+"' preload='auto'>		<source src='"+encodeURI(c)+"' type='audio/mpeg'/></audio>";$(document.body).append(d);document.getElementById(e).addEventListener("playing",function(){$(this).attr("hasBeenPlayed","1")},false)};this.audioStart=function(b){var d=this.audioGetId(b);var c=document.getElementById(d);if(!c){return}if($(c).attr("hasBeenPlayed")=="1"){c.currentTime=0}c.play();c.muted=this._mute};this.audioStop=function(b){var d=this.audioGetId(b);var c=document.getElementById(d);if(!c){return}if(!c.paused){c.pause()}};this.audioPlay=function(b){var d=this.audioGetId(b);var c=document.getElementById(d);if(!c){return}if(c.paused){c.play();c.muted=this._mute}};this.audioPause=function(b){var d=this.audioGetId(b);var c=document.getElementById(d);if(!c){return}if(!c.paused){c.pause()}};this.audioUpdateMute=function(b){var d=this.audioGetId(b);var c=document.getElementById(d);if(!c){return}c.muted=this._mute}}function pppDiaporama(b,c,a){if(b==undefined){alert("Hay que passar el ID de un elemento HTML al Diaporama.");return}this.DP_WIDTH=950;this.DP_HEIGHT=608;this.TB_HEIGHT=40;this.TB_GAP=5;this.MARKUP='<div class="html_diaporama cepda-diaporama '+c+'">	<div class="diap_container">		<table class="gridposition dptoolbar" width="100%" height="100%"><tr><td valign=\'bottom\'>			<div class="toolbar_panel">				<button id="btnHome" class="cepda-home-button" name="Home">Inicio</button>				<button id="btnPrev" class="cepda-prev-button" name="Prev">Anterior</button>				<button id="btnNext" class="cepda-next-button" name="Next">Siguiente</button>				<button id="btnPlayPause" class="cepda-play-button" name="PlayPause">Automï¿½tico</button>				<button id="btnMuteOnOff" class="cepda-muteon-button" name="MuteOnOff">Sonido</button>			</div>		</td></tr></table>		<div class="dp_watermark">		</div>	</div></div>';this.DIAPO_CHANGE="DiapoChange";this.DIAPO_END="DiapoEnd";this.DIAPO_NEXT="DiapoNext";this.TBITEM_SELECTED="TBItemSelected";this._debug=a||false;this._diapContainerName=b;this._diapContainer;this._toolBar;this._diapoManager;this._waterMark;this._bgSound;this._aratio;this._scale;this.w;this.h;this._needPatch;this._isIOS;this._isAndroidChrome;this._isAndroidNativeBrowser;this._cannotAutoPlay;this._autoplay;this._toolbarColor;this._toolbarAlign;this._toolbarMargin;this._toolbarCounter;this._toolbarCounterColor;this._actionsReady=false;this._initialized=false;this._sourceURL;this.initJQuery=function(){var e;var d=navigator.userAgent.toLowerCase();jQuery.browser=new Object();jQuery.browser.msie=/msie|trident/.test(d);e=d.match(/(msie|trident)\s*(?:\/\s*)?(.[^;]*)/);if(e){jQuery.browser.engine=$.trim(e[1]);jQuery.browser.version=parseFloat($.trim(e[2]))}else{jQuery.browser.engine="";jQuery.browser.version=-1}};this.initDiaporama=function(d){var e=this;if(e._initialized==true){return}createjs.CSSPlugin.install(createjs.Tween);e._diapContainer=null;e._toolbar=null;e._diapoManager=null;e._waterMark=null;e._bgSound=null;e._autoplay=false;e._aratio=e.DP_WIDTH/e.DP_HEIGHT;e._scale=NaN;e._heightCheked=false;e._toolbarColor="Black";e._toolbarAlign="BottomLeft";e._toolbarMargin=null;e._toolbarCounter=false;e._toolbarCounterColor="Black";e._needPatch=false;if(d==undefined||d==null){e._sourceURL=""}else{e._sourceURL=d}e._initialized=true;e.onDOMContentLoaded(e)};this.onDOMContentLoaded=function(d){var g=d;g.initJQuery();var e=navigator.userAgent;g._isIOS=(/iPhone|iPad|iPod/i.test(navigator.userAgent));g._isAndroidChrome=(/Android/i.test(navigator.userAgent))&&(/Chrome/i.test(navigator.userAgent));g._isAndroidNativeBrowser=((e.indexOf("Mozilla/5.0")>-1&&e.indexOf("Android ")>-1&&e.indexOf("AppleWebKit")>-1)&&!(e.indexOf("Chrome")>-1));g._cannotAutoPlay=g._isIOS||g._isAndroidChrome;g._diapContainer=(g._diapContainerName=="body")?document.body:document.getElementById(g._diapContainerName);if(g.needContainerSizePatch()){g._needPatch=true}$(g._diapContainer).html(g.MARKUP);g.$diapContainer=$(g._diapContainer);g.btnHome=$("#btnHome",g.$diapContainer)[0];g.$btnHome=$("#btnHome",g.$diapContainer);g.$btnHome.css("visibility","hidden");g.btnPrev=$("#btnPrev",g.$diapContainer)[0];g.$btnPrev=$("#btnPrev",g.$diapContainer);g.$btnPrev.css("visibility","hidden");g.btnNext=$("#btnNext",g.$diapContainer)[0];g.$btnNext=$("#btnNext",g.$diapContainer);g.btnPlayPause=$("#btnPlayPause",g.$diapContainer)[0];g.$btnPlayPause=$("#btnPlayPause",g.$diapContainer);g.btnMuteOnOff=$("#btnMuteOnOff",g.$diapContainer)[0];g.$btnMuteOnOff=$("#btnMuteOnOff",g.$diapContainer);var f=$($(g._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];g._waterMark=$(f).children(".dp_watermark")[0];g.btnHomeEnabled=false;g.btnNextEnabled=true;g.btnPrevEnabled=false;g.btnPlayPauseEnabled=true;g.btnMuteOnOffEnabled=true;g.$btnHome.click(function(h){h.stopImmediatePropagation();h.preventDefault();g.onToolbarItemSelected(g.btnHome)});g.$btnPrev.click(function(h){h.stopImmediatePropagation();h.preventDefault();g.onToolbarItemSelected(g.btnPrev)});g.$btnNext.click(function(h){h.stopImmediatePropagation();h.preventDefault();g.onToolbarItemSelected(g.btnNext)});g.$btnPlayPause.click(function(h){h.stopImmediatePropagation();h.preventDefault();g.onToolbarItemSelected(g.btnPlayPause)});g.$btnMuteOnOff.click(function(h){h.stopImmediatePropagation();h.preventDefault();g.onToolbarItemSelected(g.btnMuteOnOff)});TouchComp.init();g._diapContainer.addEventListener("click",function(h){g._isDiapoClick==true;g.onDiapoMouseDown()},false);if(TouchComp.isTouchDevice()){g.btnHome.addEventListener("touchstart",function(h){if(g.btnHomeEnabled==false){h.preventDefault();h.stopPropagation()}},false);g.btnPrev.addEventListener("touchstart",function(h){if(g.btnPrevEnabled==false){h.preventDefault();h.stopPropagation()}},false);g.btnNext.addEventListener("touchstart",function(h){if(g.btnNextEnabled==false){h.preventDefault();h.stopPropagation()}},false);g.btnPlayPause.addEventListener("touchstart",function(h){if(g.btnPlayPauseEnabled==false){h.preventDefault();h.stopPropagation()}},false);g.btnMuteOnOff.addEventListener("touchstart",function(h){if(g.btnMuteOnOffEnabled==false){h.preventDefault();h.stopPropagation()}},false)}if(window.attachEvent){window.attachEvent("onresize",function(){g.onResizeEvent()})}else{if(window.addEventListener){window.addEventListener("resize",function(){g.onResizeEvent()},true)}}g.loadXML(g._sourceURL+"data/datos.xml?time="+new Date().getTime())};this.onResizeEvent=function(){var d=this;if(d._isIOS){setTimeout(function(){d.reposition()},500)}else{d.reposition()}};this.clearText=function(d){var f=this;var e=$($(f._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];$(e).children(".dptext").each(function(){$(this).remove()})};this.setText=function(d){var f=this;var e=$($(f._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];$(e).append(d)};this.setPreloadedImage=function(d){var f=this;d.className="diapo_image";var e=$($(f._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];d.height=$(e).height();var g=$(e).children(".diapo_image")[0];if(g){e.removeChild(g)}e.appendChild(d)};this.getSrcImagen=function(f){if(f==""){return pppPreloader.from("module","motor/images/nobk.png")}var e=this;var d=f;if(f.indexOf(".")==0){d=f.substring(1,f.length)}if(d.indexOf("/")!=0){d="/"+d}return e._sourceURL+"data/imagenes"+d};this.getSrcSonido=function(f){var e=this;var d=f;if(f.indexOf(".")==0){d=f.substring(1,f.length)}if(d.indexOf("/")!=0){d="/"+d}return e._sourceURL+"data/sonidos"+d};this.createDOMElement=function(d,f){var e=document.createElement(d);e.className=f;return e};this.addElemToDOM=function(f,d){var e=f;if(e){e.appendChild(d)}};this.removeDOMDiaporama=function(d){this._diapContainer.removeChild(d);d=null;delete d};this.createDiapoManager=function(f){var g=this;var e;var d=false;if(XDOM.valueOfNode(f,"@autoplay")=="true"||XDOM.valueOfNode(f,"@autoplay")==true){d=true}g._autoplay=d;e=new pppDiapoManager(g);if(g._cannotAutoPlay){d=false;g.$btnPlayPause.remove()}else{if(g._autoplay==false){g.$btnPlayPause.remove()}else{if(g.$btnPlayPause.hasClass("cepda-play-button")){g.$btnPlayPause.removeClass("cepda-play-button").addClass("cepda-pause-button")}else{g.$btnPlayPause.removeClass("cepda-pause-button").addClass("cepda-play-button")}}}e.init(f,d);return e};this.positionToolbar=function(e){var f=this;var o,r,m,h;var j;var g;var l;if(XDOM.valueOfNode(e,"@toolbarAlign")!=""){f._toolbarAlign=XDOM.valueOfNode(e,"@toolbarAlign")}if(XDOM.valueOfNode(e,"@toolbarColor")!=""){f._toolbarColor=XDOM.valueOfNode(e,"@toolbarColor")}if(XDOM.valueOfNode(e,"@toolbarMargin")!=""){f._toolbarMargin=XDOM.valueOfNode(e,"@toolbarMargin").split(",",4)}else{f._toolbarMargin=new Array(0,0,0,0)}o=f._toolbarMargin[0];r=f._toolbarMargin[1];m=f._toolbarMargin[2];h=f._toolbarMargin[3];if(XDOM.valueOfNode(e,"@toolbarCounter")=="true"||XDOM.valueOfNode(e,"@toolbarCounter")==true){f._toolbarCounter=true}else{f._toolbarCounter=false}if(XDOM.valueOfNode(e,"@toolbarCounterColor")!=""){f._toolbarCounterColor=XDOM.valueOfNode(e,"@toolbarCounterColor")}switch(f._toolbarAlign){case"LeftTop":j="topleft";g="left";l="top";break;case"LeftCenter":j="centerleft";g="left";l="center";break;case"LeftBottom":j="bottomleft";g="left";l="bottom";break;case"CenterTop":j="topcenter";g="center";l="top";break;case"CenterCenter":j="centercenter";g="center";l="center";break;case"CenterBottom":j="bottomcenter";g="center";l="bottom";break;case"RightTop":j="topright";g="right";l="top";break;case"RightCenter":j="centerright";g="right";l="center";break;case"RightBottom":j="bottomright";g="right";l="bottom";break;default:j="bottomleft";g="left";l="bottom";break}var p=$($(f._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];var k=$($($(p).children(".dptoolbar")[0]).find("td")[0]);k.attr("valign",l);k.css("text-align",g);$(k.children(".toolbar_panel")[0]).css("margin-left",o+"px");$(k.children(".toolbar_panel")[0]).css("margin-right",m+"px");$(k.children(".toolbar_panel")[0]).css("margin-top",r+"px");$(k.children(".toolbar_panel")[0]).css("margin-bottom",h+"px");$(k.children(".toolbar_panel")[0]).addClass(j);$(k.children(".toolbar_panel")[0]).css("visibility","visible");if(f._toolbarColor=="Black"){if($($(f._diapContainer).children(".html_diaporama")[0]).hasClass("white")==false){$($(f._diapContainer).children(".html_diaporama")[0]).removeClass("white")}}else{if(f._toolbarColor=="White"){if($($(f._diapContainer).children(".html_diaporama")[0]).hasClass("white")==false){$($(f._diapContainer).children(".html_diaporama")[0]).addClass("white")}}}if(f._toolbarCounter==true){var i;var s=18;var n="Verdana";var g="left";var q=10;if(f._toolbarCounterColor=="Black"){i="#000000"}else{i="#FFFFFF"}var d='<span class="dpcounter" style="color: '+i+"; font-size: "+s+"px; font-family: "+n+"; text-align: "+g+"; margin-left: "+q+'px; "></span>';$(k.children(".toolbar_panel")[0]).append(d)}if(f._debug==true){var i;var s=18;var n="Arial";var g="left";var q=10;if(f._toolbarCounterColor=="Black"){i="#000000"}else{i="#FFFFFF"}var d='<span class="dpdebug" style="color: '+i+"; font-size: "+s+"px; font-family: "+n+"; text-align: "+g+"; margin-left: "+q+'px; "></span>';$(k.children(".toolbar_panel")[0]).append(d)}};this.positionWatermark=function(){var d=this;if(d._waterMark!=null){$(d._waterMark).css("right","40px");$(d._waterMark).css("bottom","40px");$(d._waterMark).css("display","block");$(d._waterMark).css("visibility","visible");if($(d._waterMark).hasClass("watermark")==false){$(d._waterMark).addClass("watermark")}}};this.loadXML=function(d){var e=this;XDOM.newXMLFromURL(d,function(f){e._diapoManager=e.createDiapoManager(f);e._toolbar=e.positionToolbar(f);if(e.$btnMuteOnOff.hasClass("cepda-muteon-button")){e.$btnMuteOnOff.removeClass("cepda-muteon-button")}e.$btnMuteOnOff.addClass("cepda-muteoff-button");e.$btnMuteOnOff.css("visibility","hidden");if(XDOM.valueOfNode(f,"@nwm")!=="true"||XDOM.valueOfNode(f,"@nwm")!==true){e.positionWatermark()}e.reposition();e._diapoManager.start();e._actionsReady=true},function(g,f){alert("Error al intentar procesar el archivo XML:\n- Status: "+g+".\n -Error: "+f)})};this.reposition=function(){var g=this;var n=$($(g._diapContainer).children(".html_diaporama")[0]).children(".diap_container")[0];if(n){var h=$(g._diapContainer);var p=h.width();var m=h.height();if(g._needPatch){var l=g.patchContainerSize();m=l.y;if(g._isIOS){p=l.x}}if(g.w!=p||g.h!=m){$(g._diapContainer).css("visibility","hidden");var i=$(n).width();var f=$(n).height();var k;var e;var o=g.getScaledDimensions(p,m,n);k=o.x;e=o.y;var d=k/i;var q=e/f;var j=$(n);j.css("-ms-transform-origin","0 0");j.css("-ms-transform-origin-x","0px");j.css("-ms-transform-origin-y","0px");j.css("-webkit-transform-origin-x","0px");j.css("-webkit-transform-origin-y","0px");j.css("-moz-transform-origin-x","0px");j.css("-moz-transform-origin-y","0px");j.css("-o-transform-origin-x","0px");j.css("-o-transform-origin-y","0px");j.css("transform-origin-x","0px");j.css("transform-origin-y","0px");j.css("transform-origin","0 0");j.css("-ms-transform","scale("+d+","+q+")");j.css("-moz-transform","scale("+d+","+q+")");j.css("-o-transform","scale("+d+","+q+")");j.css("-webkit-transform","scale("+d+","+q+")");j.css("transform","scale("+d+","+q+")");j.css("margin-left",(p/2-(i*d)/2)+"px");j.css("top",(m/2-(f*q)/2)+"px");g.w=p;g.h=m;$(g._diapContainer).css("visibility","visible")}}};this.getScaledDimensions=function(j,h,g){var f=g;var d=j;var k=h;var i=f.offsetWidth;var e=f.offsetHeight;var l={x:0,y:0};if(d/k>i/e){l.y=k;l.x=i*(k/e)}else{l.x=d;l.y=e*(d/i)}return l};this.forcePause=function(){var d=this;if(!d._diapoManager.isPaused()){if(d._autoplay==true){if(d.$btnPlayPause.hasClass("cepda-pause-button")){d.$btnPlayPause.removeClass("cepda-pause-button")}d.$btnPlayPause.addClass("cepda-play-button")}d._diapoManager.playPause()}};this.onDiapoMouseDown=function(f){var d=this;d.onToolbarItemSelected(d.btnNext)};this.onToolbarItemSelected=function(d){var e=this;if(d.name=="Home"){e.$btnHome.css("visibility","hidden");e.$btnPrev.css("visibility","hidden");e.btnHomeEnabled=false;e.btnPrevEnabled=false;if(e._diapoManager._curDiapo==e._diapoManager._diapoList.length-1){e.$btnPlayPause.css("visibility","visible");e.$btnNext.css("visibility","visible");e.btnPlayPauseEnabled=true;e.btnNextEnabled=true}if(e.$btnPlayPause.hasClass("cepda-pause-button")){e.$btnPlayPause.removeClass("cepda-pause-button").addClass("cepda-play-button")}e.forcePause();e._diapoManager.firstDiapo()}else{if(d.name=="Prev"){if(e._diapoManager._curDiapo==1){e.$btnHome.css("visibility","hidden");e.$btnPrev.css("visibility","hidden");e.btnHomeEnabled=false;e.btnPrevEnabled=false}if(e._diapoManager._curDiapo==e._diapoManager._diapoList.length-1){e.$btnPlayPause.css("visibility","visible");e.$btnNext.css("visibility","visible");e.btnPlayPauseEnabled=true;e.btnNextEnabled=true}if(e.$btnPlayPause.hasClass("cepda-pause-button")){e.$btnPlayPause.removeClass("cepda-pause-button").addClass("cepda-play-button")}e.forcePause();e._diapoManager.prevDiapo()}else{if(d.name=="Next"){if(e._diapoManager._curDiapo==0){e.$btnHome.css("visibility","visible");e.$btnPrev.css("visibility","visible");e.btnHomeEnabled=true;e.btnPrevEnabled=true}if(e._diapoManager._curDiapo==e._diapoManager._diapoList.length-2){e.$btnNext.css("visibility","hidden");e.$btnPlayPause.css("visibility","hidden");e.btnNextEnabled=false;e.btnPlayPauseEnabled=false;if(e.$btnPlayPause.hasClass("cepda-pause-button")){e.$btnPlayPause.removeClass("cepda-pause-button").addClass("cepda-play-button")}}e.forcePause();e._diapoManager.nextDiapo()}else{if(d.name=="PlayPause"){e._diapoManager.playPause();if(e.$btnPlayPause.hasClass("cepda-play-button")){e.$btnPlayPause.removeClass("cepda-play-button").addClass("cepda-pause-button")}else{e.$btnPlayPause.removeClass("cepda-pause-button").addClass("cepda-play-button")}}else{if(d.name=="MuteOnOff"){e._diapoManager.toggleAudio();if(e.$btnMuteOnOff.hasClass("cepda-muteon-button")){e.$btnMuteOnOff.removeClass("cepda-muteon-button").addClass("cepda-muteoff-button")}else{e.$btnMuteOnOff.removeClass("cepda-muteoff-button").addClass("cepda-muteon-button")}}}}}}};this.styleToObject=function(g){var h=g.split(";");var f;var e=new Object();for(f=0;f<h.length;f++){var d=h[f].trim();if(d==""){continue}var j=h[f].split(":");e[j[0].toLowerCase().trim()]=j[1].toLowerCase().trim()}return e};this.needContainerSizePatch=function(){var f=this;if($(f._diapContainer).parent().is("body")==false){return false}var e=$(f._diapContainer).attr("style");if(e){var d=this.styleToObject(e);if(d.height=="100%"){return true}}return false};this.patchContainerSize=function(){var d=window.innerWidth?window.innerWidth:$(window).width();var g=window.innerHeight?window.innerHeight:$(window).height();var f="none";if(this._isIOS){var e=window;while(e.parent!=null&&e.parent!=e){e=e.parent}if(e.orientation==0||e.orientation==180){if(d>768){d=768}f="v:"+e.orientation}else{f="h: "+e.orientation}}return{x:d,y:g}}};