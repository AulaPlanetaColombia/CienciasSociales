/* VERSION : 15.1.12.1 */ 
Contenedor=new function(){this.MOTOR_Y=118;this.FONS_MOTOR_H=440;this.TITLE_MOTOR_X=180;this.TITLE_MOTOR_Y=12;this.LOGO_PLANETA_X=130;this.LOGO_PLANETA_Y=5;this.LOGO_PLANETA_SCALE=0.13;this.PLANETA_X=14;this.PLANETA_Y=8;this.PLANETA_X2=55;this.FONS_TITLE_Y=41;this.FONS_TITLE_HEIGHT=76;this.TANCAR_X=915;this.TANCAR_Y=10;this.TITLE_ACT_X=25;this.TITLE_ACT_Y=52;this.TITLE_ACT_W=775;this.TITLE_ACT_H=25;this.MOREINFO_SIZE=22;this.MOREINFO_X1=815;this.MOREINFO_X2=915;this.MOREINFO_Y=48;this.CALC_X1=811;this.CALC_X2=911;this.CALC_Y=75;this.SEPARATOR_Y=41;this.SEPARATOR_X=850;this.SEPARATOR_HEIGHT=76;this.CLOCK_TITLE_X=855;this.CLOCK_TITLE_Y=63;this.CLOCK_X=860;this.CLOCK_Y=72;this.fons="";this.fonsGeneral="";this.fonsTitol="";this.title_planeta_1="";this.title_planeta_2="";this.logo_planeta="";this.title_motor="";this.tancar="";this.title_exercici="";this.mesInfo="";this.calc="";this.separador="";this.titleClock="";this.clock="";this.DEFAULT_TIME=0;this.time=0;this.timer="";this.timeRevision="";this.validar="";this.corregir="";this.missatge="";this.moreinfopanel="";this.num_pagines=0;this.reiniciar=false;this.datosXML="";this.obtenerPrincipal_mc=function(a){};this.obtenerNoRandom=function(){};this.obtenerIdioma=function(){};this.motorCompletado=function(){};this.paginaCompletada=function(){};this.motorCambioPagina=function(a){};this.crearPaginacio=function(){Contenedor.num_pagines=Motor.numPaginas();this.drawFooter();if((this.reiniciar&&Scorm.modo==Scorm.MODO_REVISAR)||(!this.reiniciar&&(Scorm.modo==Scorm.MODO_REVISAR||Scorm.modo==Scorm.MODO_REVISARALUMNO))){Motor.estado=Scorm.suspend_data;Motor.revisar();Motor.desactivar();Contenedor.deleteHeaderDown();Contenedor.drawHeaderDown();Contenedor.validacioResultatsHandler(null)}};this.cargarDatos=function(){$.get("data/datos.xml",function(f){Contenedor.datosXML=new datosContenedor();var c=$(f).find("motor");Contenedor.datosXML.tipo=c.attr("tipo");Contenedor.datosXML.classe=c.attr("classe");var j=c.children("enunciado");var k=j.text();k=k.replace(/</g,"{{lt}}");k=k.replace(/>/g,"{{lg}}");Contenedor.datosXML.enunciado=k;var d=$(f).find("temps");Contenedor.datosXML.temps=d.text();var e=$(f).find("calc");Contenedor.datosXML.calc=e.text();var b=$(f).find("sinaleatoriedad");Contenedor.datosXML.sinaleatoriedad=b.text();var g=$(f).find("respuestaunica");Contenedor.datosXML.respuestaunica=g.text();var a=$(f).find("masinfo");Contenedor.datosXML.masinfo.text=a.text();Contenedor.datosXML.masinfo.inicio=a.attr("inicio");var h=$(f).find("plataforma");Contenedor.datosXML.plataforma.grado=h.find("grado").text();Contenedor.datosXML.plataforma.titulo=h.find("titulo").text();Contenedor.datosXML.plataforma.lang=h.find("lang").text();Contenedor.inicializarEstructura();Motor.cargarDatos();Contenedor.settingsCalc()})};this.settingsCalc=function(){if(Contenedor.datosXML.plataforma.grado==1){$("#calculator").calculator()}else{$("#calculator").calculator({layout:$.calculator.scientificLayout})}};this.inicializarEstructura=function(){if(Contenedor.datosXML.plataforma.lang==""){LangRes.init()}else{LangRes.setLang(Contenedor.datosXML.plataforma.lang)}this.drawBackGround();this.drawHeaderUp();this.drawHeaderDown()};this.drawBackGround=function(){this.drawFonsGeneral();this.drawFonsTitol();this.drawFonsMotor()};this.drawHeaderUp=function(){this.drawPlaneta();this.drawTitle();this.drawTancar()};this.drawHeaderDown=function(){this.drawTitleActivity();this.drawMoreInfo();this.drawCalculator();this.drawSeparator();this.drawClock()};this.drawFooter=function(){Contenedor.missatge=new inicialPanell(Contenedor.num_pagines);Contenedor.missatge.validar.bt.on("mousedown",Contenedor.validaHandler);Contenedor.missatge.corregir.bt.on("mousedown",Contenedor.corregirHandler);if(Contenedor.num_pagines>1){for(key in Contenedor.missatge.pagines.pags){Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key])}Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}};this.seguentPaginaHandler=function(a){if(a.primary){Contenedor.missatge.seguentPag();Motor.ponerPagina(Motor.currentNumPag+2)}};this.selectPagHandler=function(a){if(a.primary){Contenedor.missatge.unselectCurrentPag();Contenedor.missatge.selectPag(this.num);Motor.ponerPagina(this.num)}};this.validaHandler=function(a){if(a.primary){Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_REINTENTAR]);Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.reiniciarHandler);Contenedor.missatge.cancelar.bt.on("mousedown",Contenedor.cancelHandler);Motor.desactivar()}};this.cancelHandler=function(a){if(a.primary){Contenedor.drawFooter();if(Contenedor.time>0){Motor.activar()}else{if(Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps!="0"&&Scorm.modo!=Scorm.MODO_EXAMEN){Motor.activar()}else{if(Contenedor.datosXML.temps==""||Contenedor.datosXML.temps=="0"){Motor.activar()}}}}};this.reiniciarHandler=function(a){if(a.primary){clearInterval(Contenedor.timer);Contenedor.time=Contenedor.DEFAULT_TIME;Main.stage.removeChild(Contenedor.titleClock);Main.stage.removeChild(Contenedor.clock);Contenedor.solucionat=false;if(Scorm.modo==Scorm.MODO_EXAMEN){Contenedor.drawClock()}Contenedor.drawFooter();Contenedor.reiniciar=true;Motor.reinicializarEstructuraMotor()}};this.corregirHandler=function(a){if(a.primary){clearInterval(Contenedor.timer);if(Scorm.modo==Scorm.MODO_EXAMEN){if(Motor.estaCompletado()){Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_VALIDAR])}else{Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_VALIDARSINRESPONDER])}Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.validacioResultatsHandler);Contenedor.missatge.cancelar.bt.on("mousedown",Contenedor.cancelCorrectHandler)}else{Contenedor.validacioResultatsHandler(null)}Motor.desactivar()}};this.validacioResultatsHandler=function(a){if(a==null||a.primary){var h=Motor.validar();var b=h.split("/");var g=b[0];var c=b[1];var f="";var d="";if(a==null){d=Contenedor.getTempsRevision();f=Contenedor.timeRevision;if(Scorm.modo==Scorm.MODO_REVISAR){this.clock.text=f}}else{f=Contenedor.getTemps();d=Contenedor.getTempsUsat()}if(Scorm.modo==Scorm.MODO_EXAMEN){var e=Motor.getEstado();if(Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps>0){e="["+f+"]["+e+"]"}console.log(e+" - "+0+" - "+c+" - "+g+" - "+f);aulaPlaneta.SCORM.ejercicio_enviar_resultado(e,0,c,g,f)}else{if(Scorm.modo==Scorm.MODO_REVISAR||Scorm.modo==Scorm.MODO_REVISARALUMNO){clearInterval(Contenedor.timer)}}Contenedor.missatge=new resultatsPanell(g,c,d);Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.resultatAceptarHandler)}};this.resultatAceptarHandler=function(a){if(a.primary){this.num_pagines=Motor.numPaginas();Contenedor.missatge=new solucioPanell(this.num_pagines);Contenedor.missatge.solucio.bt.on("mousedown",Contenedor.solucioHandler);if(Scorm.modo!=Scorm.MODO_REVISAR){Contenedor.missatge.reintentar.bt.on("mousedown",Contenedor.preReiniciarHandler)}if(Scorm.modo==Scorm.MODO_EXAMEN||Scorm.modo==Scorm.MODO_REVISARALUMNO){Scorm.modo=Scorm.MODO_EXPONER}if(Contenedor.num_pagines>1){for(key in Contenedor.missatge.pagines.pags){Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key])}Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}}};this.preReiniciarHandler=function(a){if(a.primary){Contenedor.missatge=new missatgePanell(LangRes.lang[LangRes.MSG_REINTENTAR_AREVIEW]);Contenedor.missatge.cancelar.bt.on("mousedown",Contenedor.returnSolucioHandler);Contenedor.missatge.aceptar.bt.on("mousedown",Contenedor.reiniciarHandler)}};this.returnSolucioHandler=function(a){if(a.primary){this.num_pagines=Motor.numPaginas();Contenedor.missatge=new solucioPanell(this.num_pagines);Contenedor.missatge.solucio.bt.on("mousedown",Contenedor.solucioHandler);Contenedor.missatge.reintentar.bt.on("mousedown",Contenedor.preReiniciarHandler);if(Contenedor.solucionat){Contenedor.missatge.solucio.bt.visible=false}if(Contenedor.num_pagines>1){for(key in Contenedor.missatge.pagines.pags){Contenedor.missatge.pagines.pags[key].bt.on("mousedown",Contenedor.selectPagHandler,Contenedor.missatge.pagines.pags[key])}Contenedor.missatge.seguent.bt.on("mousedown",Contenedor.seguentPaginaHandler)}}};this.solucioHandler=function(a){if(a.primary){Contenedor.missatge.solucio.bt.visible=false;Contenedor.solucionat=true;Motor.verSolucion()}};this.cancelCorrectHandler=function(a){if(a.primary){Main.stage.removeChild(Contenedor.missatge.contenedor);Contenedor.drawFooter();if(Contenedor.time>0){Contenedor.timer=setInterval(Contenedor.updateClock,1000);Motor.activar()}else{if(Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps!="0"&&Scorm.modo!=Scorm.MODO_EXAMEN){Motor.activar()}else{if(Contenedor.datosXML.temps==""||Contenedor.datosXML.temps=="0"){Motor.activar()}}}}};this.deleteHeaderDown=function(){Main.stage.removeChild(this.titleClock);Main.stage.removeChild(this.clock);Main.stage.removeChild(this.separador);Main.stage.removeChild(this.calc);Main.stage.removeChild(this.mesInfo)};this.drawClock=function(){if((Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN)||(Contenedor.timeRevision!=""&&Scorm.modo==Scorm.MODO_REVISAR)){Contenedor.time=Contenedor.datosXML.temps*60;this.titleClock=new createjs.RichText();this.titleClock.font="bold 10px Arial";this.titleClock.color="#E1001A";this.titleClock.text=LangRes.lang[LangRes.TIEMPORESTANTE];this.titleClock.y=this.CLOCK_TITLE_Y;this.titleClock.x=this.CLOCK_TITLE_X;Main.stage.addChild(this.titleClock);this.clock=new createjs.RichText();this.clock.font="34px Arial";this.clock.color="#E1001A";this.clock.text="00:00";this.clock.y=this.CLOCK_Y;this.clock.x=this.CLOCK_X;Main.stage.addChild(this.clock);if(Scorm.modo==Scorm.MODO_EXAMEN){var b=Math.floor(Contenedor.time/60);var a=Contenedor.time-b*60;b=Utils.lPad(b.toString(),2);a=Utils.lPad(a.toString(),2);this.clock.text=b+":"+a;Contenedor.timer=setInterval(this.updateClock,1000)}}};this.getTempsRevision=function(){var d=Contenedor.timeRevision.split(":");var c=parseInt(d[0])*60+parseInt(d[1]);if(Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps>0){var e=Contenedor.datosXML.temps*60;var f=e-c;if(f<0){return"00:00"}var b=Math.floor(f/60);var a=f-b*60;b=Utils.lPad(b.toString(),2);a=Utils.lPad(a.toString(),2);return b+":"+a}else{return"00:00"}};this.getTemps=function(){if(Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps>0){var c=Contenedor.time;var b=Math.floor(c/60);var a=c-b*60;b=Utils.lPad(b.toString(),2);a=Utils.lPad(a.toString(),2);return b+":"+a}else{return"00:00"}};this.getTempsUsat=function(){if(Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps>0){var c=Contenedor.datosXML.temps*60;var d=c-Contenedor.time;var b=Math.floor(d/60);var a=d-b*60;b=Utils.lPad(b.toString(),2);a=Utils.lPad(a.toString(),2);return b+":"+a}else{return"00:00"}};this.updateClock=function(){if(Contenedor.time>0){Contenedor.time--;var b=Math.floor(Contenedor.time/60);var a=Contenedor.time-b*60;b=Utils.lPad(b.toString(),2);a=Utils.lPad(a.toString(),2);Contenedor.clock.text=b+":"+a}else{clearInterval(Contenedor.timer);if(Contenedor.missatge!=""){Main.stage.removeChild(Contenedor.missatge.contenedor);Contenedor.missatge=""}Contenedor.missatge=new confirmaPanell(LangRes.lang[LangRes.MSG_AGOTADOTIEMPO]);Contenedor.missatge.reiniciar.bt.on("mousedown",Contenedor.reiniciarHandler);Contenedor.missatge.corregir.bt.on("mousedown",Contenedor.corregirHandler);Motor.desactivar()}};this.drawSeparator=function(){if((Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN)||(Contenedor.timeRevision!=""&&Scorm.modo==Scorm.MODO_REVISAR)){this.separador=new createjs.Shape();this.separador.graphics.beginStroke("#C5C6C8").setStrokeStyle(1);this.separador.graphics.moveTo(this.SEPARATOR_X,this.SEPARATOR_Y);this.separador.graphics.lineTo(this.SEPARATOR_X,this.SEPARATOR_Y+this.SEPARATOR_HEIGHT);this.separador.graphics.endStroke();Main.stage.addChild(this.separador)}};this.drawCalculator=function(){if(this.datosXML.calc=="1"){var a=new Image();a.src="motor/images/calculadora.png";a.name="calc";this.calc=new createjs.Bitmap(a);if((Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN)||(Contenedor.timeRevision!=""&&Scorm.modo==Scorm.MODO_REVISAR)){this.calc.x=this.CALC_X1+4;this.calc.y=this.CALC_Y+2}else{this.calc.x=this.CALC_X2+4;this.calc.y=this.CALC_Y+2}this.calc.scaleX=0.7;this.calc.scaleY=0.7;this.calc.on("mousedown",this.calcHandler);this.calc.on("mouseover",function(){document.body.style.cursor="pointer"},this);this.calc.on("mouseout",function(){document.body.style.cursor="default"},this);Main.stage.addChild(this.calc);this.calcContenedor=new createjs.Container();this.calculadora=new createjs.DOMElementCustom("calculator",this.calcContenedor);if(Contenedor.datosXML.plataforma.grado==1){this.calculadora.element_x=1600;this.calculadora.element_y=150;this.calculadora.element_width=245;this.calculadora.element_height=250;this.calculadora.x=this.calculadora.element_x;this.calculadora.y=this.calculadora.element_y;$(this.calculadora.htmlElement).css("width",230);$(this.calculadora.htmlElement).css("height",225)}else{this.calculadora.element_x=1600;this.calculadora.element_y=150;this.calculadora.element_width=425;this.calculadora.element_height=345;this.calculadora.x=this.calculadora.element_x;this.calculadora.y=this.calculadora.element_y;$(this.calculadora.htmlElement).css("width",425);$(this.calculadora.htmlElement).css("height",345)}$(Contenedor.calculadora.htmlElement).css("display","none");this.calcContenedor.addChild(this.calculadora);Main.stage.addChild(this.calcContenedor)}else{this.calculadora=new createjs.DOMElementCustom("calculator",this.calcContenedor);$(this.calculadora.htmlElement).css("display","none")}};this.calcHandler=function(a){if(a.primary){if(Contenedor.calculadora.element_x==1600){$(Contenedor.calculadora.htmlElement).css("display","inline");createjs.Tween.get(Contenedor.calculadora).to({element_x:500,element_y:150},1250,createjs.Ease.circOut)}else{$(Contenedor.calculadora.htmlElement).css("display","none");Contenedor.calculadora.element_x=1600;Contenedor.calculadora.element_y=150;createjs.Tween.removeTweens(Contenedor.calculadora)}}};this.drawMoreInfo=function(){if(this.datosXML.masinfo.text!=""){var b=new Image();b.src="motor/images/mesInfo.png";b.name="tancar";var c={images:[b],frames:{width:this.MOREINFO_SIZE,height:this.MOREINFO_SIZE},animations:{normal:[0],hover:[1]}};var a=new createjs.SpriteSheet(c);this.mesInfo=new createjs.Sprite(a);this.mesInfo.on("mouseover",function(d){this.gotoAndStop("hover")});this.mesInfo.on("mouseout",function(d){this.gotoAndStop("normal")});this.mesInfo.on("mousedown",this.masInfoHandler);if((Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN)||(Contenedor.timeRevision!=""&&Scorm.modo==Scorm.MODO_REVISAR)){this.mesInfo.x=this.MOREINFO_X1;this.mesInfo.y=this.MOREINFO_Y}else{this.mesInfo.x=this.MOREINFO_X2;this.mesInfo.y=this.MOREINFO_Y}this.mesInfo.gotoAndStop("normal");Main.stage.addChild(this.mesInfo);this.mesInfo.on("mouseover",function(){document.body.style.cursor="pointer"},this);this.mesInfo.on("mouseout",function(){document.body.style.cursor="default"},this);if(this.datosXML.masinfo.inicio=="1"){setTimeout(function(){Contenedor.masInfoHandler(null)},500)}if(!$("#input_moreInfo").length){texto=Utils.cleanText(Contenedor.datosXML.masinfo.text);this.$inputText=$('<div id="input_moreInfo" style="display:none;"><span class="spanMoreInfo">'+texto+"</span></div>");this.$inputText.focusout(function(d){$("body").focus()});$("#mediaHolder").append(this.$inputText)}}};this.masInfoHandler=function(a){if(a.primary){if(Contenedor.moreinfopanel==""){Contenedor.moreinfopanel=new moreInfoPanell(Contenedor.datosXML.masinfo.text);$(Contenedor.$inputText).css("display","inline");Contenedor.moreinfopanel.contenedor.on("mousedown",Contenedor.tancarMasInfoHandler);Main.stage.setChildIndex(Contenedor.moreinfopanel.contenedor,Main.stage.getNumChildren());Motor.hideDomObjects()}}};this.tancarMasInfoHandler=function(a){if(a.primary){Main.stage.removeChild(Contenedor.moreinfopanel.contenedor);$(Contenedor.$inputText).css("display","none");Contenedor.moreinfopanel="";Motor.showDomObjects()}};this.drawTitleActivity=function(){this.title_exercici=new createjs.RichText();this.title_exercici.font=(Contenedor.datosXML.plataforma.grado==1)?"20px Arial":"18px Arial";this.title_exercici.color="#0D3158";this.title_exercici.fontSize=20;this.title_exercici.text=Contenedor.datosXML.enunciado;this.title_exercici.y=this.TITLE_ACT_Y;this.title_exercici.x=this.TITLE_ACT_X;this.title_exercici.lineWidth=this.TITLE_ACT_W;this.title_exercici.lineHeight=this.TITLE_ACT_H;Main.stage.addChild(this.title_exercici)};this.drawTancar=function(){var a=new Image();a.src="motor/images/tancar.png";a.name="tancar";this.tancar=new createjs.Bitmap(a);this.tancar.x=this.TANCAR_X;this.tancar.y=this.TANCAR_Y;this.tancar.on("mousedown",this.tancarGHandler);this.tancar.on("mouseover",function(){document.body.style.cursor="pointer"},this);this.tancar.on("mouseout",function(){document.body.style.cursor="default"},this);Main.stage.addChild(this.tancar)};this.tancarGHandler=function(a){aulaPlaneta.SCORM.ejercicio_cerrar()};this.drawTitle=function(){this.title_motor=new createjs.RichText();this.title_motor.font="15px Arial";this.title_motor.color="#fff";this.title_motor.text=Contenedor.datosXML.plataforma.titulo;this.title_motor.y=this.TITLE_MOTOR_Y;this.title_motor.x=this.TITLE_MOTOR_X;Main.stage.addChild(this.title_motor)};this.drawPlaneta=function(){this.title_planeta_1=new createjs.RichText();this.title_planeta_1.font="22px Arial";this.title_planeta_1.color="#fff";this.title_planeta_1.text="aula";this.title_planeta_1.y=this.PLANETA_Y;this.title_planeta_1.x=this.PLANETA_X;Main.stage.addChild(this.title_planeta_1);this.title_planeta_2=new createjs.RichText();this.title_planeta_2.font="22px Arial";this.title_planeta_2.color="#009ee0";this.title_planeta_2.text="Planeta";this.title_planeta_2.y=this.PLANETA_Y;this.title_planeta_2.x=this.PLANETA_X2;Main.stage.addChild(this.title_planeta_2);var a=new Image();a.src="motor/images/planeta.png";a.name="logo";this.logo_planeta=new createjs.Bitmap(a);this.logo_planeta.x=this.LOGO_PLANETA_X;this.logo_planeta.y=this.LOGO_PLANETA_Y;this.logo_planeta.scaleX=this.LOGO_PLANETA_SCALE;this.logo_planeta.scaleY=this.LOGO_PLANETA_SCALE;Main.stage.addChild(this.logo_planeta)};this.drawFonsTitol=function(){this.fonsTitol=new createjs.Shape();this.fonsTitol.graphics.beginFill("#fff").drawRect(0,0,Main.stage_width,this.FONS_TITLE_HEIGHT);this.fonsTitol.x=0;this.fonsTitol.y=this.FONS_TITLE_Y;Main.stage.addChild(this.fonsTitol)};this.drawFonsGeneral=function(){this.fonsGeneral=new createjs.Shape();this.fonsGeneral.graphics.beginFill("#0D3158").drawRoundRect(0,0,Main.stage_width,Main.stage_height,10);this.fonsGeneral.x=0;this.fonsGeneral.y=0;Main.stage.addChild(this.fonsGeneral)};this.checkPagina=function(){Contenedor.missatge.checkedCurrentPag()};this.drawFonsMotor=function(){this.fons=new createjs.Shape();this.fons.graphics.beginFill("#fde8c2").drawRect(0,0,Main.stage_width,this.FONS_MOTOR_H);this.fons.x=0;this.fons.y=this.MOTOR_Y;Main.stage.addChild(this.fons)}};function Boton(a,d,g,c,h){this.width=a;this.height=d;var e=new Image();e.src=g;var f={images:[e],frames:{width:a,height:d},animations:{normal:[0],hover:[1]}};var b=new createjs.SpriteSheet(f);this.bt=new createjs.Sprite(b);this.bt.on("mouseover",function(j){this.gotoAndStop("hover");document.body.style.cursor="pointer"});this.bt.on("mouseout",function(j){this.gotoAndStop("normal");document.body.style.cursor="default"});this.bt.gotoAndStop("normal");this.label=new createjs.RichText();this.label.font="bold 12px Arial";this.label.color="#0D3158";this.label.text=c;this.label.mouseEnabled=false;if(h=="left"){this.label.x=10}else{if(h=="center"){this.label.x=(a-this.label.getMeasuredWidth())/2}}this.label.y=7;this.contenedor=new createjs.Container();this.contenedor.addChild(this.bt);this.contenedor.addChild(this.label)}function moreInfoPanell(b){this.fons=new createjs.Shape();this.fons.graphics.beginFill("#000").drawRect(0,0,950,567);this.fons.y=41;this.fons.alpha=0.2;this.banda_superior=new createjs.Shape();this.banda_superior.graphics.beginFill("#0D3158").drawRect(0,0,650,32);this.banda_superior.x=150;this.banda_superior.y=100;this.banda_central=new createjs.Shape();this.banda_central.graphics.beginFill("#fff").drawRect(0,0,650,405);this.banda_central.x=150;this.banda_central.y=132;this.banda_inferior=new createjs.Shape();this.banda_inferior.graphics.beginFill("#0D3158").drawRect(0,0,650,13);this.banda_inferior.x=150;this.banda_inferior.y=537;var a=new Image();a.src="motor/images/tancar.png";a.name="tancar";this.tancar=new createjs.Bitmap(a);this.tancar.x=773;this.tancar.y=105;this.titol=new createjs.RichText();this.titol.font="18px Arial";this.titol.color="#fff";this.titol.text=LangRes.lang[LangRes.MASINFORMACION];this.titol.x=160;this.titol.y=105;this.titol.lineWidth=600;this.titol.mouseEnabled=false;this.contenedor=new createjs.Container();this.contenedor.x=0;this.contenedor.y=0;this["inputDOM0"]=new createjs.DOMElementCustom("input_moreInfo",this.contenedor);this["inputDOM0"].element_x=160;this["inputDOM0"].element_y=140;this["inputDOM0"].fontsize=18;this["inputDOM0"].element_width=615;this["inputDOM0"].element_height=370;this["inputDOM0"].x=this["inputDOM0"].element_x;this["inputDOM0"].y=this["inputDOM0"].element_y;$(this["inputDOM0"].htmlElement).css("width",this["inputDOM0"].element_width);$(this["inputDOM0"].htmlElement).css("height",this["inputDOM0"].element_height);this.contenedor.addChild(this["inputDOM0"]);this.contenedor.addChild(this.fons);this.contenedor.addChild(this.banda_superior);this.contenedor.addChild(this.banda_central);this.contenedor.addChild(this.banda_inferior);this.contenedor.addChild(this.tancar);this.contenedor.addChild(this.titol);this.contenedor.addChild(this.contingut);Main.stage.addChild(this.contenedor);this.contenedor.alpha=0;createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function missatgePanell(a){this.fons=new createjs.Shape();this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51);this.text=new createjs.RichText();this.text.font="15px Arial";this.text.color="#333333";this.text.text=a;this.text.x=15;this.text.y=(a.length<75)?15:8;this.text.lineWidth=530;this.text.lineHeight=20;this.text.mouseEnabled=false;this.contenedor=new createjs.Container();this.contenedor.x=0;this.contenedor.y=558;this.aceptar=new Boton(144,28,"motor/images/btnAceptar.png",LangRes.lang[LangRes.ACEPTAR],"center");this.cancelar=new Boton(144,28,"motor/images/btnCancelar.png",LangRes.lang[LangRes.CANCELAR],"center");this.cancelar.contenedor.x=796;this.cancelar.contenedor.y=12;this.aceptar.contenedor.x=650;this.aceptar.contenedor.y=12;this.contenedor.addChild(this.fons);this.contenedor.addChild(this.text);this.contenedor.addChild(this.aceptar.contenedor);this.contenedor.addChild(this.cancelar.contenedor);Main.stage.removeChild(Contenedor.missatge.contenedor);Main.stage.addChild(this.contenedor);this.contenedor.alpha=0;createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function confirmaPanell(a){this.fons=new createjs.Shape();this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51);this.text=new createjs.RichText();this.text.font="15px Arial";this.text.color="#333333";this.text.text=a;this.text.x=15;this.text.y=8;this.text.lineWidth=530;this.text.lineHeight=20;this.text.mouseEnabled=false;this.contenedor=new createjs.Container();this.contenedor.x=0;this.contenedor.y=558;this.corregir=new Boton(144,28,"motor/images/btnCorregir.png",LangRes.lang[LangRes.CORREGIR],"center");this.reiniciar=new Boton(144,28,"motor/images/btnReiniciar.png",LangRes.lang[LangRes.REINICIAR],"center");this.reiniciar.contenedor.x=796;this.reiniciar.contenedor.y=12;this.corregir.contenedor.x=650;this.corregir.contenedor.y=12;this.contenedor.addChild(this.fons);this.contenedor.addChild(this.text);this.contenedor.addChild(this.reiniciar.contenedor);this.contenedor.addChild(this.corregir.contenedor);Main.stage.removeChild(Contenedor.missatge.contenedor);Main.stage.addChild(this.contenedor);this.contenedor.alpha=0;createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function resultatsPanell(f,c,e){this.fons=new createjs.Shape();this.fons.graphics.beginFill("#f8B334").drawRect(0,0,950,51);this.text1=new createjs.RichText();this.text1.font="bold 16px Arial";this.text1.color="#0D3158";this.text1.text=LangRes.lang[LangRes.RESPCORRECTAS];this.text1.x=15;this.text1.y=16;this.correctes=new createjs.RichText();this.correctes.font="34px Arial";this.correctes.color="#41A62A";this.correctes.text=f.toString();this.correctes.x=(f.toString().length==1)?200:188;this.correctes.y=6;this.text2=new createjs.RichText();this.text2.font="14px Arial";this.text2.color="#0D3158";this.text2.text=LangRes.lang[LangRes.RESPCORRECTAS_DE];this.text2.x=230;this.text2.y=17;this.totals=new createjs.RichText();this.totals.font="34px Arial";this.totals.color="#0D3158";this.totals.text=c.toString();this.totals.x=256;this.totals.y=6;this.text3=new createjs.RichText();this.text3.font="bold 16px Arial";this.text3.color="#0D3158";this.text3.text=LangRes.lang[LangRes.PUNTUACION];this.text3.x=300;this.text3.y=16;this.punts=new createjs.RichText();this.punts.font="34px Arial";this.punts.color="#0D3158";var b=f/c*10;var d=Math.floor(b);var a=b-d;if(a==0){this.punts.text=b.toString()}else{this.punts.text=b.toFixed(1).toString().replace(".",",")}this.punts.x=400;this.punts.y=6;this.contenedor=new createjs.Container();this.contenedor.x=0;this.contenedor.y=558;this.aceptar=new Boton(144,28,"motor/images/btnAceptar.png",LangRes.lang[LangRes.ACEPTAR],"center");this.aceptar.contenedor.x=796;this.aceptar.contenedor.y=14;this.contenedor.addChild(this.fons);this.contenedor.addChild(this.text1);this.contenedor.addChild(this.correctes);this.contenedor.addChild(this.totals);this.contenedor.addChild(this.punts);this.contenedor.addChild(this.text2);this.contenedor.addChild(this.text3);this.contenedor.addChild(this.aceptar.contenedor);if((Contenedor.datosXML.temps!=""&&Contenedor.datosXML.temps>0&&Scorm.modo==Scorm.MODO_EXAMEN)||(Contenedor.timeRevision!=""&&Scorm.modo==Scorm.MODO_REVISAR)){this.text4=new createjs.RichText();this.text4.font="bold 16px Arial";this.text4.color="#0D3158";this.text4.text=LangRes.lang[LangRes.TIEMPOEMPLEADO];this.text4.x=480;this.text4.y=16;this.temps=new createjs.RichText();this.temps.font="34px Arial";this.temps.color="#0D3158";this.temps.text=e;this.temps.x=625;this.temps.y=6;this.contenedor.addChild(this.temps);this.contenedor.addChild(this.text4)}Main.stage.removeChild(Contenedor.missatge.contenedor);Main.stage.addChild(this.contenedor);this.contenedor.alpha=0;createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}function solucioPanell(a){this.fons=new createjs.Shape();this.fons.graphics.beginFill("#0D3158").drawRect(0,0,950,51);this.contenedor=new createjs.Container();this.contenedor.x=0;this.contenedor.y=558;this.currentPag=Motor.currentNumPag;this.numPagines=a;this.reintentar=new Boton(146,29,"motor/images/btnRestaurar.png",LangRes.lang[LangRes.REINTENTAR],"left");this.solucio=new Boton(148,29,"motor/images/btnSolucio.png",LangRes.lang[LangRes.SOLUCION],"left");this.solucio.contenedor.x=786;this.solucio.contenedor.y=12;this.reintentar.contenedor.x=15;this.reintentar.contenedor.y=12;this.contenedor.addChild(this.fons);this.contenedor.addChild(this.text);this.contenedor.addChild(this.solucio.contenedor);if(Scorm.modo!=Scorm.MODO_REVISAR){this.contenedor.addChild(this.reintentar.contenedor)}this.pagines="";if(this.numPagines>1){this.pagines=new Paginador(this.numPagines);this.pagines.contenedor.x=315;this.pagines.contenedor.y=11;this.seguent=new Boton(144,28,"motor/images/btnSeguent.png",LangRes.lang[LangRes.SIGUIENTE],"left");this.seguent.contenedor.x=285+this.numPagines*31+40;this.seguent.contenedor.y=12;this.contenedor.addChild(this.pagines.contenedor);this.contenedor.addChild(this.seguent.contenedor);this.pagines.pags[this.currentPag].bt.gotoAndStop("select");if(this.currentPag==this.numPagines-1){this.seguent.contenedor.visible=false}}Main.stage.removeChild(Contenedor.missatge.contenedor);Main.stage.addChild(this.contenedor);this.contenedor.alpha=0;createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut);if(this.numPagines>1){this.validaPags();this.selectPag(this.currentPag+1)}}solucioPanell.prototype.selectPag=function(a){this.pagines.pags[a-1].bt.gotoAndStop("select");this.currentPag=a-1;if(this.currentPag<this.numPagines-1){this.seguent.contenedor.visible=true}if(this.currentPag==this.numPagines-1){this.seguent.contenedor.visible=false}if(Motor.pagines[this.currentPag].validacio){this.pagines.pags[this.currentPag].numero.color="#41A62A"}else{this.pagines.pags[a-1].numero.color="#E1001A"}};solucioPanell.prototype.unselectCurrentPag=function(){if(Motor.pagines[this.currentPag].validacio){this.pagines.pags[this.currentPag].bt.gotoAndStop("correct")}else{this.pagines.pags[this.currentPag].bt.gotoAndStop("error")}this.pagines.pags[this.currentPag].numero.color="#0D3158"};solucioPanell.prototype.seguentPag=function(){if(this.currentPag<this.numPagines-1){this.unselectCurrentPag();this.currentPag++;this.pagines.pags[this.currentPag].bt.gotoAndStop("select");this.pagines.pags[this.currentPag].numero.color="#E1001A";if(this.currentPag==this.numPagines-1){this.seguent.contenedor.visible=false}}};solucioPanell.prototype.validaPags=function(){for(key in Motor.pagines){if(Motor.pagines[key].validacio){this.pagines.pags[key].bt.gotoAndStop("correct")}else{this.pagines.pags[key].bt.gotoAndStop("error")}}};function PagBase(b,e){this.contenedor=new createjs.Container();this.num=b+1;this.contestada=0;var c=new Image();c.src=e;var d={images:[c],frames:{width:30,height:30},animations:{normal:[0],select:[1],buit:[2],correct:[3],error:[4]}};var a=new createjs.SpriteSheet(d);this.bt=new createjs.Sprite(a);this.bt.x=0;this.bt.y=0;this.bt.gotoAndStop("normal");this.numero=new createjs.RichText();this.numero.font="18px Arial";this.numero.color="#0D3158";this.numero.text=this.num.toString();this.numero.x=(this.num.toString().length==1)?10:4;this.numero.y=6;this.numero.mouseEnabled=false;this.contenedor.addChild(this.bt);this.contenedor.addChild(this.numero);this.contenedor.on("mouseover",function(f){document.body.style.cursor="pointer"});this.contenedor.on("mouseout",function(f){document.body.style.cursor="default"})}function Paginador(b){this.contenedor=new createjs.Container();this.pags=new Array();for(i=0;i<b;i++){var a="";if(i==0){a=new PagBase(i,"motor/images/paginacioIni.png")}else{if(i==b-1){a=new PagBase(i,"motor/images/paginacioFi.png")}else{a=new PagBase(i,"motor/images/paginacio.png")}}a.contenedor.x=i*30;a.contenedor.y=0;this.contenedor.addChild(a.contenedor);this.pags.push(a)}}function inicialPanell(a){this.fons=new createjs.Shape();this.fons.graphics.beginFill("#0D3158").drawRect(0,0,950,51);this.currentPag=Motor.currentNumPag;this.numPagines=a;this.contenedor=new createjs.Container();this.contenedor.x=0;this.contenedor.y=558;this.validar=new Boton(146,29,"motor/images/btnRestaurar.png",LangRes.lang[LangRes.REINTENTAR],"left");this.corregir=new Boton(146,28,"motor/images/btnValidar.png",LangRes.lang[LangRes.CORREGIR],"left");this.validar.contenedor.x=25;this.validar.contenedor.y=12;this.corregir.contenedor.x=169;this.corregir.contenedor.y=12;this.pagines="";if(this.numPagines>1){this.pagines=new Paginador(this.numPagines);this.pagines.contenedor.x=330;this.pagines.contenedor.y=11;this.seguent=new Boton(144,28,"motor/images/btnSeguent.png",LangRes.lang[LangRes.SIGUIENTE],"left");this.seguent.contenedor.x=300+this.numPagines*31+40;this.seguent.contenedor.y=12;if(this.currentPag==this.numPagines-1){this.seguent.contenedor.visible=false}}this.contenedor.addChild(this.fons);this.contenedor.addChild(this.text);this.contenedor.addChild(this.validar.contenedor);this.contenedor.addChild(this.corregir.contenedor);if(this.numPagines>1){this.contenedor.addChild(this.pagines.contenedor);this.contenedor.addChild(this.seguent.contenedor);this.pagines.pags[this.currentPag].bt.gotoAndStop("select")}Main.stage.removeChild(Contenedor.missatge.contenedor);Main.stage.addChild(this.contenedor);this.contenedor.alpha=0;createjs.Tween.get(this.contenedor).to({alpha:1},1250,createjs.Ease.circOut)}inicialPanell.prototype.selectPag=function(a){this.pagines.pags[a-1].bt.gotoAndStop("select");this.currentPag=a-1;if(this.currentPag<this.numPagines-1){this.seguent.contenedor.visible=true}if(this.currentPag==this.numPagines-1){this.seguent.contenedor.visible=false}};inicialPanell.prototype.unselectCurrentPag=function(){if(this.pagines.pags[this.currentPag].contestada==0){this.pagines.pags[this.currentPag].bt.gotoAndStop("normal")}else{this.pagines.pags[this.currentPag].bt.gotoAndStop("buit")}};inicialPanell.prototype.checkedCurrentPag=function(){this.pagines.pags[this.currentPag].contestada=1};inicialPanell.prototype.seguentPag=function(){if(this.currentPag<this.numPagines-1){this.unselectCurrentPag();this.currentPag++;this.pagines.pags[this.currentPag].bt.gotoAndStop("select");if(this.currentPag==this.numPagines-1){this.seguent.contenedor.visible=false}}};function BaseResposta(d,a,c,b){this.resposta=null;this.index=d;this.width=a;this.height=c;this.radius=b;this.idPregunta=-1;this.base=new createjs.Shape();this.contenedor=new createjs.Container();this.dibuixa()}BaseResposta.prototype.setReposta=function(a){this.resposta=a;this.resposta.index=this.index};BaseResposta.prototype.dibuixa=function(){this.base.graphics.beginFill("#fde8c2").drawRoundRect(0,0,this.width,this.height,this.radius);this.base.graphics.beginStroke("#f8B334").drawRoundRect(0,0,this.width,this.height,this.radius);this.base.mouseEnabled=false;this.contenedor.addChild(this.base)};function Resposta(d,a,c,b){this.width=a;this.height=c;this.radius=b;this.texte=d;this.index=0;this.idResposta=-1;this.error=false;this.correccio=new createjs.Shape();this.fons=new createjs.Shape();this.text=new createjs.RichText();this.contenedor=new createjs.Container();this.dibuixa()}Resposta.prototype.lightResponse=function(){this.fons.graphics.clear();this.fons.graphics.beginFill("#f8B334").drawRoundRect(0,0,this.width,this.height,this.radius);this.fons.shadow=new createjs.Shadow("#777",4,4,10)};Resposta.prototype.unlightResponse=function(){this.fons.graphics.beginFill("#fff").drawRoundRect(0,0,this.width,this.height,this.radius);this.fons.shadow=null};Resposta.prototype.erronia=function(){this.error=true;this.correccio.graphics.beginStroke("#E1001A").setStrokeStyle(3).drawRoundRect(-2,-2,this.width+4,this.height+4,this.radius);this.contenedor.addChild(this.correccio)};Resposta.prototype.correcte=function(){this.error=false;this.correccio.graphics.beginStroke("#41A62A").setStrokeStyle(3).drawRoundRect(-2,-2,this.width+4,this.height+4,this.radius);this.contenedor.addChild(this.correccio)};Resposta.prototype.removeError=function(){if(this.error){this.contenedor.removeChild(this.correccio)}};Resposta.prototype.dibuixa=function(){this.fons.graphics.beginFill("#fff").drawRoundRect(0,0,this.width,this.height,this.radius);this.text.font=(Contenedor.datosXML.plataforma.grado==1)?"16px Arial":"14px Arial";this.text.fontSize=(Contenedor.datosXML.plataforma.grado==1)?16:14;this.text.color="#0D3158";this.text.text=this.texte;this.text.x=8;this.text.y=5;this.text.lineWidth=305;this.text.lineHeight=22;this.text.mouseEnabled=false;this.text.mask=new createjs.Shape();this.text.mask.graphics.beginFill("#fff").drawRoundRect(0,0,this.width-10,this.height-5,1);this.text.mask.x=8;this.text.mask.y=3;this.contenedor.addChild(this.fons);this.contenedor.addChild(this.text)};function Pregunta(c,a,b){this.width=a;this.height=b;this.texte=c;this.index=0;this.idPregunta=-1;this.fons=new createjs.Shape();this.text=new createjs.RichText();this.contenedor=new createjs.Container();this.dibuixa()}Pregunta.prototype.dibuixa=function(){this.fons.graphics.beginFill("#fff");this.fons=Utils.arrowRect(this.fons,0,0,212,24);this.text.font=(Contenedor.datosXML.plataforma.grado==1)?"16px Arial":"14px Arial";this.text.fontSize=(Contenedor.datosXML.plataforma.grado==1)?16:14;this.text.color="#0D3158";this.text.text=this.texte;this.text.x=8;this.text.y=3;this.text.lineWidth=195;this.text.lineHeight=22;this.text.mouseEnabled=false;this.text.mask=new createjs.Shape();this.text.mask.graphics.beginFill("#fff").drawRoundRect(0,0,195,24,1);this.text.mask.x=8;this.text.mask.y=3;this.contenedor.addChild(this.fons);this.contenedor.addChild(this.text)};function datosContenedor(){this.tipo="";this.classe="";this.enunciado="";this.temps="";this.calc="";this.sinaleatoriedad="";this.masinfo=new masInfo();this.plataforma=new plataforma()}function plataforma(){this.grado="";this.titulo="";this.lang=""}function masInfo(){this.inicio="";this.text=""}function datosMotor(){this.cantidad="";this.preguntas=new Array();this.respuestas=new Array()}function pregunta(){this.text="";this.id=-1}function respuesta(){this.text="";this.id=-1}this.createjs=this.createjs||{};(function(){var a=function(d,c){this.parent=c;this.initialize(d)};var b=a.prototype=new createjs.DisplayObject();b.parent=false;b.grandParent=false;b.element_x=0;b.element_x=0;b.element_width=0;b.element_height=0;b.fontsize=0;b.htmlElement=null;b._oldMtx=null;b._visible=false;b.DisplayObject_initialize=b.initialize;b.initialize=function(d){if(typeof(d)=="string"){d=document.getElementById(d)}this.DisplayObject_initialize();this.mouseEnabled=false;this.htmlElement=d;var c=d.style;c.position="absolute";c.transformOrigin=c.WebkitTransformOrigin=c.msTransformOrigin=c.MozTransformOrigin=c.OTransformOrigin="0% 0%"};b.isVisible=function(){return this.htmlElement!=null};b.draw=function(c,d){if(this.visible){this._visible=true}return true};b.cache=function(){};b.uncache=function(){};b.updateCache=function(){};b.hitTest=function(){};b.localToGlobal=function(){};b.globalToLocal=function(){};b.localToLocal=function(){};b.clone=function(){throw ("DOMElementCustom cannot be cloned.")};b.toString=function(){return"[DOMElementCustom (name="+this.name+")]"};b.DisplayObject__tick=b._tick;b._tick=function(d){var c=this.getStage();this._visible=false;c&&c.on("drawstart",this._reSizePosition,this,true);c&&c.on("drawend",this._handleDrawEnd,this,true);this.DisplayObject__tick(d)};b._handleDrawEnd=function(d){var j=this.htmlElement;if(!j){return}var f=j.style;var c=this._visible?"visible":"hidden";if(c!=f.visibility){f.visibility=c}if(!this._visible){return}var e=this.getConcatenatedMatrix(this._matrix);var h=this._oldMtx;var k=10000;if(!h||h.alpha!=e.alpha){f.opacity=""+(e.alpha*k|0)/k;if(h){h.alpha=e.alpha}}if(!h||h.tx!=e.tx||h.ty!=e.ty||h.a!=e.a||h.b!=e.b||h.c!=e.c||h.d!=e.d){var g="matrix("+(e.a*k|0)/k+","+(e.b*k|0)/k+","+(e.c*k|0)/k+","+(e.d*k|0)/k+","+(e.tx+0.5|0);f.transform=f.WebkitTransform=f.OTransform=f.msTransform=g+","+(e.ty+0.5|0)+")";f.MozTransform=g+"px,"+(e.ty+0.5|0)+"px)";this._oldMtx=h?h.copy(e):e.clone()}};b._reSizePosition=function(){var e=$("#stage");var d=e.attr("height");var f=e.attr("width");var c=$("#wrapper").css("line-height").substring(0,e.css("line-height").lastIndexOf("px"));var g=0;if(c>d){g=((c-d)/2)/Main.scale}if(this.grandParent){this.x=(this.grandParent.x+this.parent.x+this.element_x/Main.scale)*Main.scale-this.parent.x*Main.scale-this.grandParent.x*Main.scale;this.y=(this.grandParent.y+this.parent.y+this.element_y/Main.scale)*Main.scale+g-this.parent.y*Main.scale-this.grandParent.y*Main.scale}else{this.x=(this.parent.x+this.element_x/Main.scale)*Main.scale-this.parent.x*Main.scale;this.y=(this.parent.y+this.element_y/Main.scale)*Main.scale+g-this.parent.y*Main.scale}$(this.htmlElement).css("height",this.element_height/Main.scale*d/Main.stage_height);$(this.htmlElement).css("width",this.element_width/Main.scale*f/Main.stage_width);if(window.innerHeight>1000){$(this.htmlElement).css("top",(window.innerHeight-d)/2)}else{$(this.htmlElement).css("top",0)}$(this.htmlElement).css("font-size",Math.round(this.fontsize/Main.scale*f/Main.stage_width))};createjs.DOMElementCustom=a}());LangRes=new function(){this.lang=new Array();this.curLang="";this.REINTENTAR=0;this.SOLUCION=1;this.CORREGIR=2;this.SIGUIENTE=3;this.TIEMPORESTANTE=4;this.MASINFORMACION=5;this.RESULTADO=6;this.RESPCORRECTAS=7;this.RESPCORRECTAS_DE=8;this.PUNTUACION=9;this.TIEMPOEMPLEADO=10;this.CONTINUAR=11;this.REINICIAR=12;this.ACEPTAR=13;this.CANCELAR=14;this.ABOUT=15;this.MSG_AGOTADOTIEMPO=16;this.MSG_REINTENTAR=17;this.MSG_REINTENTAR_AREVIEW=18;this.MSG_VALIDAR=19;this.MSG_VALIDARSINRESPONDER=20;this.init=function(){this.curLang="es";this.lang=this.lang_es};this.setLang=function(a){this.curLang=a;if(a=="en"){this.lang=this.lang_en}else{if(a=="val"){this.lang=this.lang_val}else{if(a=="gal"){this.lang=this.lang_gal}else{this.curLang="es";this.lang=this.lang_es}}}};this.lang_es=["Reintentar","Solución","Corregir","Siguiente","TIEMPO RESTANTE","Más información","Resultado","Respuestas correctas:","de","Puntuación:","Tiempo empleado:","Continuar","Reiniciar","Aceptar","Cancelar","Ejercicio xxxx versión xxxx","Has agotado el tiempo. Si continúas, se almacenará la nota del ejercicio. Si reinicias, empezarás el ejercicio de nuevo.","¡Atención! Si reintentas, empezarás el ejercicio de nuevo.","Esta actividad ya ha sido entregada. Ahora puedes practicar tantas veces como quieras.","Si continúas, se almacenará la nota del ejercicio. Si quieres hacer alguna modificación, haz clic en Cancelar.","Hay preguntas sin responder. Si continúas, se almacenará la nota del ejercicio. Si quieres hacer alguna modificación, haz clic en Cancelar."];this.lang_val=["Reintenta","Solució","Corregeix","Següent","TEMPS RESTANT","Més informació","Resultat","Respostes correctes:","de","Puntuació:","Temps emprat:","Continua","Reinicia","D'acord","Cancel·la","Exercici xxxx versió xxxx","Has esgotat el temps. Si continues, s'emmagatzemarà la nota de l'exercici. Si reinicies, tornaràs a començar l'exercici.","Atenció! Si reintentes, tornaràs a començar l'exercici.","Aquesta activitat ja s'ha lliurat. Ara pots practicar tantes vegades com vullgues.","Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic en Cancel·la.","Hi ha preguntes sense contestar. Si continues, s'emmagatzemarà la nota de l'exercici. Si vols fer alguna modificació, fes clic en Cancel·la."];this.lang_gal=["Tentar de novo","Solución","Corrixir","Seguinte","TEMPO RESTANTE","Máis información","Resultado","Respostas correctas:","de","Puntuación:","Tempo empregado:","Continuar","Reiniciar","Aceptar","Cancelar","Exercicio xxxx versión xxxx","Esgotaches o tempo. Se continúas, almacenarase a nota do exercicio. Se reinicias, empezarás o exercicio de novo.","Atención! Se o volves tentar, empezarás o exercicio de novo.","Xa se entregou esta actividade. Agora podes practicar tantas veces como queiras.","Se continúas, almacenarase a nota do exercicio. Se queres facer algunha modificación, fai clic en Cancelar.","Hai preguntas sen responder. Se continúas, almacenarase a nota do exercicio. Se queres facer algunha modificación, fai clic en Cancelar."];this.lang_en=["Retry","Answer","Correct exercise","Next","TIME REMAINING","More information","Score","Correct answers:","of","Score:","Time taken:","Continue","Restart","OK","Cancel","Exercise xxxx version xxxx","You have run out of time. If you continue, your score will be saved. If you restart, you'll begin the exercise again.","Watch out! If you restart, you'll begin the exercise again.","This activity has been delivered. Now you can practice as many times as you want.","If you continue, your exercise score will be saved. If you want to make any changes, click Cancel.","Some questions have not been answered. If you continue, your exercise score will be saved. In case you want to make any changes, click Cancel."]};Main=new function(){this.stage="";this.navegador="";this.mobil="";this.stage_width=950;this.stage_height=608;this.scale=1;this.text_Y=0;this.text_X=0;this.refresh=function(a){Main.stage.update()};this.setFocus=function(a){Main.input=a};this.init=function(){this.stage=new createjs.Stage("stage");createjs.Touch.enable(this.stage);this.stage.enableMouseOver();this.navegador=Main.detectBrowser();this.mobil=Main.detectDevice();Scorm.init(aulaPlaneta.SCORM.initialize());Contenedor.cargarDatos();createjs.Ticker.addEventListener("tick",this.refresh);Main.windowResize();setTimeout(Main.windowResize,100);this.stage.update()};this.switchBrowser=function(){var a=this.navegador.split(" ")[0];switch(a){case"Firefox":break;case"IE":break;case"Chrome":break;case"Safari":break}};this.detectBrowser=function(){var b=navigator.userAgent,a,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(c[1])){a=/\brv[ :]+(\d+)/g.exec(b)||[];return"IE "+(a[1]||"")}if(c[1]==="Chrome"){a=b.match(/\bOPR\/(\d+)/);if(a!=null){return"Opera "+a[1]}}c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"];if((a=b.match(/version\/(\d+)/i))!=null){c.splice(1,1,a[1])}return c.join(" ")};this.detectDevice=function(){if(navigator.userAgent.match(/Android/i)){return"Android"}else{if(navigator.userAgent.match(/webOS/i)){return"webOS"}else{if(navigator.userAgent.match(/iPhone/i)){return"iPhone"}else{if(navigator.userAgent.match(/iPad/i)){return"iPad"}else{if(navigator.userAgent.match(/iPod/i)){return"iPod"}else{if(navigator.userAgent.match(/BlackBerry/i)){return"BlackBerry"}else{if(navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/iemobile/i)||navigator.userAgent.match(/windows mobile/i)){return"Windows"}else{return"PC"}}}}}}}};this.windowResize=function(){var a=window.innerWidth;var c=window.innerHeight;var b=Main.stage_width;var d=Main.stage_height;Main.scale=Math.min(a/b,c/d);Main.stage.scaleX=Main.scale;Main.stage.scaleY=Main.scale;Main.stage.canvas.width=b*Main.scale;Main.stage.canvas.height=d*Main.scale;$("#wrapper").css("line-height",c+"px")}};window.addEventListener("resize",Main.windowResize,false);Motor=new function(){this.fons="";this.inicis=new Array();this.finals=new Array();this.preguntes=new Array();this.respostes=new Array();this.contenedor="";this.INITIAL_Y=118;this.PREG_Y_PADDING=87;this.PREG_X_PADDING=25;this.PREG_INICI_X_PADDING=235;this.PREG_FINAL_X_PADDING=585;this.RESP_HEIGHT=82;this.RESP_WIDTH=322;this.RESP_INNER_HEIGHT=80;this.RESP_INNER_WIDTH=320;this.LINE_X=570;this.LINE_Y_MIN=20;this.LINE_Y_MAX=535;this.LINE_SIZE=3;this.itemX=0;this.itemY=0;this.separator="";this.datosXML="";this.estado="";this.currentElement=null;this.ponerContenedor=function(a){};this.cargarDatos=function(){$.get("data/datos.xml",function(b){Motor.datosXML=new datosMotor();Motor.datosXML.cantidad=$(b).find("textoatexto").attr("cantidad");if(Contenedor.datosXML.plataforma.grado==1&&Motor.datosXML.cantidad>4){Motor.datosXML.cantidad=4}var a=0;$(b).find("cuestion").each(function(c){if(a<Motor.datosXML.cantidad){var e=new pregunta();e.text=$(this).find("pregunta").text();e.id=c;Motor.datosXML.preguntas.push(e);var d=new respuesta();d.text=$(this).find("respuesta").text();d.id=c;Motor.datosXML.respuestas.push(d)}a++});Motor.inicializarEstructura();Contenedor.crearPaginacio()})};this.inicializarEstructura=function(){this.init()};this.reinicializarEstructuraMotor=function(){Main.stage.removeChild(Motor.contenedor);Motor.cargarDatos()};this.estaCompletado=function(){for(key in Motor.inicis){if(Motor.inicis[key].resposta==null){return false}}return true};this.getEstado=function(){var c=new Array();for(var b=0;b<Motor.preguntes.length;b++){for(var a in Motor.preguntes){if(b==Motor.preguntes[a].idPregunta){for(key1 in Motor.inicis){if(Motor.preguntes[a].idPregunta==Motor.inicis[key1].idPregunta){if(Motor.inicis[key1].resposta!=null){c.push(Motor.inicis[key1].resposta.idResposta)}else{c.push("")}}}}}}return c.join(",")};this.revisar=function(){if(this.estado!=""){if(this.estado.indexOf("[")>=0){var b=this.estado.substring(1,this.estado.length-1).split("][");Contenedor.timeRevision=b[0];var c=b[1].split(",")}else{var c=this.estado.split(",")}for(var a in c){for(key2 in Motor.finals){if(""!=c[a]&&Motor.finals[key2].resposta.idResposta==c[a]){for(key1 in Motor.preguntes){if(a==Motor.preguntes[key1].idPregunta){Motor.inicis[key1].setReposta(Motor.finals[key2].resposta);Motor.contenedor.setChildIndex(Motor.finals[key2].resposta.contenedor,Motor.contenedor.getNumChildren()-1);Motor.finals[key2].resposta.contenedor.x=Motor.inicis[key1].contenedor.x+1;Motor.finals[key2].resposta.contenedor.y=Motor.inicis[key1].contenedor.y+1;break}}break}}}}};this.validar=function(){var a=0;for(key1 in Motor.preguntes){for(key2 in Motor.inicis){if(key1==key2){if(Motor.inicis[key2].resposta==null){}else{if(Motor.inicis[key2].resposta.idResposta==Motor.preguntes[key1].idPregunta){a++;Motor.inicis[key2].resposta.correcte()}else{Motor.inicis[key2].resposta.erronia()}}}}}return a.toString()+"/"+Motor.preguntes.length.toString()};this.hideDomObjects=function(){};this.showDomObjects=function(){};this.obtenerEstado=function(){};this.reiniciar=function(){};this.activar=function(){for(key in Motor.respostes){Motor.respostes[key].contenedor.on("mousedown",Motor.preDragAndDrop,null,false,{resposta:Motor.respostes[key]});Motor.respostes[key].contenedor.on("pressmove",Motor.dragAndDrop,null,false,{resposta:Motor.respostes[key]});Motor.respostes[key].contenedor.on("pressup",Motor.dropResposta,null,false,{resposta:Motor.respostes[key]});Motor.respostes[key].contenedor.on("mouseover",function(a){document.body.style.cursor="pointer"});Motor.respostes[key].contenedor.on("mouseout",function(a){document.body.style.cursor="default"})}};this.desactivar=function(){for(key in Motor.respostes){Motor.respostes[key].contenedor.removeAllEventListeners("mousedown");Motor.respostes[key].contenedor.removeAllEventListeners("pressmove");Motor.respostes[key].contenedor.removeAllEventListeners("pressup");Motor.respostes[key].contenedor.removeAllEventListeners("mouseover");Motor.respostes[key].contenedor.removeAllEventListeners("mouseout")}};this.numPaginas=function(){return 0};this.ponerPagina=function(a){};this.obtenerPaginaActual=function(a){};this.verSolucion=function(a){this.recolocar();this.solucionar();this.desactivar()};this.recolocar=function(){for(key1 in Motor.inicis){if(Motor.inicis[key1].resposta!=null){for(key2 in Motor.finals){if(Motor.finals[key2].resposta.contenedor.id==Motor.inicis[key1].resposta.contenedor.id){Motor.inicis[key1].resposta.contenedor.x=Motor.finals[key2].contenedor.x+1;Motor.inicis[key1].resposta.contenedor.y=Motor.finals[key2].contenedor.y+1;Motor.inicis[key1].resposta=null;break}}}}};this.solucionar=function(){var a=0;for(key1 in Motor.preguntes){for(key2 in Motor.finals){if(Motor.finals[key2].resposta.idResposta==Motor.preguntes[key1].idPregunta){Motor.finals[key2].resposta.removeError();Motor.contenedor.setChildIndex(Motor.finals[key2].resposta.contenedor,Motor.contenedor.getNumChildren()-1);createjs.Tween.get(Motor.finals[key2].resposta.contenedor).wait(250+key1*350).to({x:Motor.inicis[key1].contenedor.x+1,y:Motor.inicis[key1].contenedor.y+1},750,createjs.Ease.circOut);break}}}};this.obtenerTipoEjercicio=function(){};this.obtenerVersion=function(){};this.init=function(){this.contenedor=new createjs.Container();this.drawPreguntes();this.drawInicis();this.drawLine();this.drawFinals();Main.stage.addChild(this.contenedor)};this.drawFons=function(){this.fons=new createjs.Shape();this.fons.graphics.beginFill("#fde8c2").drawRect(0,0,950,440);this.fons.x=0;this.fons.y=this.INITIAL_Y;this.contenedor.addChild(this.fons)};this.drawPreguntes=function(){Motor.preguntes=new Array();var c=Motor.datosXML.preguntas;for(i=0;i<Motor.datosXML.cantidad;i++){var b=0;if(Contenedor.datosXML.sinaleatoriedad==0&&Scorm.modo!=Scorm.MODO_REVISAR&&Scorm.modo!=Scorm.MODO_REVISARALUMNO){b=Math.floor(Math.random()*c.length)}var a=c[b];c.splice(b,1);var d=new Pregunta(a.text,this.RESP_WIDTH,this.RESP_HEIGHT);d.contenedor.x=this.PREG_X_PADDING;d.contenedor.y=this.INITIAL_Y+this.PREG_Y_PADDING*i+30+i*((this.RESP_HEIGHT+5)*(5-Motor.datosXML.cantidad))/(Motor.datosXML.cantidad-1);d.idPregunta=a.id;this.contenedor.addChild(d.contenedor);Motor.preguntes.push(d)}};this.drawInicis=function(){Motor.inicis=new Array();for(i=0;i<Motor.datosXML.cantidad;i++){var a=new BaseResposta(i,this.RESP_WIDTH,this.RESP_HEIGHT,10);a.contenedor.x=this.PREG_X_PADDING+this.PREG_INICI_X_PADDING;a.contenedor.y=this.INITIAL_Y+this.RESP_HEIGHT*i+(5*i)+5+i*((this.RESP_HEIGHT+5)*(5-Motor.datosXML.cantidad))/(Motor.datosXML.cantidad-1);a.idPregunta=Motor.preguntes[i].idPregunta;this.contenedor.addChild(a.contenedor);Motor.inicis.push(a)}};this.drawLine=function(){this.separator=new createjs.Shape();this.separator.graphics.beginStroke("#0D3158").setStrokeStyle(2);this.separator=Utils.dashedLineTo(this.separator,this.PREG_X_PADDING+this.LINE_X,this.INITIAL_Y+this.LINE_Y_MIN,this.PREG_X_PADDING+this.LINE_X,this.LINE_Y_MAX,this.LINE_SIZE);this.contenedor.addChild(this.separator)};this.drawFinals=function(){Motor.respostes=new Array();Motor.finals=new Array();var c=Motor.datosXML.respuestas;for(i=0;i<Motor.datosXML.cantidad;i++){var a=0;if(Contenedor.datosXML.sinaleatoriedad==0&&Scorm.modo!=Scorm.MODO_REVISAR&&Scorm.modo!=Scorm.MODO_REVISARALUMNO){a=Math.floor(Math.random()*c.length)}var b=c[a];c.splice(a,1);var e=new BaseResposta(i,this.RESP_WIDTH,this.RESP_HEIGHT,10);e.contenedor.x=this.PREG_X_PADDING+this.PREG_FINAL_X_PADDING;e.contenedor.y=this.INITIAL_Y+this.RESP_HEIGHT*i+5*i+5+i*((this.RESP_HEIGHT+5)*(5-Motor.datosXML.cantidad))/(Motor.datosXML.cantidad-1);var d=new Resposta(b.text,this.RESP_INNER_WIDTH,this.RESP_INNER_HEIGHT,10);d.contenedor.x=this.PREG_X_PADDING+this.PREG_FINAL_X_PADDING+1;d.contenedor.y=this.INITIAL_Y+this.RESP_HEIGHT*i+5*i+6+i*((this.RESP_HEIGHT+5)*(5-Motor.datosXML.cantidad))/(Motor.datosXML.cantidad-1);d.idResposta=b.id;e.setReposta(d);Motor.respostes.push(d);Motor.finals.push(e);this.contenedor.addChild(e.contenedor);this.contenedor.addChild(d.contenedor);d.contenedor.on("mousedown",this.preDragAndDrop,null,false,{resposta:d});d.contenedor.on("pressmove",this.dragAndDrop,null,false,{resposta:d});d.contenedor.on("pressup",this.dropResposta,null,false,{resposta:d});d.contenedor.on("mouseover",function(f){document.body.style.cursor="pointer"});d.contenedor.on("mouseout",function(f){document.body.style.cursor="default"})}};this.preDragAndDrop=function(a,b){if(Motor.currentElement==null){Motor.currentElement=b.element;Motor.itemX=a.stageX/Main.scale-a.target.parent.x;Motor.itemY=a.stageY/Main.scale-a.target.parent.y;Motor.contenedor.setChildIndex(a.target.parent,Motor.contenedor.getNumChildren()-1);b.resposta.lightResponse();for(key in Motor.inicis){if(Motor.inicis[key].resposta!=null&&Motor.inicis[key].resposta.contenedor.id==a.target.parent.id){Motor.inicis[key].resposta=null}}}};this.dragAndDrop=function(a,b){if(Motor.currentElement==b.element){a.target.parent.x=a.stageX/Main.scale-Motor.itemX;a.target.parent.y=a.stageY/Main.scale-Motor.itemY}};this.dropResposta=function(a,b){if(Motor.currentElement==b.element){b.resposta.unlightResponse();var d=false;for(key in Motor.inicis){var c=Motor.inicis[key].contenedor.globalToLocal((a.target.parent.x+160)*Main.scale,(a.target.parent.y+40)*Main.scale);if(a.target.parent.children[0].hitTest(c.x,c.y)){if(Motor.inicis[key].resposta==null){createjs.Tween.get(a.target.parent).to({x:Motor.inicis[key].contenedor.x+1},750,createjs.Ease.circOut);createjs.Tween.get(a.target.parent).to({y:Motor.inicis[key].contenedor.y+1},750,createjs.Ease.circOut);Motor.inicis[key].setReposta(b.resposta);d=true}}}if(!d){for(key in Motor.finals){if(Motor.finals[key].resposta.contenedor.id==b.resposta.contenedor.id){createjs.Tween.get(a.target.parent).to({x:Motor.finals[key].contenedor.x+1},750,createjs.Ease.circOut);createjs.Tween.get(a.target.parent).to({y:Motor.finals[key].contenedor.y+1},750,createjs.Ease.circOut)}}}Motor.currentElement=null}}};this.createjs=this.createjs||{};(function(){var b=function(f,e,d){this.initialize(f,e,d)};var c=b.prototype=new createjs.DisplayObject();var a=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"));if(a.getContext){b._workingContext=a.getContext("2d");a.width=a.height=1}b.H_OFFSETS={start:0,left:0,center:-0.5,end:-1,right:-1};b.V_OFFSETS={top:0,hanging:-0.01,middle:-0.4,alphabetic:-0.8,ideographic:-0.85,bottom:-1};c.text="";c.font=null;c.color=null;c.textAlign="left";c.textBaseline="top";c.maxWidth=null;c.outline=0;c.lineHeight=0;c.lineWidth=null;c.current_Y=0;c.current_font="";c.base_font="";c.underline=false;c.fontSize=0;c.cleanedText="";c.lines=0;c.yPatch=0;c.DisplayObject_initialize=c.initialize;c.initialize=function(f,e,d){this.DisplayObject_initialize();this.text=f;this.font=e;this.color=d};c.isVisible=function(){var d=this.cacheCanvas||(this.text!=null&&this.text!=="");return !!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&d)};c.DisplayObject_draw=c.draw;c.draw=function(d,f){if(this.DisplayObject_draw(d,f)){return true}if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){this.yPatch=d.measureText("M").width*0.25}var e=this.color||"#000";if(this.outline){d.strokeStyle=e;d.lineWidth=this.outline*1}else{d.fillStyle=e}this._drawText(this._prepContext(d));return true};c.getMeasuredWidth=function(){this.cleanText();return this._prepContext(b._workingContext).measureText(this.cleanedText).width};c.getMeasuredLineHeight=function(){return this._prepContext(b._workingContext).measureText("M").width*1.2};c.getMeasuredHeight=function(){return this._drawText(null,{}).height};c.DisplayObject_getBounds=c.getBounds;c.getBounds=function(){var g=this.DisplayObject_getBounds();if(g){return g}if(this.text==null||this.text==""){return null}var h=this._drawText(null,{});var e=(this.maxWidth&&this.maxWidth<h.width)?this.maxWidth:h.width;var d=e*b.H_OFFSETS[this.textAlign||"left"];var f=this.lineHeight||this.getMeasuredLineHeight();var j=f*b.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.initialize(d,j,e,h.height)};c.clone=function(){var d=new b(this.text,this.font,this.color);this.cloneProps(d);return d};c.toString=function(){return"[RichText (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"};c.DisplayObject_cloneProps=c.cloneProps;c.cloneProps=function(d){this.DisplayObject_cloneProps(d);d.textAlign=this.textAlign;d.textBaseline=this.textBaseline;d.maxWidth=this.maxWidth;d.outline=this.outline;d.lineHeight=this.lineHeight;d.lineWidth=this.lineWidth};c._prepContext=function(d){d.font=this.font;d.textAlign=this.textAlign||"left";d.textBaseline=this.textBaseline||"top";return d};c._drawText=function(t,q){var p=!!t;if(!p){t=this._prepContext(b._workingContext)}var g=this.lineHeight||this.getMeasuredLineHeight();var z=0,h=0;this.cleanText();var d=String(this.text).split(/(?:\r\n|\r|\n)/);var A=String(this.cleanedText).split(/(?:\r\n|\r|\n)/);for(var x=0,u=d.length;x<u;x++){var r=d[x];var s=A[x];var k=null;var e=null;if(this.lineWidth!=null&&(e=t.measureText(s).width)>this.lineWidth){var n=r.split(/(\s)/);r=n[0];var f=s.split(/(\s)/);s=f[0];e=t.measureText(s).width;for(var v=1,y=f.length;v<y;v+=2){var m=t.measureText(f[v]+f[v+1]).width;if(e+m>this.lineWidth){if(p){this._drawTextLine(t,r,h*g)}if(e>z){z=e}r=n[v+1];s=f[v+1];e=t.measureText(s).width;h++}else{r+=n[v]+n[v+1];s+=f[v]+f[v+1];e+=m}}}if(p){this._drawTextLine(t,r,h*g)}if(q&&e==null){e=t.measureText(s).width}if(e>z){z=e}h++}if(q){q.count=h;q.width=z;q.height=h*g}this.current_Y=0;return q};c.cleanText=function(){this.text=this.text.split("{{sub}}").join("<sb>");this.text=this.text.split("{{sup}}").join("<sp>");this.text=this.text.split("{{/subsup}}").join("<fs>");this.text=this.text.split("{{normal}}").join("<n>");this.text=this.text.split("{{cur}}").join("<c>");this.text=this.text.split("{{neg}}").join("<b>");this.text=this.text.split("{{u}}").join("<u>");this.text=this.text.split("{{lt}}").join("<lt>");this.text=this.text.split("{{lg}}").join("<lg>");this.cleanedText=this.text.split("<sb>").join("");this.cleanedText=this.cleanedText.split("<sp>").join("");this.cleanedText=this.cleanedText.split("<fs>").join("");this.cleanedText=this.cleanedText.split("<n>").join("");this.cleanedText=this.cleanedText.split("<c>").join("");this.cleanedText=this.cleanedText.split("<b>").join("");this.cleanedText=this.cleanedText.split("<u>").join("");this.cleanedText=this.cleanedText.split("<lt>").join("");this.cleanedText=this.cleanedText.split("<lg>").join("")};c._drawTextLine=function(n,m,j){var h=0;var e=j;var k="";if(this.current_font=""){this.current_font=n.font}this.current_Y=j;if(this.base_font==""){this.base_font=n.font}var g=m.split("<");k=g[0];this._drawTextPart(n,k,h);h+=n.measureText(k).width;for(var l in g){if(l==0){continue}var d=g[l];var f=g[l].split(">");this.underline=false;switch(f[0]){case"sb":this.current_font=Math.ceil(this.fontSize/1.5)+"px Arial";this.current_Y=e+Math.ceil(this.fontSize/3)+3;break;case"sp":this.current_font=Math.ceil(this.fontSize/1.5)+"px Arial";this.current_Y=e-4;break;case"c":this.current_font="italic "+this.base_font;this.current_Y=e;break;case"b":this.current_font="bold "+this.base_font;this.current_Y=e;break;case"u":this.underline=true;break;case"lt":f[1]="<"+f[1];break;case"lg":f[1]=">"+f[1];break;default:this.current_Y=e;this.current_font=this.base_font;break}k=f[1];this._drawTextPart(n,k,h);h+=n.measureText(k).width}};c._drawTextPart=function(e,f,d){e.font=this.current_font;if(this.outline){e.strokeText(f,d,this.current_Y+this.yPatch,this.maxWidth||65535)}else{e.fillText(f,d,this.current_Y+this.yPatch,this.maxWidth||65535)}if(this.underline){this._drawUnderline(e,f,d)}};c._drawUnderline=function(e,f,d){e.beginPath();e.strokeStyle=this.color;e.lineWidth=1;e.moveTo(d,this.current_Y+this.fontSize);e.lineTo(d+e.measureText(f.trim()).width,this.current_Y+this.fontSize);e.stroke()};createjs.RichText=b}());Scorm=new function(){this.modo="";this.suspend_data="";this.completed="";this.connected=false;this.MODO_EXPONER="browse";this.MODO_REVISAR="review";this.MODO_REVISARALUMNO="areview";this.MODO_EXAMEN="exam";this.init=function(a){this.modo=a.mode;this.suspend_data=a.suspend_data;this.completed=a.completed;this.connected=a.connected}};Utils=new function(){this.dashedLineTo=function(g,c,k,b,j,f){g.graphics.moveTo(c,k);var e=b-c;var d=j-k;var h=Math.floor(Math.sqrt(e*e+d*d)/f);var m=e/h;var l=d/h;var a=0;while(a++<h){c+=m;k+=l;if(a%2==0){g.graphics.moveTo(c,k)}else{g.graphics.lineTo(c,k)}}if(a%2==0){g.graphics.moveTo(c,k)}else{g.graphics.lineTo(c,k)}return g};this.arrowRect=function(b,c,f,a,e){var d=a*0.075;var g=a-d;b.graphics.moveTo(c,f);b.graphics.lineTo(c+g,f);b.graphics.lineTo(c+g+d*0.8,f+e*0.8/2);b.graphics.quadraticCurveTo(c+g+d*0.95,f+e/2,c+g+d*0.8,f+e*1.2/2,1);b.graphics.moveTo(c+g+d*0.8,f+e*1.2/2);b.graphics.lineTo(c+g,f+e);b.graphics.lineTo(c,f+e);b.graphics.lineTo(c,f);return b};this.lPad=function(b,a){b=b.toString();return b.length<a?this.lPad("0"+b,a):b};this.richText=function(a){xml=replace(a,"{{sub}}",'</u></i></b><font face="GG subscript">');xml=replace(a,"{{sup}}",'</u></i></b><font face="GG Superscript">');xml=replace(a,"{{/subsup}}",'</u></i></b></font><font face="Arial Unicode MS">');xml=replace(a,"{{normal}}",'</u></i></b></font><font face="Arial Unicode MS">');xml=replace(a,"{{cur}}",'</u></i></b></font><font face="Arev Sans" size="-1"><i>');xml=replace(a,"{{neg}}",'</u></i></b></font><font face="Arev Sans" size="-1"><b>');xml=replace(a,"{{u}}","</u></i></b><u>");return xml};this.cleanText=function(b){b=b.split("{{sub}}").join("<sub>");b=b.split("{{sup}}").join("<sup>");b=b.split("{{/subsup}}").join("<n>");b=b.split("{{normal}}").join("<n>");b=b.split("{{cur}}").join("<c>");b=b.split("{{neg}}").join("<b>");b=b.split("{{u}}").join("<u>");b=b.split("\n").join("<br/>");b=b.split("\r").join("<br/>");var e=false;var d=false;var a="";for(var c=0;c<b.length;c++){if(b[c]=="<"){e=true;d=false;continue}if(b[c]!=">"){if(e){if(b[c]==" "||b[c]=="n"||b[c]=="/"){e=false;continue}else{a=a+b[c];continue}}}else{if(e){b=b.replace("<n>","</"+a+">");e=false;d=false;a=""}}}return b}};